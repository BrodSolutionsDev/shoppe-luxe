(self["webpackChunkbigcommerce_cornerstone"] = self["webpackChunkbigcommerce_cornerstone"] || []).push([["vendors-node_modules_jstree_dist_jstree_min_js"],{

/***/ "./node_modules/jstree/dist/jstree.min.js":
/*!************************************************!*\
  !*** ./node_modules/jstree/dist/jstree.min.js ***!
  \************************************************/
/***/ ((module, exports, __webpack_require__) => {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jsTree - v3.3.15 - 2023-02-20 - (MIT) */

!function(e){"use strict"; true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):0}(function(E,P){"use strict";if(!E.jstree){var s=0,a=!1,n=!1,d=!1,r=[],e=E("script:last").attr("src"),b=window.document,c=window.setImmediate,i=window.Promise;!c&&i&&(c=function(e,t){i.resolve(t).then(e)}),E.jstree={version:"3.3.15",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},E.jstree.create=function(e,i){var r=new E.jstree.core(++s),t=i;return i=E.extend(!0,{},E.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),E.each(i.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,i[t]))}),E(e).data("jstree",r),r.init(e,i),r},E.jstree.destroy=function(){E(".jstree:jstree").jstree("destroy"),E(b).off(".jstree")},E.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},E.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=E(t)}catch(e){}if(!e||!e.length)try{e=E("#"+t.replace(E.jstree.idregex,"\\$&"))}catch(e){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:E(".jstree").each(function(){var e=E(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},E.fn.jstree=function(i){var r="string"==typeof i,s=Array.prototype.slice.call(arguments,1),a=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=E.jstree.reference(this),t=r&&e?e[i]:null;if(a=r&&t?t.apply(e,s):null,e||r||i!==P&&!E.isPlainObject(i)||E.jstree.create(this,i),null!==(a=e&&!r||!0===i?e||!1:a)&&a!==P)return!1}),null!==a&&a!==P?a:this)},E.expr.pseudos.jstree=E.expr.createPseudo(function(e){return function(e){return E(e).hasClass("jstree")&&E(e).data("jstree")!==P}}),E.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:E.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,compute_elements_positions:!1,keyboard:{"ctrl-space":function(e){e.type="click",E(e.currentTarget).trigger(e)},enter:function(e){e.type="click",E(e.currentTarget).trigger(e)},left:function(e){var e;e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(e=this.get_parent(e.currentTarget))&&e.id!==E.jstree.root&&this.get_node(e,!0).children(".jstree-anchor").trigger("focus")},up:function(e){e.preventDefault();var e=this.get_prev_dom(e.currentTarget);e&&e.length&&e.children(".jstree-anchor").trigger("focus")},right:function(e){var e;e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").trigger("focus")}):!this.is_open(e.currentTarget)||(e=this.get_node(e.currentTarget,!0).children(".jstree-children")[0])&&E(this._firstChild(e)).children(".jstree-anchor").trigger("focus")},down:function(e){e.preventDefault();var e=this.get_next_dom(e.currentTarget);e&&e.length&&e.children(".jstree-anchor").trigger("focus")},"*":function(e){this.open_all()},home:function(e){e.preventDefault();var e=this._firstChild(this.get_container_ul()[0]);e&&E(e).children(".jstree-anchor").filter(":visible").trigger("focus")},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().trigger("focus")},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},E.jstree.core.prototype={plugin:function(e,t){var i=E.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[E.jstree.root]={id:E.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=E(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(E.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e=b.createElement("LI"),t,i;return e.setAttribute("role","none"),(t=b.createElement("I")).className="jstree-icon jstree-ocl",t.setAttribute("role","presentation"),e.appendChild(t),(t=b.createElement("A")).className="jstree-anchor",t.setAttribute("href","#"),t.setAttribute("tabindex","-1"),t.setAttribute("role","treeitem"),(i=b.createElement("I")).className="jstree-icon jstree-themeicon",i.setAttribute("role","presentation"),t.appendChild(i),e.appendChild(t),t=i=null,e},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},i=[];if(e.ctrlKey&&i.push("ctrl"),e.altKey&&i.push("alt"),e.shiftKey&&i.push("shift"),i.push(t[e.which]?t[e.which].toLowerCase():e.which),"shift-shift"===(i=i.sort().join("-").toLowerCase())||"ctrl-ctrl"===i||"alt-alt"===i)return null;var r=this.settings.core.keyboard,s,a;for(s in r)if(r.hasOwnProperty(s)&&(a="-"!==(a=s)&&"+"!==a?(a=a.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase():a)===i)return r[s];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var s="",a=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(b.selection&&b.selection.empty)b.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}}).on("mousedown.jstree",function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)}.bind(this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",function(e){this.toggle_node(e.target)}.bind(this)).on("dblclick.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)}.bind(this)).on("click.jstree",".jstree-anchor",function(e){e.preventDefault(),e.currentTarget!==b.activeElement&&E(e.currentTarget).trigger("focus"),this.activate_node(e.currentTarget,e)}.bind(this)).on("keydown.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var e=t.call(this,e);if(!1===e||!0===e)return e}}.bind(this)).on("load_node.jstree",function(e,t){t.status&&(t.node.id!==E.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var e=[],t,i,t=0,i=this._data.core.selected.length;t<i;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);for(t=0,i=(e=E.vakata.array_unique(e)).length;t<i;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}}.bind(this),0))}.bind(this)).on("keypress.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;a&&clearTimeout(a),a=setTimeout(function(){s=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),e=t.index(b.activeElement)||0,r=!1;if(1<(s+=i).length){if(t.slice(e).each(function(e,t){if(0===E(t).text().toLowerCase().indexOf(s))return E(t).trigger("focus"),!(r=!0)}.bind(this)),r)return;if(t.slice(0,e).each(function(e,t){if(0===E(t).text().toLowerCase().indexOf(s))return E(t).trigger("focus"),!(r=!0)}.bind(this)),r)return}new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(s)&&(t.slice(e+1).each(function(e,t){if(E(t).text().toLowerCase().charAt(0)===i)return E(t).trigger("focus"),!(r=!0)}.bind(this)),r||t.slice(0,e+1).each(function(e,t){if(E(t).text().toLowerCase().charAt(0)===i)return E(t).trigger("focus"),!(r=!0)}.bind(this)))}.bind(this)).on("init.jstree",function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)}.bind(this)).on("loading.jstree",function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()}.bind(this)).on("blur.jstree",".jstree-anchor",function(e){this._data.core.focused=null,E(e.currentTarget).filter(".jstree-hovered").trigger("mouseleave"),this.element.attr("tabindex","0"),E(e.currentTarget).attr("tabindex","-1")}.bind(this)).on("focus.jstree",".jstree-anchor",function(e){var t=this.get_node(e.currentTarget);t&&(t.id||0===t.id)&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).trigger("mouseleave"),E(e.currentTarget).trigger("mouseenter"),this.element.attr("tabindex","-1"),E(e.currentTarget).attr("tabindex","0")}.bind(this)).on("focus.jstree",function(){var e;500<+new Date-t&&!this._data.core.focused&&this.settings.core.restore_focus&&(t=0,(e=this.get_node(this.element.attr("aria-activedescendant"),!0))&&e.find("> .jstree-anchor").trigger("focus"))}.bind(this)).on("mouseenter.jstree",".jstree-anchor",function(e){this.hover_node(e.currentTarget)}.bind(this)).on("mouseleave.jstree",".jstree-anchor",function(e){this.dehover_node(e.currentTarget)}.bind(this))},unbind:function(){this.element.off(".jstree"),E(b).off(".jstree-"+this._id)},trigger:function(e,t){((t=t||{}).instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return E.vakata.is_function(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){e=e?e.firstChild:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_nextSibling:function(e){e=e?e.nextSibling:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_previousSibling:function(e){e=e?e.previousSibling:null;while(null!==e&&1!==e.nodeType)e=e.previousSibling;return e},get_node:function(e,t){var i;(e=e&&(e.id||0===e.id)?e.id:e)instanceof E&&e.length&&e[0].id&&(e=e[0].id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=E("#"+e.replace(E.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=this.element.find(e)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=this.element.find(e)).length||!i.hasClass("jstree"))return!1;e=this._model.data[E.jstree.root]}return e=t?e.id===E.jstree.root?this.element:E("#"+e.id.replace(E.jstree.idregex,"\\$&"),this.element):e}catch(e){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===E.jstree.root||!e.parents)return!1;var r,s,a=[];for(a.push(i?e.id:e.text),r=0,s=e.parents.length;r<s;r++)a.push(i?e.parents[r]:this.get_text(e.parents[r]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this._firstChild(this.get_container_ul()[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);return!!i&&E(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return!!i&&E(i)}if(e.hasClass("jstree-open")){i=this._firstChild(e.children(".jstree-children")[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);if(null!==i)return E(i)}i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return null!==i?E(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this.get_container_ul()[0].lastChild;while(i&&0===i.offsetHeight)i=this._previousSibling(i);return!!i&&E(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);return!!i&&E(i)}i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&E(i);e=E(i);while(e.hasClass("jstree-open"))e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(n,d){var e=this.get_node(n,!0),t,i,r,s,a;if(E.vakata.is_array(n))return this._load_nodes(n.slice(),d),!0;if(!(n=this.get_node(n)))return d&&d.call(this,n,!1),!1;if(n.state.loaded){for(n.state.loaded=!1,r=0,s=n.parents.length;r<s;r++)this._model.data[n.parents[r]].children_d=E.vakata.array_filter(this._model.data[n.parents[r]].children_d,function(e){return-1===E.inArray(e,n.children_d)});for(t=0,i=n.children_d.length;t<i;t++)this._model.data[n.children_d[t]].state.selected&&(a=!0),delete this._model.data[n.children_d[t]];a&&(this._data.core.selected=E.vakata.array_filter(this._data.core.selected,function(e){return-1===E.inArray(e,n.children_d)})),n.children=[],n.children_d=[],a&&this.trigger("changed",{action:"load_node",node:n,selected:this._data.core.selected})}return n.state.failed=!1,n.state.loading=!0,(n.id!==E.jstree.root?e.children(".jstree-anchor"):e).attr("aria-busy",!0),e.addClass("jstree-loading"),this._load_node(n,function(e){(n=this._model.data[n.id]).state.loading=!1,n.state.loaded=e,n.state.failed=!n.state.loaded;for(var t=this.get_node(n,!0),i=0,r=0,s=this._model.data,a=!1,i=0,r=n.children.length;i<r;i++)if(s[n.children[i]]&&!s[n.children[i]].state.hidden){a=!0;break}n.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),a?"#"!==n.id&&t.addClass(n.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),(n.id!==E.jstree.root?t.children(".jstree-anchor"):t).attr("aria-busy",!1),t.removeClass("jstree-loading"),this.trigger("load_node",{node:n,status:e}),d&&d.call(this,n,e)}.bind(this)),!0},_load_nodes:function(e,t,i,r){for(var s=!0,a=function(){this._load_nodes(e,t,!0)},n=this._model.data,d,o,c=[],d=0,o=e.length;d<o;d++)n[e[d]]&&(!n[e[d]].state.loaded&&!n[e[d]].state.failed||!i&&r)&&(this.is_loading(e[d])||this.load_node(e[d],a),s=!1);if(s){for(d=0,o=e.length;d<o;d++)n[e[d]]&&n[e[d]].state.loaded&&c.push(e[d]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(e,t){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var i=[],r=this._model.data,s=r[e.id].children_d,a,n;for(e.state&&!e.state.loaded&&i.push(e.id),a=0,n=s.length;a<n;a++)r[s[a]]&&r[s[a]].state&&!r[s[a]].state.loaded&&i.push(s[a]);i.length?this._load_nodes(i,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(s,a){var e=this.settings.core.data,t,n=function e(){return 3!==this.nodeType&&8!==this.nodeType};return e?E.vakata.is_function(e)?e.call(this,s,function(e){!1===e?a.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](s,"string"==typeof e?E(E.parseHTML(e)).filter(n):e,function(e){a.call(this,e)})}.bind(this)):"object"==typeof e?e.url?(e=E.extend(!0,{},e),E.vakata.is_function(e.url)&&(e.url=e.url.call(this,s)),E.vakata.is_function(e.data)&&(e.data=e.data.call(this,s)),E.ajax(e).done(function(e,t,i){var r=i.getResponseHeader("Content-Type");return r&&-1!==r.indexOf("json")||"object"==typeof e?this._append_json_data(s,e,function(e){a.call(this,e)}):r&&-1!==r.indexOf("html")||"string"==typeof e?this._append_html_data(s,E(E.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))}.bind(this)).fail(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:e})},a.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)}.bind(this))):(t=E.vakata.is_array(e)?E.extend(!0,[],e):E.isPlainObject(e)?E.extend(!0,{},e):e,s.id===E.jstree.root?this._append_json_data(s,t,function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))):"string"==typeof e?s.id===E.jstree.root?this._append_html_data(s,E(E.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1)):a.call(this,!1):s.id===E.jstree.root?this._append_html_data(s,this._data.core.original_container_html.clone(!0),function(e){a.call(this,e)}):a.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&-1===E.inArray(e.id,this._model.changed)&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var t=t.is("ul")?t.children():t,r=e.id,s=[],a=[],n=this._model.data,d=n[r],e=this._data.core.selected.length,o,c,l;for(t.each(function(e,t){(o=this._parse_model_from_html(E(t),r,d.parents.concat()))&&(s.push(o),a.push(o),n[o].children_d.length&&(a=a.concat(n[o].children_d)))}.bind(this)),d.children=s,d.children_d=a,c=0,l=d.parents.length;c<l;c++)n[d.parents[c]].children_d=n[d.parents[c]].children_d.concat(a);this.trigger("model",{nodes:a,parent:r}),r!==E.jstree.root?(this._node_changed(r),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==e&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,o,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),E.vakata.is_array(t)||(t=[t]);var r=null,s={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},v=this,a=function(e,c){var t=(e=e.data?e.data:e).dat,i=e.par,r=[],s=[],l=[],h=e.df,_=e.t_id,g=e.t_cnt,u=e.m,a=u[i],e=e.sel,n,d,o,f,p=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s,a,n,d,o={id:r,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(o.state[s]=h[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(o.icon=e.data.jstree.icon),o.icon!==c&&null!==o.icon&&""!==o.icon||(o.icon=!0),e&&e.data&&(o.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(o.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(o.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(o.li_attr[s]=e.li_attr[s]);if(o.li_attr.id||(o.li_attr.id=r),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(o.a_attr[s]=e.a_attr[s]);for(e&&e.children&&!0===e.children&&(o.state.loaded=!1,o.children=[],o.children_d=[]),s=0,a=(u[o.id]=o).children.length;s<a;s++)n=p(u[o.children[s]],o.id,i),d=u[n],o.children_d.push(n),d.children_d.length&&(o.children_d=o.children_d.concat(d.children_d));return delete e.data,delete e.children,u[o.id].original=e,o.state.selected&&l.push(o.id),o.id},m=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,d,o;do{r="j"+_+"_"+ ++g}while(u[r]);for(s in o={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},h)h.hasOwnProperty(s)&&(o.state[s]=h[s]);if(e&&(e.id||0===e.id)&&(o.id=e.id.toString()),e&&e.text&&(o.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(o.icon=e.data.jstree.icon),o.icon!==c&&null!==o.icon&&""!==o.icon||(o.icon=!0),e&&e.data&&(o.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(o.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(o.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(o.li_attr[s]=e.li_attr[s]);if(o.li_attr.id&&!o.id&&0!==o.id&&(o.id=o.li_attr.id.toString()),o.id||0===o.id||(o.id=r),o.li_attr.id||(o.li_attr.id=o.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(o.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=m(e.children[s],o.id,i),d=u[n],o.children.push(n),d.children_d.length&&(o.children_d=o.children_d.concat(d.children_d));o.children_d=o.children_d.concat(o.children)}return e&&e.children&&!0===e.children&&(o.state.loaded=!1,o.children=[],o.children_d=[]),delete e.data,delete e.children,o.original=e,(u[o.id]=o).state.selected&&l.push(o.id),o.id};if(t.length&&t[0].id!==c&&t[0].parent!==c){for(d=0,o=t.length;d<o;d++)t[d].children||(t[d].children=[]),t[d].state||(t[d].state={}),u[t[d].id.toString()]=t[d];for(d=0,o=t.length;d<o;d++)u[t[d].parent.toString()]?(u[t[d].parent.toString()].children.push(t[d].id.toString()),a.children_d.push(t[d].id.toString())):void 0!==v&&(v._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:t[d].id.toString(),parent:t[d].parent.toString()})},v.settings.core.error.call(v,v._data.core.last_error));for(d=0,o=a.children.length;d<o;d++)n=p(u[a.children[d]],i,a.parents.concat()),s.push(n),u[n].children_d.length&&(s=s.concat(u[n].children_d));for(d=0,o=a.parents.length;d<o;d++)u[a.parents[d]].children_d=u[a.parents[d]].children_d.concat(s);f={cnt:g,mod:u,sel:e,par:i,dpc:s,add:l}}else{for(d=0,o=t.length;d<o;d++)(n=m(t[d],i,a.parents.concat()))&&(r.push(n),s.push(n),u[n].children_d.length&&(s=s.concat(u[n].children_d)));for(a.children=r,a.children_d=s,d=0,o=a.parents.length;d<o;d++)u[a.parents[d]].children_d=u[a.parents[d]].children_d.concat(s);f={cnt:g,mod:u,sel:e,par:i,dpc:s,add:l}}if("undefined"!=typeof window&&void 0!==window.document)return f;postMessage(f)},n=function(e,t){if(null!==this.element){var i,r;for(i in this._cnt=e.cnt,r=this._model.data)r.hasOwnProperty(i)&&r[i].state&&r[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var s,a=e.add,n=e.sel,d=this._data.core.selected.slice(),r=this._model.data;if(n.length!==d.length||E.vakata.array_unique(n.concat(d)).length!==n.length){for(i=0,s=n.length;i<s;i++)-1===E.inArray(n[i],a)&&-1===E.inArray(n[i],d)&&(r[n[i]].state.selected=!1);for(i=0,s=d.length;i<s;i++)-1===E.inArray(d[i],n)&&(r[d[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==E.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!t&&c?c(function(){o.call(v,!0)}):o.call(v,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(r=new window.Worker(this._wrk)).onmessage=function(e){n.call(this,e.data,!0);try{r.terminate(),r=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),r.onerror=function(e){n.call(this,a(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),s.par?r.postMessage(s):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,o,!0])}catch(e){n.call(this,a(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else n.call(this,a(s),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var r,s,a=this._model.data,n={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},d,t,o;for(d in this._model.default_state)this._model.default_state.hasOwnProperty(d)&&(n.state[d]=this._model.default_state[d]);if(t=E.vakata.attributes(e,!0),E.each(t,function(e,t){return!(t=E.vakata.trim(t)).length||(n.li_attr[e]=t,void("id"===e&&(n.id=t.toString())))}),(t=e.children("a").first()).length&&(t=E.vakata.attributes(t,!0),E.each(t,function(e,t){(t=E.vakata.trim(t)).length&&(n.a_attr[e]=t)})),(t=(e.children("a").first().length?e.children("a").first():e).clone()).children("ins, i, ul").remove(),t=t.html(),t=E("<div></div>").html(t),n.text=this.settings.core.force_text?t.text():t.html(),t=e.data(),n.data=t?E.extend(!0,{},t):null,n.state.opened=e.hasClass("jstree-open"),n.state.selected=e.children("a").hasClass("jstree-clicked"),n.state.disabled=e.children("a").hasClass("jstree-disabled"),n.data&&n.data.jstree)for(d in n.data.jstree)n.data.jstree.hasOwnProperty(d)&&(n.state[d]=n.data.jstree[d]);(t=e.children("a").children(".jstree-themeicon")).length&&(n.icon=!t.hasClass("jstree-themeicon-hidden")&&t.attr("rel")),n.state.icon!==P&&(n.icon=n.state.icon),n.icon!==P&&null!==n.icon&&""!==n.icon||(n.icon=!0),t=e.children("ul").children("li");do{o="j"+this._id+"_"+ ++this._cnt}while(a[o]);return n.id=n.li_attr.id?n.li_attr.id.toString():o,t.length?(t.each(function(e,t){r=this._parse_model_from_html(E(t),n.id,i),s=this._model.data[r],n.children.push(r),s.children_d.length&&(n.children_d=n.children_d.concat(s.children_d))}.bind(this)),n.children_d=n.children_d.concat(n.children)):e.hasClass("jstree-closed")&&(n.state.loaded=!1),n.li_attr.class&&(n.li_attr.class=n.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),n.a_attr.class&&(n.a_attr.class=n.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),(a[n.id]=n).state.selected&&this._data.core.selected.push(n.id),n.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s=this._model.data,a=this._model.default_state,n,d,o,c,l={id:r,text:e.text||"",icon:e.icon===P||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in a)a.hasOwnProperty(n)&&(l.state[n]=a[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==P&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=r),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),n=0,d=(s[l.id]=l).children.length;n<d;n++)c=s[o=this._parse_model_from_flat_json(s[l.children[n]],l.id,i)],l.children_d.push(o),c.children_d.length&&(l.children_d=l.children_d.concat(c.children_d));return delete e.data,delete e.children,s[l.id].original=e,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,d,o=this._model.data,c=this._model.default_state,l;do{r="j"+this._id+"_"+ ++this._cnt}while(o[r]);for(s in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===P||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},c)c.hasOwnProperty(s)&&(l.state[s]=c[s]);if(e&&(e.id||0===e.id)&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==P&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id&&!l.id&&0!==l.id&&(l.id=l.li_attr.id.toString()),l.id||0===l.id||(l.id=r),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)d=o[n=this._parse_model_from_json(e.children[s],l.id,i)],l.children.push(n),d.children_d.length&&(l.children_d=l.children_d.concat(d.children_d));l.children_d=l.children.concat(l.children_d)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,(o[l.id]=l).state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){for(var e=(this._model.force_full_redraw?this._model.data[E.jstree.root].children:this._model.changed).concat([]),t=b.createElement("UL"),i,r,s,a=this._data.core.focused,r=0,s=e.length;r<s;r++)(i=this.redraw_node(e[r],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&t.appendChild(i);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","presentation"),this.element.empty().append(t)),null!==a&&this.settings.core.restore_focus&&((i=this.get_node(a,!0))&&i.length&&i.children(".jstree-anchor")[0]!==b.activeElement?i.children(".jstree-anchor").trigger("focus"):this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:e})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,r=!1,s=!1,a=b;if(!t)return!1;if(t.id===E.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for((s=a.createElement("UL")).setAttribute("role","group"),s.className="jstree-children",i=0,r=t.children.length;i<r;i++)s.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(s)}},redraw_node:function(e,t,i,r){var s=this.get_node(e),a=!1,n=!1,d=!1,o=!1,c=!1,l=!1,h="",_=b,g=this._model.data,u=!1,f=!1,p=null,m=0,v=0,j=!1,k=!1;if(!s)return!1;if(s.id===E.jstree.root)return this.redraw(!0);if(t=t||0===s.children.length,e=b.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(E.jstree.idregex,"\\$&"):s.id.replace(E.jstree.idregex,"\\$&"))):b.getElementById(s.id))e=E(e),i||((a=e.parent().parent()[0])===this.element[0]&&(a=null),n=e.index()),(t=!t&&s.children.length&&!e.children(".jstree-children").length?!0:t)||(d=e.children(".jstree-children")[0]),u=e.children(".jstree-anchor")[0]===b.activeElement,e.remove();else if(t=!0,!i){if(!(null===(a=s.parent!==E.jstree.root?E("#"+s.parent.replace(E.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&g[s.parent].state.opened))return!1;n=E.inArray(s.id,(null===a?g[E.jstree.root]:g[s.parent]).children)}for(o in e=this._data.core.node.cloneNode(!0),h="jstree-node ",s.li_attr)s.li_attr.hasOwnProperty(o)&&"id"!==o&&("class"!==o?e.setAttribute(o,s.li_attr[o]):h+=s.li_attr[o]);for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),e.childNodes[1].setAttribute("aria-selected",!!s.state.selected),e.childNodes[1].setAttribute("aria-level",s.parents.length),this.settings.core.compute_elements_positions&&(e.childNodes[1].setAttribute("aria-setsize",g[s.parent].children.length),e.childNodes[1].setAttribute("aria-posinset",g[s.parent].children.indexOf(s.id)+1)),s.state.disabled&&e.childNodes[1].setAttribute("aria-disabled",!0),o=0,c=s.children.length;o<c;o++)if(!g[s.children[o]].state.hidden){j=!0;break}if(null!==s.parent&&g[s.parent]&&!s.state.hidden&&(o=E.inArray(s.id,g[s.parent].children),k=s.id,-1!==o))for(o++,c=g[s.parent].children.length;o<c;o++)if((k=!g[g[s.parent].children[o]].state.hidden?g[s.parent].children[o]:k)!==s.id)break;for(c in s.state.hidden&&(h+=" jstree-hidden"),s.state.loading&&(h+=" jstree-loading"),s.state.loaded&&!j?h+=" jstree-leaf":(h+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",e.childNodes[1].setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),k===s.id&&(h+=" jstree-last"),e.id=s.id,e.className=h,h=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":""),s.a_attr)s.a_attr.hasOwnProperty(c)&&("href"===c&&"#"===s.a_attr[c]||("class"!==c?e.childNodes[1].setAttribute(c,s.a_attr[c]):h+=" "+s.a_attr[c]));if(h.length&&(e.childNodes[1].className="jstree-anchor "+h),(s.icon&&!0!==s.icon||!1===s.icon)&&(!1===s.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(_.createTextNode(s.text)):e.childNodes[1].innerHTML+=s.text,t&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for((l=_.createElement("UL")).setAttribute("role","group"),l.className="jstree-children",o=0,c=s.children.length;o<c;o++)l.appendChild(this.redraw_node(s.children[o],t,!0));e.appendChild(l)}if(d&&e.appendChild(d),!i){for(o=0,c=(a=a||this.element[0]).childNodes.length;o<c;o++)if(a.childNodes[o]&&a.childNodes[o].className&&-1!==a.childNodes[o].className.indexOf("jstree-children")){p=a.childNodes[o];break}p||((p=_.createElement("UL")).setAttribute("role","group"),p.className="jstree-children",a.appendChild(p)),n<(a=p).childNodes.length?a.insertBefore(e,a.childNodes[n]):a.appendChild(e),u&&(m=this.element[0].scrollTop,v=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=m,this.element[0].scrollLeft=v)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(function(){this.open_node(s.id,!1,0)}.bind(this),0)),e},open_node:function(e,i,r){var t,s,a,n;if(E.vakata.is_array(e)){for(t=0,s=(e=e.slice()).length;t<s;t++)this.open_node(e[t],i,r);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(r=r===P?this.settings.core.animation:r,this.is_closed(e)?this.is_loaded(e)?(a=this.get_node(e,!0),n=this,a.length&&(r&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(e),r?(this.trigger("before_open",{node:e}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children(".jstree-anchor").attr("aria-expanded",!0).end().children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",n.element&&n.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].childNodes[1].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),a.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),r&&a.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(function(){this.open_node(e,i,r)}.bind(this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,r):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;for(var t,i,r=e.parents,t=0,i=r.length;t<i;t+=1)t!==E.jstree.root&&this.open_node(r[t],!1,0);return E("#"+e.id.replace(E.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,r,s,a;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(!this.is_closed(e)&&(t=t===P?this.settings.core.animation:t,a=(s=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(a.length?t?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children(".jstree-anchor").attr("aria-expanded",!1).end().children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",a.children(".jstree-children").remove(),s.element&&s.trigger("after_close",{node:e})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.children(".jstree-anchor").attr("aria-expanded",!1),a.children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e}))))},toggle_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,r){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var t=e.id===E.jstree.root?this.get_container_ul():this.get_node(e,!0),s,a,n;if(!t.length){for(s=0,a=e.children_d.length;s<a;s++)this.is_closed(this._model.data[e.children_d[s]])&&(this._model.data[e.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:e})}r=r||t,(t=(n=this).is_closed(e)?t.find(".jstree-closed").addBack():t.find(".jstree-closed")).each(function(){n.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,r)},i||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(e,t){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var i=e.id===E.jstree.root?this.get_container_ul():this.get_node(e,!0),r=this,s,a;for(i.length&&(i=this.is_open(e)?i.find(".jstree-open").addBack():i.find(".jstree-open"),E(i.get().reverse()).each(function(){r.close_node(this,t||0)})),s=0,a=e.children_d.length;s<a;s++)this._model.data[e.children_d[s]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==E.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==E.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==P?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){for(var i=this.get_node(e).id,r=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,a=!1,n,d,n=0,d=s.length;n<d;n+=1)s[n]===i&&(a=!a),s[n]===r&&(a=!a),this.is_disabled(s[n])||!a&&s[n]!==i&&s[n]!==r?t.ctrlKey||this.deselect_node(s[n],!0,t):this.is_hidden(s[n])||this.select_node(s[n],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):(t.ctrlKey&&(this._data.core.last_clicked=this.get_node(e)),this.select_node(e,!1,!1,t));else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.is_selected(e)&&1===this._data.core.selected.length||(this.deselect_all(!0),this.select_node(e,!1,!1,t)),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,r){var s,a,n,d;if(E.vakata.is_array(e)){for(a=0,n=(e=e.slice()).length;a<n;a++)this.select_node(e[a],t,i,r);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;s=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),(s=!i?this._open_to(e):s)&&s.length&&s.children(".jstree-anchor").addClass("jstree-clicked").attr("aria-selected",!0),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:r}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:r}))},deselect_node:function(e,t,i){var r,s,a;if(E.vakata.is_array(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.deselect_node(e[r],t,i);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;a=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=E.vakata.array_remove_item(this._data.core.selected,e.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t=this._data.core.selected.concat([]),i,r;for(this._data.core.selected=this._model.data[E.jstree.root].children_d.concat(),i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})},deselect_all:function(e){for(var t=this._data.core.selected.concat([]),i,r,i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.state.selected},get_selected:function(e){return e?E.map(this._data.core.selected,function(e){return this.get_node(e)}.bind(this)):this._data.core.selected.slice()},get_top_selected:function(e){for(var t=this.get_selected(!0),i={},r,s,a,n,r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?E.map(t,function(e){return this.get_node(e)}.bind(this)):t},get_bottom_selected:function(e){for(var t=this.get_selected(!0),i=[],r,s,r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?E.map(i,function(e){return this.get_node(e)}.bind(this)):i},get_state:function(){var e={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},t;for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==E.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&e.core.loaded.push(t),this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(t,i){if(t){if(t.core&&t.core.selected&&t.core.initial_selection===P&&(t.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),t.core){var e,r,s,a,n;if(t.core.loaded)return this.settings.core.loaded_state&&E.vakata.is_array(t.core.loaded)&&t.core.loaded.length?this._load_nodes(t.core.loaded,function(e){delete t.core.loaded,this.set_state(t,i)}):(delete t.core.loaded,this.set_state(t,i)),!1;if(t.core.open)return E.vakata.is_array(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==P&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==P&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return a=this,t.core.initial_selection!==P&&t.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),E.each(t.core.selected,function(e,t){a.select_node(t,!1,!0)})),delete t.core.initial_selection,delete t.core.selected,this.set_state(t,i),!1;for(n in t)t.hasOwnProperty(n)&&"core"!==n&&-1===E.inArray(n,this.settings.plugins)&&delete t[n];if(E.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return E.isEmptyObject(t)?(t=null,i&&i.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&E.vakata.is_function(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[E.jstree.root]={id:E.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(E.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(E.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===E.jstree.root)return!1;var i=[],e=[],r=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,function(e){this.open_node(i,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})}.bind(this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;var i,r,s=this._model.data,a=e.id;for(t=t.toString(),s[e.parent].children[E.inArray(e.id,s[e.parent].children)]=t,i=0,r=e.parents.length;i<r;i++)s[e.parents[i]].children_d[E.inArray(e.id,s[e.parents[i]].children_d)]=t;for(i=0,r=e.children.length;i<r;i++)s[e.children[i]].parent=t;for(i=0,r=e.children_d.length;i<r;i++)s[e.children_d[i]].parents[E.inArray(e.id,s[e.children_d[i]].parents)]=t;return-1!==(i=E.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete s[e.id],e.id=t,s[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,new:e.id,old:a}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.text},set_text:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),!0)},get_json:function(e,t,i){if(!(e=this.get_node(e||E.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:E.extend(!0,{},e.li_attr),a_attr:E.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&E.extend(!0,E.vakata.is_array(e.data)?[]:{},e.data)},s,a;if(t&&t.flat?r.parent=e.parent:r.children=[],t&&t.no_state)delete r.state;else for(s in e.state)e.state.hasOwnProperty(s)&&(r.state[s]=e.state[s]);if(t&&t.no_li_attr&&delete r.li_attr,t&&t.no_a_attr&&delete r.a_attr,t&&t.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),t&&t.flat&&e.id!==E.jstree.root&&i.push(r),!t||!t.no_children)for(s=0,a=e.children.length;s<a;s++)t&&t.flat?this.get_json(e.children[s],t,i):r.children.push(this.get_json(e.children[s],t));return t&&t.flat?i:e.id===E.jstree.root?r.children:r},create_node:function(e,t,i,r,s){if(null===e&&(e=E.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===P?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,r,!0)});var a,n,d,o;switch((t="string"==typeof(t=t||{text:this.get_string("New node")})?{text:t}:E.extend(!0,{},t)).text===P&&(t.text=this.get_string("New node")),i=e.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":a=this.get_node(e.parent),i=E.inArray(e.id,a.children),e=a;break;case"after":a=this.get_node(e.parent),i=E.inArray(e.id,a.children)+1,e=a;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i=i||0}if(i>e.children.length&&(i=e.children.length),t.id===P&&(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(a=this.get_node(t),(n=[]).push(t),n=n.concat(a.children_d),this.trigger("model",{nodes:n,parent:e.id}),e.children_d=e.children_d.concat(n),d=0,o=e.parents.length;d<o;d++)this._model.data[e.parents[d]].children_d=this._model.data[e.parents[d]].children_d.concat(n);for(t=a,a=[],d=0,o=e.children.length;d<o;d++)a[i<=d?d+1:d]=e.children[d];return a[i]=t.id,e.children=a,this.redraw_node(e,!0),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),r&&r.call(this,this.get_node(t)),t.id},rename_node:function(e,t){var i,r,s;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(s=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var t,i,r,s,a,n,d,o,c,l,h,s;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;if(r=this.get_node(e.parent),s=E.inArray(e.id,r.children),l=!1,!this.check("delete_node",e,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=E.vakata.array_remove(r.children,s)),(a=e.children_d.concat([])).push(e.id),n=0,d=e.parents.length;n<d;n++)this._model.data[e.parents[n]].children_d=E.vakata.array_filter(this._model.data[e.parents[n]].children_d,function(e){return-1===E.inArray(e,a)});for(o=0,c=a.length;o<c;o++)if(this._model.data[a[o]].state.selected){l=!0;break}for(l&&(this._data.core.selected=E.vakata.array_filter(this._data.core.selected,function(e){return-1===E.inArray(e,a)})),this.trigger("delete_node",{node:e,parent:r.id}),l&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:r.id}),o=0,c=a.length;o<c;o++)delete this._model.data[a[o]];return-1!==E.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,h=this.element[0].scrollTop,s=this.element[0].scrollLeft,r.id===E.jstree.root?this._model.data[E.jstree.root].children[0]&&this.get_node(this._model.data[E.jstree.root].children[0],!0).children(".jstree-anchor").trigger("focus"):this.get_node(r,!0).children(".jstree-anchor").trigger("focus"),this.element[0].scrollTop=h,this.element[0].scrollLeft=s),this.redraw_node(r,!0),!0},check:function(e,t,i,r,s){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var a=e.match(/^(move_node|copy_node|create_node)$/i)?i:t,n=this.settings.core.check_callback;if("move_node"===e||"copy_node"===e){if(!(s&&s.is_multi||"move_node"!==e||E.inArray(t.id,i.children)!==r))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_08",reason:"Moving node to its current position",data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(!(s&&s.is_multi||t.id!==i.id&&("move_node"!==e||E.inArray(t.id,i.children)!==r)&&-1===E.inArray(i.id,t.children_d)))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})}return(a=a&&a.data?a.data:a)&&a.functions&&(!1===a.functions[e]||!0===a.functions[e])?(!1===a.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),a.functions[e]):!(!1===n||E.vakata.is_function(n)&&!1===n.call(this,e,t,i,r,s)||n&&!1===n[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,r,s,a,n){var d,o,c,l,h,_,g,u,f,p,m,v,j,k;if(t=this.get_node(t),i=i===P?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,r,!0,!1,n)});if(E.vakata.is_array(e)){if(1!==e.length){for(d=0,o=e.length;d<o;d++)(f=this.move_node(e[d],t,i,r,s,!1,n))&&(t=f,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==P?e:this.get_node(e))||e.id===E.jstree.root)return!1;if(c=(e.parent||E.jstree.root).toString(),h=i.toString().match(/^(before|after)$/)&&t.id!==E.jstree.root?this.get_node(t.parent):t,g=!(_=n||(this._model.data[e.id]?this:E.jstree.reference(e.id)))||!_._id||this._id!==_._id,l=_&&_._id&&c&&_._model.data[c]&&_._model.data[c].children?E.inArray(e.id,_._model.data[c].children):-1,_&&_._id&&(e=_._model.data[e.id]),g)return!!(f=this.copy_node(e,t,i,r,s,!1,n))&&(_&&_.delete_node(e),f);switch(i=t.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=E.inArray(t.id,h.children);break;case"after":i=E.inArray(t.id,h.children)+1;break;case"inside":case"first":i=0;break;case"last":i=h.children.length;break;default:i=i||0}if(i>h.children.length&&(i=h.children.length),!this.check("move_node",e,h,i,{core:!0,origin:n,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===h.id){for(u=h.children.concat(),-1!==(f=E.inArray(e.id,u))&&(u=E.vakata.array_remove(u,f),f<i&&i--),f=[],p=0,m=u.length;p<m;p++)f[i<=p?p+1:p]=u[p];f[i]=e.id,h.children=f,this._node_changed(h.id),this.redraw(h.id===E.jstree.root)}else{for((f=e.children_d.concat()).push(e.id),p=0,m=e.parents.length;p<m;p++){for(u=[],v=0,j=(k=_._model.data[e.parents[p]].children_d).length;v<j;v++)-1===E.inArray(k[v],f)&&u.push(k[v]);_._model.data[e.parents[p]].children_d=u}for(_._model.data[c].children=E.vakata.array_remove_item(_._model.data[c].children,e.id),p=0,m=h.parents.length;p<m;p++)this._model.data[h.parents[p]].children_d=this._model.data[h.parents[p]].children_d.concat(f);for(u=[],p=0,m=h.children.length;p<m;p++)u[i<=p?p+1:p]=h.children[p];for(u[i]=e.id,h.children=u,h.children_d.push(e.id),h.children_d=h.children_d.concat(e.children_d),e.parent=h.id,(f=h.parents.concat()).unshift(h.id),k=e.parents.length,f=(e.parents=f).concat(),p=0,m=e.children_d.length;p<m;p++)this._model.data[e.children_d[p]].parents=this._model.data[e.children_d[p]].parents.slice(0,-1*k),Array.prototype.push.apply(this._model.data[e.children_d[p]].parents,f);c!==E.jstree.root&&h.id!==E.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(h.id)),a||this.redraw()}return r&&r.call(this,e,h,i),this.trigger("move_node",{node:e,parent:h.id,position:i,old_parent:c,old_position:l,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),e.id},copy_node:function(e,t,i,r,s,a,n){var d,o,c,l,h,_,g,u,f,p,m;if(t=this.get_node(t),i=i===P?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,r,!0,!1,n)});if(E.vakata.is_array(e)){if(1!==e.length){for(d=0,o=e.length;d<o;d++)(l=this.copy_node(e[d],t,i,r,s,!0,n))&&(t=l,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==P?e:this.get_node(e))||e.id===E.jstree.root)return!1;switch(u=(e.parent||E.jstree.root).toString(),f=i.toString().match(/^(before|after)$/)&&t.id!==E.jstree.root?this.get_node(t.parent):t,m=!(p=n||(this._model.data[e.id]?this:E.jstree.reference(e.id)))||!p._id||this._id!==p._id,p&&p._id&&(e=p._model.data[e.id]),i=t.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=E.inArray(t.id,f.children);break;case"after":i=E.inArray(t.id,f.children)+1;break;case"inside":case"first":i=0;break;case"last":i=f.children.length;break;default:i=i||0}if(i>f.children.length&&(i=f.children.length),!this.check("copy_node",e,f,i,{core:!0,origin:n,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(g=p?p.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===g.id&&delete g.id,!(g=this._parse_model_from_json(g,f.id,f.parents.concat())))return!1;for(l=this.get_node(g),e&&e.state&&!1===e.state.loaded&&(l.state.loaded=!1),(c=[]).push(g),c=c.concat(l.children_d),this.trigger("model",{nodes:c,parent:f.id}),h=0,_=f.parents.length;h<_;h++)this._model.data[f.parents[h]].children_d=this._model.data[f.parents[h]].children_d.concat(c);for(c=[],h=0,_=f.children.length;h<_;h++)c[i<=h?h+1:h]=f.children[h];return c[i]=l.id,f.children=c,f.children_d.push(l.id),f.children_d=f.children_d.concat(l.children_d),f.id===E.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(f.id),a||this.redraw(f.id===E.jstree.root),r&&r.call(this,l,f,i),this.trigger("copy_node",{node:l,original:e,parent:f.id,position:i,old_parent:u,old_position:p&&p._id&&u&&p._model.data[u]&&p._model.data[u].children?E.inArray(e.id,p._model.data[u].children):-1,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),l.id},cut:function(e){if(e=e||this._data.core.selected.concat(),!(e=!E.vakata.is_array(e)?[e]:e).length)return!1;for(var t=[],i,r,s,r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&(i.id||0===i.id)&&i.id!==E.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="move_node",(d=this).trigger("cut",{node:e})},copy:function(e){if(e=e||this._data.core.selected.concat(),!(e=!E.vakata.is_array(e)?[e]:e).length)return!1;for(var t=[],i,r,s,r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&i.id!==P&&i.id!==E.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="copy_node",(d=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:n,node:a,inst:d}},can_paste:function(){return!1!==n&&!1!==a},paste:function(e,t){if(!((e=this.get_node(e))&&n&&n.match(/^(copy_node|move_node)$/)&&a))return!1;this[n](a,e,t,!1,!1,!1,d)&&this.trigger("paste",{parent:e.id,node:a,mode:n}),d=n=a=!1},clear_buffer:function(){d=n=a=!1,this.trigger("clear_buffer")},edit:function(r,e,s){var t,i,a,n,d,o,c,t,l,h=!1;return!!(r=this.get_node(r))&&(this.check("edit",r,this.get_parent(r))?(l=r,e="string"==typeof e?e:r.text,this.set_text(r,""),r=this._open_to(r),l.text=e,t=this._data.core.rtl,i=this.element.width(),this._data.core.focused=l.id,a=r.children(".jstree-anchor").trigger("focus"),n=E("<span></span>"),d=e,o=E("<div></div>",{css:{position:"absolute",top:"-200px",left:t?"0px":"-1000px",visibility:"hidden"}}).appendTo(b.body),c=E("<input />",{value:d,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:function(e){e.stopImmediatePropagation(),e.preventDefault();var t,i=n.children(".jstree-rename-input").val(),e=this.settings.core.force_text,e;""===i&&(i=d),o.remove(),n.replaceWith(a),n.remove(),d=e?d:E("<div></div>").append(E.parseHTML(d)).html(),r=this.get_node(r),this.set_text(r,d),(e=!!this.rename_node(r,e?E("<div></div>").text(i).text():E("<div></div>").append(E.parseHTML(i)).html()))||this.set_text(r,d),this._data.core.focused=l.id,setTimeout(function(){var e=this.get_node(l.id,!0);e.length&&(this._data.core.focused=l.id,e.children(".jstree-anchor").trigger("focus"))}.bind(this),0),s&&s.call(this,l,e,h,i),c=null}.bind(this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=d),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){c.width(Math.min(o.text("pW"+this.value).width(),i))},keypress:function(e){if(13===e.which)return!1}}),t={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},n.attr("class",a.attr("class")).append(a.contents().clone()).append(c),a.replaceWith(n),o.css(t),c.css(t).width(Math.min(o.text("pW"+c[0].value).width(),i))[0].select(),void E(b).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){c&&e.target!==c&&E(c).trigger("blur")})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(e,t){if(!e)return!1;var i,i;(t=!0===t?(i=(i=this.settings.core.themes.dir)||E.jstree.path+"/themes")+"/"+e+"/style.css":t)&&-1===E.inArray(t,r)&&(E("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),r.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,r,s,a;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(a=e.icon,e.icon=!0===t||null===t||t===P||""===t||t,s=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?(s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),this.hide_icon(e)):(!0===t||null===t||t===P||""===t?s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"):-1===t.indexOf("/")&&-1===t.indexOf(".")?(s.removeClass(a).css("background",""),s.addClass(t+" jstree-themeicon-custom").attr("rel",t)):(s.removeClass(a).css("background",""),s.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)),!1===a&&this.show_icon(e)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===E.jstree.root)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===E.jstree.root)&&(r=this.get_node(e,!0),e.icon=!r.length||r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},E.vakata={},E.vakata.attributes=function(e,i){e=E(e)[0];var r=i?{}:[];return e&&e.attributes&&E.each(e.attributes,function(e,t){-1===E.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==E.vakata.trim(t.value)&&(i?r[t.name]=t.value:r.push(t.name))}),r},E.vakata.array_unique=function(e){for(var t=[],i,r,s,a={},i=0,s=e.length;i<s;i++)a[e[i]]===P&&(t.push(e[i]),a[e[i]]=!0);return t},E.vakata.array_remove=function(e,t){return e.splice(t,1),e},E.vakata.array_remove_item=function(e,t){var t=E.inArray(t,e);return-1!==t?E.vakata.array_remove(e,t):e},E.vakata.array_filter=function(e,t,i,r,s){if(e.filter)return e.filter(t,i);for(s in r=[],e)~~s+""==s+""&&0<=s&&t.call(i,e[s],+s,e)&&r.push(e[s]);return r},E.vakata.trim=function(e){return String.prototype.trim?String.prototype.trim.call(e.toString()):e.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},E.vakata.is_function=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},E.vakata.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Function.prototype.bind||(Function.prototype.bind=function(){var t=this,i=arguments[0],r=Array.prototype.slice.call(arguments,1);if("function"!=typeof t)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){var e=r.concat(Array.prototype.slice.call(arguments));return t.apply(i,e)}}),E.jstree.plugins.changed=function(e,a){var n=[];this.trigger=function(e,t){var i,r;if(t=t||{},"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};for(var s={},i=0,r=n.length;i<r;i++)s[n[i]]=1;for(i=0,r=t.selected.length;i<r;i++)s[t.selected[i]]?s[t.selected[i]]=2:t.changed.selected.push(t.selected[i]);for(i=0,r=n.length;i<r;i++)1===s[n[i]]&&t.changed.deselected.push(n[i]);n=t.selected.slice()}a.trigger.call(this,e,t)},this.refresh=function(e,t){return n=[],a.refresh.apply(this,arguments)}};var l=b.createElement("I"),h,_,g,o,u,f,p,w;l.className="jstree-icon jstree-checkbox",l.setAttribute("role","presentation"),E.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},E.jstree.plugins.checkbox=function(e,o){this.bind=function(){o.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}.bind(this)).on("loading.jstree",function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)}.bind(this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",function(e,t){for(var i=this._model.data,r=i[t.parent],s=t.nodes,a,n,a=0,n=s.length;a<n;a++)i[s[a]].state.checked=i[s[a]].state.checked||i[s[a]].original&&i[s[a]].original.state&&i[s[a]].original.state.checked,i[s[a]].state.checked&&this._data.checkbox.selected.push(s[a])}.bind(this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",function(e,t){var i=this._model.data,r=i[t.parent],s=t.nodes,a=[],n,d,o,c,l,h,t=this.settings.checkbox.cascade,_=this.settings.checkbox.tie_selection;if(-1!==t.indexOf("down"))if(r.state[_?"selected":"checked"]){for(d=0,o=s.length;d<o;d++)i[s[d]].state[_?"selected":"checked"]=!0;this._data[_?"core":"checkbox"].selected=this._data[_?"core":"checkbox"].selected.concat(s)}else for(d=0,o=s.length;d<o;d++)if(i[s[d]].state[_?"selected":"checked"]){for(c=0,l=i[s[d]].children_d.length;c<l;c++)i[i[s[d]].children_d[c]].state[_?"selected":"checked"]=!0;this._data[_?"core":"checkbox"].selected=this._data[_?"core":"checkbox"].selected.concat(i[s[d]].children_d)}if(-1!==t.indexOf("up")){for(d=0,o=r.children_d.length;d<o;d++)i[r.children_d[d]].children.length||a.push(i[r.children_d[d]].parent);for(c=0,l=(a=E.vakata.array_unique(a)).length;c<l;c++){r=i[a[c]];while(r&&r.id!==E.jstree.root){for(d=n=0,o=r.children.length;d<o;d++)n+=i[r.children[d]].state[_?"selected":"checked"];if(n!==o)break;r.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(r.id),(h=this.get_node(r,!0))&&h.length&&h.children(".jstree-anchor").attr("aria-selected",!0).addClass(_?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}}}this._data[_?"core":"checkbox"].selected=E.vakata.array_unique(this._data[_?"core":"checkbox"].selected)}.bind(this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",function(e,t){var i=this,r=t.node,s=this._model.data,a=this.get_node(r.parent),n,d,o,c,t=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection,h={},_=this._data[l?"core":"checkbox"].selected;for(n=0,d=_.length;n<d;n++)h[_[n]]=!0;if(-1!==t.indexOf("down"))for(var g=this._cascade_new_checked_state(r.id,!0),u=r.children_d.concat(r.id),n=0,d=u.length;n<d;n++)-1<g.indexOf(u[n])?h[u[n]]=!0:delete h[u[n]];if(-1!==t.indexOf("up"))while(a&&a.id!==E.jstree.root){for(n=o=0,d=a.children.length;n<d;n++)o+=s[a.children[n]].state[l?"selected":"checked"];if(o!==d)break;a.state[l?"selected":"checked"]=!0,h[a.id]=!0,(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}for(n in _=[],h)h.hasOwnProperty(n)&&_.push(n);this._data[l?"core":"checkbox"].selected=_}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",function(e,t){for(var i=this.get_node(E.jstree.root),r=this._model.data,s,a,n,s=0,a=i.children_d.length;s<a;s++)(n=r[i.children_d[s]])&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",function(e,t){var i=this,r=t.node,s=this.get_node(r,!0),a,n,d,o=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection,t=this._data[c?"core":"checkbox"].selected,l={},h=[],_=r.children_d.concat(r.id),g,t;if(-1!==o.indexOf("down")&&(g=this._cascade_new_checked_state(r.id,!1),t=E.vakata.array_filter(t,function(e){return-1===_.indexOf(e)||-1<g.indexOf(e)})),-1!==o.indexOf("up")&&-1===t.indexOf(r.id)){for(a=0,n=r.parents.length;a<n;a++)(d=this._model.data[r.parents[a]]).state[c?"selected":"checked"]=!1,d&&d.original&&d.original.state&&d.original.state.undetermined&&(d.original.state.undetermined=!1),(d=this.get_node(r.parents[a],!0))&&d.length&&d.children(".jstree-anchor").attr("aria-selected",!1).removeClass(c?"jstree-clicked":"jstree-checked");t=E.vakata.array_filter(t,function(e){return-1===r.parents.indexOf(e)})}this._data[c?"core":"checkbox"].selected=t}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",function(e,t){var i=this.get_node(t.parent),r=this._model.data,s,a,n,d,o=this.settings.checkbox.tie_selection;while(i&&i.id!==E.jstree.root&&!i.state[o?"selected":"checked"]){for(s=n=0,a=i.children.length;s<a;s++)n+=r[i.children[s]].state[o?"selected":"checked"];if(!(0<a&&n===a))break;i.state[o?"selected":"checked"]=!0,this._data[o?"core":"checkbox"].selected.push(i.id),(d=this.get_node(i,!0))&&d.length&&d.children(".jstree-anchor").attr("aria-selected",!0).addClass(o?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}}.bind(this)).on("move_node.jstree",function(e,t){var i=t.is_multi,r=t.old_parent,t=this.get_node(t.parent),s=this._model.data,a,n,d,o,c,l=this.settings.checkbox.tie_selection;if(!i){a=this.get_node(r);while(a&&a.id!==E.jstree.root&&!a.state[l?"selected":"checked"]){for(d=n=0,o=a.children.length;d<o;d++)n+=s[a.children[d]].state[l?"selected":"checked"];if(!(0<o&&n===o))break;a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}}a=t;while(a&&a.id!==E.jstree.root){for(d=n=0,o=a.children.length;d<o;d++)n+=s[a.children[d]].state[l?"selected":"checked"];if(n===o)a.state[l?"selected":"checked"]||(a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"));else{if(!a.state[l?"selected":"checked"])break;a.state[l?"selected":"checked"]=!1,this._data[l?"core":"checkbox"].selected=E.vakata.array_remove_item(this._data[l?"core":"checkbox"].selected,a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!1).removeClass(l?"jstree-clicked":"jstree-checked")}a=this.get_node(a.parent)}}.bind(this))},this.get_undetermined=function(e){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];for(var i,r,s,a,n={},d=this._model.data,t=this.settings.checkbox.tie_selection,o=this._data[t?"core":"checkbox"].selected,c=[],l=this,h=[],i=0,r=o.length;i<r;i++)if(d[o[i]]&&d[o[i]].parents)for(s=0,a=d[o[i]].parents.length;s<a;s++){if(n[d[o[i]].parents[s]]!==P)break;d[o[i]].parents[s]!==E.jstree.root&&(n[d[o[i]].parents[s]]=!0,c.push(d[o[i]].parents[s]))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e=l.get_node(this),t;if(e)if(e.state.loaded){for(i=0,r=e.children_d.length;i<r;i++)if(!(t=d[e.children_d[i]]).state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(n[t.id]===P&&t.id!==E.jstree.root&&(n[t.id]=!0,c.push(t.id)),s=0,a=t.parents.length;s<a;s++)n[t.parents[s]]===P&&t.parents[s]!==E.jstree.root&&(n[t.parents[s]]=!0,c.push(t.parents[s]))}else if(e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(n[e.id]===P&&e.id!==E.jstree.root&&(n[e.id]=!0,c.push(e.id)),s=0,a=e.parents.length;s<a;s++)n[e.parents[s]]===P&&e.parents[s]!==E.jstree.root&&(n[e.parents[s]]=!0,c.push(e.parents[s]))}),i=0,r=c.length;i<r;i++)d[c[i]].state[t?"selected":"checked"]||h.push(e?d[c[i]]:c[i]);return h},this._undetermined=function(){if(null!==this.element){var e=this.get_undetermined(!1),t,i,r;for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,i=e.length;t<i;t++)(r=this.get_node(e[t],!0))&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,r){if(e=o.redraw_node.apply(this,arguments)){for(var s,a,n=null,d=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(n.className+=" jstree-checked"),d=l.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(d.className+=" jstree-checkbox-disabled"),n.insertBefore(d,n.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t=this.settings.checkbox.cascade,i,r,s=this.settings.checkbox.tie_selection,a=this._data[s?"core":"checkbox"].selected,n=this._model.data;if(!e||!0===e.state[s?"selected":"checked"]||-1===t.indexOf("undetermined")||-1===t.indexOf("down")&&-1===t.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(i=0,r=e.children_d.length;i<r;i++)if(-1!==E.inArray(e.children_d[i],a)||!n[e.children_d[i]].state.loaded&&n[e.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!E(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||E(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!E(t.target).hasClass("jstree-checkbox")?o.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this.delete_node=function(e){if(this.settings.checkbox.tie_selection||E.vakata.is_array(e))return o.delete_node.call(this,e);var t,i,r,s=!1;if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;for((t=e.children_d.concat([])).push(e.id),i=0,r=t.length;i<r;i++)if(this._model.data[t[i]].state.checked){s=!0;break}return s&&(this._data.checkbox.selected=E.vakata.array_filter(this._data.checkbox.selected,function(e){return-1===E.inArray(e,t)})),o.delete_node.call(this,e)},this._cascade_new_checked_state=function(e,t){var i=this,r=this.settings.checkbox.tie_selection,s=this._model.data[e],a=[],n=[],d,o,c;if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)c=this.get_checked_descendants(e),s.state[r?"selected":"checked"]&&c.push(s.id),a=a.concat(c);else{if(s.children)for(d=0,o=s.children.length;d<o;d++){var l=s.children[d],c=i._cascade_new_checked_state(l,t),a=a.concat(c);-1<c.indexOf(l)&&n.push(l)}var h=i.get_node(s,!0),e=0<n.length&&n.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=e),!e&&t&&n.length===s.children.length?(s.state[r?"selected":"checked"]=t,a.push(s.id),h.children(".jstree-anchor").attr("aria-selected",!0).addClass(r?"jstree-clicked":"jstree-checked")):(s.state[r?"selected":"checked"]=!1,h.children(".jstree-anchor").attr("aria-selected",!1).removeClass(r?"jstree-clicked":"jstree-checked"))}return a},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection,e=t._model.data[e];return E.vakata.array_filter(e.children_d,function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,r,s,a;if(E.vakata.is_array(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.check_node(e[r],t);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,r,s;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;s=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=E.vakata.array_remove_item(this._data.checkbox.selected,e.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e=this._data.checkbox.selected.concat([]),t,i;for(this._data.checkbox.selected=this._model.data[E.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();for(var e=this._data.checkbox.selected.concat([]),t,i,t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?E.map(this._data.checkbox.selected,function(e){return this.get_node(e)}.bind(this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);for(var t=this.get_checked(!0),i={},r,s,a,n,r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?E.map(t,function(e){return this.get_node(e)}.bind(this)):t},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);for(var t=this.get_checked(!0),i=[],r,s,r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?E.map(i,function(e){return this.get_node(e)}.bind(this)):i},this.load_node=function(e,t){var i,r,s,a,n,d;if(!E.vakata.is_array(e)&&!this.settings.checkbox.tie_selection&&(d=this.get_node(e))&&d.state.loaded)for(i=0,r=d.children_d.length;i<r;i++)this._model.data[d.children_d[i]].state.checked&&(this._data.checkbox.selected=E.vakata.array_remove_item(this._data.checkbox.selected,d.children_d[i]));return o.load_node.apply(this,arguments)},this.get_state=function(){var e=o.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i=o.set_state.apply(this,arguments),r;return i&&e.checkbox?(this.settings.checkbox.tie_selection||(this.uncheck_all(),r=this,E.each(e.checkbox,function(e,t){r.check_node(t)})),delete e.checkbox,this.set_state(e,t),!1):i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),o.refresh.apply(this,arguments)}},E.jstree.defaults.conditionalselect=function(){return!0},E.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){if(this.settings.conditionalselect.call(this,this.get_node(e),t))return i.activate_node.call(this,e,t)}},E.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,t){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var i=E.jstree.reference(e.reference),e=i.get_node(e.reference);i.create_node(e,{},"last",function(t){try{i.edit(t)}catch(e){setTimeout(function(){i.edit(t)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.edit(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.delete_node(t.get_selected()):t.delete_node(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.cut(t.get_top_selected()):t.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.copy(t.get_top_selected()):t.copy(e)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!E.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.paste(e)}}}}}}},E.jstree.plugins.contextmenu=function(e,a){this.bind=function(){a.bind.call(this);var i=0,r=null,t,s;this.element.on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-contextmenu")}.bind(this)).on("contextmenu.jstree",".jstree-anchor",function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),i=e.ctrlKey?+new Date:0,(t||r)&&(i=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))}.bind(this)).on("click.jstree",".jstree-anchor",function(e){this._data.contextmenu.visible&&(!i||250<+new Date-i)&&E.vakata.context.hide(),i=0}.bind(this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,s=e.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){E(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(10<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||10<Math.abs(s-e.originalEvent.changedTouches[0].clientY))&&(clearTimeout(r),E.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){r&&clearTimeout(r)}),E(b).on("context_hide.vakata.jstree",function(e,t){this._data.contextmenu.visible=!1,E(t.reference).removeClass("jstree-context")}.bind(this))},this.teardown=function(){this._data.contextmenu.visible&&E.vakata.context.hide(),E(b).off("context_hide.vakata.jstree"),a.teardown.call(this)},this.show_contextmenu=function(t,i,r,e){if(!(t=this.get_node(t))||t.id===E.jstree.root)return!1;var s=this.settings.contextmenu,a,n=this.get_node(t,!0).children(".jstree-anchor"),d=!1,o=!1;!s.show_at_node&&i!==P&&r!==P||(d=n.offset(),i=d.left,r=d.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),o=s.items,E.vakata.is_function(o)&&(o=o.call(this,t,function(e){this._show_contextmenu(t,i,r,e)}.bind(this))),E.isPlainObject(o)&&this._show_contextmenu(t,i,r,o)},this._show_contextmenu=function(e,t,i,r){var s,a=this.get_node(e,!0).children(".jstree-anchor");E(b).one("context_show.vakata.jstree",function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";E(t.element).addClass(i),a.addClass("jstree-context")}.bind(this)),this._data.contextmenu.visible=!0,E.vakata.context.show(a,{x:t,y:i},r),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},g={element:_=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(h=E).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){h(b).triggerHandler("context_"+e+".vakata",{reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_execute:function(e){return!(!(e=g.items[e])||e._disabled&&(!h.vakata.is_function(e._disabled)||e._disabled({item:e,reference:g.reference,element:g.element}))||!e.action)&&e.action.call(null,{item:e,reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_parse:function(e,t){if(!e)return!1;t||(g.html="",g.items=[]);var i="",r=!1,s;return t&&(i+="<ul>"),h.each(e,function(e,t){return!t||(g.items.push(t),!r&&t.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>"),r=!1,i+="<li class='"+(t._class||"")+(!0===t._disabled||h.vakata.is_function(t._disabled)&&t._disabled({item:t,reference:g.reference,element:g.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(g.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">",h.vakata.context.settings.icons&&(i+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?i+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":i+=" class='"+t.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(h.vakata.is_function(t.label)?t.label({item:e,reference:g.reference,element:g.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(s=h.vakata.context._parse(t.submenu,!0))&&(i+=s),i+="</li>",void(t.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>",r=!0)))}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(i+="</ul>"),t||(g.html=i,h.vakata.context._trigger("parse")),10<i.length&&i},_show_submenu:function(e){var t,i,r,s,a,n,d,o;(e=h(e)).length&&e.children("ul").length&&(t=e.children("ul"),r=(i=e.offset().left)+e.outerWidth(),s=e.offset().top,a=t.width(),n=t.height(),d=h(window).width()+h(window).scrollLeft(),o=h(window).height()+h(window).scrollTop(),_?e[r-(a+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[d<r+a&&d-r<i?"addClass":"removeClass"]("vakata-context-right"),o<s+n+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<a&&t.css("margin-right",i-a):d-r<a&&t.css("margin-left",d-r-a),t.show())},show:function(e,t,i){var r,s,a,n,d,o,c,i,l=!0;switch(g.element&&g.element.length&&g.element.width(""),!0){case!t&&!e:return!1;case!!t&&!!e:g.reference=e,g.position_x=t.x,g.position_y=t.y;break;case!t&&!!e:r=(g.reference=e).offset(),g.position_x=r.left+e.outerHeight(),g.position_y=r.top;break;case!!t&&!e:g.position_x=t.x,g.position_y=t.y}e&&!i&&h(e).data("vakata_contextmenu")&&(i=h(e).data("vakata_contextmenu")),h.vakata.context._parse(i)&&g.element.html(g.html),g.items.length&&(g.element.appendTo(b.body),s=g.element,a=g.position_x,n=g.position_y,d=s.width(),o=s.height(),c=h(window).width()+h(window).scrollLeft(),i=h(window).height()+h(window).scrollTop(),_&&(a-=s.outerWidth()-h(e).outerWidth())<h(window).scrollLeft()+20&&(a=h(window).scrollLeft()+20),g.element.css({left:a=c<a+d+20?c-(d+20):a,top:n=i<n+o+20?i-(o+20):n}).show().find("a").first().trigger("focus").parent().addClass("vakata-context-hover"),g.is_visible=!0,h.vakata.context._trigger("show"))},hide:function(){g.is_visible&&(g.element.hide().find("ul").hide().end().find(":focus").trigger("blur").end().detach(),g.is_visible=!1,h.vakata.context._trigger("hide"))}},h(function(){_="rtl"===h(b.body).css("direction");var i=!1;g.element=h("<ul class='vakata-context'></ul>"),g.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),h.contains(this,e.relatedTarget)||(i&&clearTimeout(i),g.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),h(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),h.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){h.contains(this,e.relatedTarget)||h(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){var t;h(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),h.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((t=this,function(){h.vakata.context.hide()}),h.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),h(this).trigger("blur").parent().hasClass("vakata-context-disabled")||!1===h.vakata.context._execute(h(this).attr("rel"))||h.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),h(e.currentTarget).trigger(e);break;case 37:g.is_visible&&(g.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 38:g.is_visible&&((t=!(t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length?g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last():t).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 39:g.is_visible&&(g.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 40:g.is_visible&&((t=!(t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length?g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first():t).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 27:h.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var e=g.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();e.parent().not(".vakata-context-disabled")&&e.trigger("click")}),h(b).on("mousedown.vakata.jstree",function(e){g.is_visible&&g.element[0]!==e.target&&!h.contains(g.element[0],e.target)&&h.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,t){g.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),_&&g.element.addClass("vakata-context-rtl").css("direction","rtl"),g.element.find("ul").hide().end()})}),E.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1,blank_space_drop:!1},E.jstree.plugins.dnd=function(e,d){this.init=function(e,t){d.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in b.createElement("span")},this.bind=function(){d.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",function(e){if(this.settings.dnd.large_drag_target&&E(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(r=E.vakata.html.escape(r)),t&&(t.id||0===t.id)&&t.id!==E.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||E.vakata.is_function(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(o={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},u=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),E.vakata.dnd.start(e,o,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy">+</ins></div>');E.vakata.dnd._trigger("start",e,{helper:E(),element:u,data:o})}}.bind(this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),E.vakata.dnd._trigger("move",e,{helper:E(),element:u,data:o}),!1}).on("drop.jstree",function(e){return e.preventDefault(),E.vakata.dnd._trigger("stop",e,{helper:E(),element:u,data:o}),!1}.bind(this))},this.redraw_node=function(e,t,i,r){if((e=d.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{for(var s,a,n=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&n.setAttribute("draggable",!0)}return e}},E(function(){var N=!1,T=!1,O=!1,A=!1,S=E('<div id="jstree-marker">&#160;</div>').hide();E(b).on("dragover.vakata.jstree",function(e){u&&E.vakata.dnd._trigger("move",e,{helper:E(),element:u,data:o})}).on("drop.vakata.jstree",function(e){u&&(E.vakata.dnd._trigger("stop",e,{helper:E(),element:u,data:o}),o=u=null)}).on("dnd_start.vakata.jstree",function(e,t){O=N=!1,t&&t.data&&t.data.jstree&&S.appendTo(b.body)}).on("dnd_move.vakata.jstree",function(e,s){var a=s.event.target!==O.target;if(A&&(s.event&&"dragover"===s.event.type&&!a||clearTimeout(A)),s&&s.data&&s.data.jstree&&(!s.event.target.id||"jstree-marker"!==s.event.target.id)){O=s.event;var n=E.jstree.reference(s.event.target),d=!1,o=!1,t=!1,i,c,l,h,_,g,u,f,p,m,v,j,k,b,y,x,w,C;if(n&&n._data&&n._data.dnd)if(S.attr("class","jstree-"+n.get_theme()+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")),x=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey)),s.helper.children().attr("class","jstree-"+n.get_theme()+" jstree-"+n.get_theme()+"-"+n.get_theme_variant()+" "+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[x?"show":"hide"](),s.event.target!==n.element[0]&&s.event.target!==n.get_container_ul()[0]||0!==n.get_container_ul().children().length&&!n.settings.dnd.blank_space_drop){if((d=n.settings.dnd.large_drop_target?E(s.event.target).closest(".jstree-node").children(".jstree-anchor"):E(s.event.target).closest(".jstree-anchor"))&&d.length&&d.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(o=d.offset(),t=(s.event.pageY!==P?s.event:s.event.originalEvent).pageY-o.top,h=d.outerHeight(),u=t<h/3?["b","i","a"]:h-h/3<t?["a","i","b"]:h/2<t?["i","a","b"]:["i","b","a"],E.each(u,function(e,t){switch(t){case"b":c=o.left-6,l=o.top,_=n.get_parent(d),g=d.parent().index(),C="jstree-below";break;case"i":b=n.settings.dnd.inside_pos,y=n.get_node(d.parent()),c=o.left-2,l=o.top+h/2+1,_=y.id,g="first"===b?0:"last"===b?y.children.length:Math.min(b,y.children.length),C="jstree-inside";break;case"a":c=o.left-6,l=o.top+h,_=n.get_parent(d),g=d.parent().index()+1,C="jstree-above"}for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(v=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",j=g,"move_node"==v&&"a"===t&&s.data.origin&&s.data.origin===n&&_===n.get_parent(s.data.nodes[p])&&(k=n.get_node(_),j>E.inArray(s.data.nodes[p],k.children)&&--j),!(f=f&&(n&&n.settings&&n.settings.dnd&&!1===n.settings.dnd.check_while_dragging||n.check(v,s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],_,j,{dnd:!0,ref:n.get_node(d.parent()),pos:t,origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))){n&&n.last_error&&(T=n.last_error());break}var i,r;if("i"===t&&d.parent().is(".jstree-closed")&&n.settings.dnd.open_timeout&&(s.event&&"dragover"===s.event.type&&!a||(A&&clearTimeout(A),A=setTimeout((r=d,function(){i.open_node(r)}),(i=n).settings.dnd.open_timeout))),f)return(w=n.get_node(_,!0)).hasClass(".jstree-dnd-parent")||(E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),N={ins:n,par:_,pos:"i"!==t||"last"!==b||0!==g||n.is_loaded(y)?g:"last"},S.css({left:c+"px",top:l+"px"}).show(),S.removeClass("jstree-above jstree-inside jstree-below").addClass(C),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"),T={},!(u=!0)}),!0===u))return}else{for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(!(f=f&&n.check(s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],E.jstree.root,"last",{dnd:!0,ref:n.get_node(E.jstree.root),pos:"i",origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))break;if(f)return N={ins:n,par:E.jstree.root,pos:"last"},S.hide(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"))}E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),N=!1,s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),s.event.originalEvent&&s.event.originalEvent.dataTransfer,S.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(S.hide(),O=N=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),A&&clearTimeout(A),t&&t.data&&t.data.jstree){S.hide().detach();var i,r,s=[];if(N){for(i=0,r=t.data.nodes.length;i<r;i++)s[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];N.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](s,N.par,N.pos,!1,!1,!1,t.data.origin)}else(i=E(t.event.target).closest(".jstree")).length&&T&&T.error&&"check"===T.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,T);N=O=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=E.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(A&&clearTimeout(A),A=O=T=N=!1,S.hide().detach(),E.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),O&&(O.metaKey=e.metaKey,O.ctrlKey=e.ctrlKey,E.vakata.dnd._trigger("move",O))))})}),p={element:!((f=E).vakata.html={div:f("<div></div>"),escape:function(e){return f.vakata.html.div.text(e).html()},strip:function(e){return f.vakata.html.div.empty().append(f.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},f.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(e,t,i){(i=i===P?f.vakata.dnd._get():i).event=t,f(b).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:p.data,element:p.element,helper:p.helper}},_clean:function(){p.helper&&p.helper.remove(),p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),p={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},u=null,f(b).off("mousemove.vakata.jstree touchmove.vakata.jstree",f.vakata.dnd.drag),f(b).off("mouseup.vakata.jstree touchend.vakata.jstree",f.vakata.dnd.stop)},_scroll:function(e){if(!p.scroll_e||!p.scroll_l&&!p.scroll_t)return p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),!1;if(!p.scroll_i)return p.scroll_i=setInterval(f.vakata.dnd._scroll,100),!1;if(!0===e)return!1;var t=p.scroll_e.scrollTop(),e=p.scroll_e.scrollLeft();p.scroll_e.scrollTop(t+p.scroll_t*f.vakata.dnd.settings.scroll_speed),p.scroll_e.scrollLeft(e+p.scroll_l*f.vakata.dnd.settings.scroll_speed),t===p.scroll_e.scrollTop()&&e===p.scroll_e.scrollLeft()||f.vakata.dnd._trigger("scroll",p.scroll_e)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag&&f.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(e){}return p.init_x=e.pageX,p.init_y=e.pageY,p.data=t,p.is_down=!0,p.element=e.currentTarget,p.target=e.target,p.is_touch="touchstart"===e.type,!1!==i&&(p.helper=f("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),f(b).on("mousemove.vakata.jstree touchmove.vakata.jstree",f.vakata.dnd.drag),f(b).on("mouseup.vakata.jstree touchend.vakata.jstree",f.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=b.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_down){if(!p.is_drag){if(!(Math.abs(i.pageX-p.init_x)>(p.is_touch?f.vakata.dnd.settings.threshold_touch:f.vakata.dnd.settings.threshold)||Math.abs(i.pageY-p.init_y)>(p.is_touch?f.vakata.dnd.settings.threshold_touch:f.vakata.dnd.settings.threshold)))return;p.helper&&(p.helper.appendTo(b.body),p.helper_w=p.helper.outerWidth()),p.is_drag=!0,f(p.target).one("click.vakata",!1),f.vakata.dnd._trigger("start",i)}var e=!1,t=!1,r=!1,s=!1,a=!1,n=!1,d=!1,o=!1,c=!1,l=!1;return p.scroll_t=0,p.scroll_l=0,p.scroll_e=!1,f(f(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return this.ownerDocument&&/^auto|scroll$/.test(f(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=f(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),i.pageY-t.top<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),i.pageX-t.left<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=-1)),p.scroll_t||p.scroll_l)return p.scroll_e=f(this),!1}),p.scroll_e||(e=f(b),t=f(window),r=e.height(),s=t.height(),a=e.width(),n=t.width(),d=e.scrollTop(),o=e.scrollLeft(),s<r&&i.pageY-d<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=-1),s<r&&s-(i.pageY-d)<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),n<a&&i.pageX-o<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=-1),n<a&&n-(i.pageX-o)<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),(p.scroll_t||p.scroll_l)&&(p.scroll_e=e)),p.scroll_e&&f.vakata.dnd._scroll(!0),p.helper&&(c=parseInt(i.pageY+f.vakata.dnd.settings.helper_top,10),l=parseInt(i.pageX+f.vakata.dnd.settings.helper_left,10),a&&l+p.helper_w>a&&(l=a-(p.helper_w+2)),p.helper.css({left:l+"px",top:(c=r&&r<c+25?r-50:c)+"px"})),f.vakata.dnd._trigger("move",i),!1}},stop:function(e){var t;return"touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag?(e.target!==p.target&&f(p.target).off("click.vakata"),f.vakata.dnd._trigger("stop",e)):"touchend"===e.type&&e.target===p.target&&(t=setTimeout(function(){f(e.target).trigger("click")},100),f(e.target).one("click",function(){t&&clearTimeout(t)})),f.vakata.dnd._clean(),!1}},E.jstree.defaults.massload=null,E.jstree.plugins.massload=function(e,l){this.init=function(e,t){this._data.massload={},l.init.call(this,e,t)},this._load_nodes=function(a,n,d,o){var e=this.settings.massload,t=[],i=this._model.data,r,s,c;if(!d){for(r=0,s=a.length;r<s;r++)i[a[r]]&&(i[a[r]].state.loaded||i[a[r]].state.failed)&&!o||(t.push(a[r]),(c=this.get_node(a[r],!0))&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},t.length){if(E.vakata.is_function(e))return e.call(this,t,function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=a.length;t<i;t++)(c=this.get_node(a[t],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);l._load_nodes.call(this,a,n,d,o)}.bind(this));if("object"==typeof e&&e&&e.url)return e=E.extend(!0,{},e),E.vakata.is_function(e.url)&&(e.url=e.url.call(this,t)),E.vakata.is_function(e.data)&&(e.data=e.data.call(this,t)),E.ajax(e).done(function(e,t,i){var r,s;if(e)for(r in e)e.hasOwnProperty(r)&&(this._data.massload[r]=e[r]);for(r=0,s=a.length;r<s;r++)(c=this.get_node(a[r],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);l._load_nodes.call(this,a,n,d,o)}.bind(this)).fail(function(e){l._load_nodes.call(this,a,n,d,o)}.bind(this))}}return l._load_nodes.call(this,a,n,d,o)},this._load_node=function(e,t){var i=this._data.massload[e.id],r=null,i;return i?(r=this["string"==typeof i?"_append_html_data":"_append_json_data"](e,"string"==typeof i?E(E.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){t.call(this,e)}),(i=this.get_node(e.id,!0))&&i.length&&i.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],r):l._load_node.call(this,e,t)}},E.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},E.jstree.plugins.search=function(e,d){this.bind=function(){d.bind.call(this),this._data.search.str="",this._data.search.dom=E(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",function(e,t){if(this._data.search.som&&t.res.length){for(var i=this._model.data,r,s,a=[],n,d,r=0,s=t.res.length;r<s;r++)if(i[t.res[r]]&&!i[t.res[r]].state.hidden&&(a.push(t.res[r]),a=a.concat(i[t.res[r]].parents),this._data.search.smc))for(n=0,d=i[t.res[r]].children_d.length;n<d;n++)i[i[t.res[r]].children_d[n]]&&!i[i[t.res[r]].children_d[n]].state.hidden&&a.push(i[t.res[r]].children_d[n]);a=E.vakata.array_remove_item(E.vakata.array_unique(a),E.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(a,!0),this.redraw(!0)}}.bind(this)).on("clear_search.jstree",function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))}.bind(this))},this.search=function(r,e,t,i,s,a){if(!1===r||""===E.vakata.trim(r.toString()))return this.clear_search();i=(i=this.get_node(i))&&(i.id||0===i.id)?i.id:null,r=r.toString();var n=this.settings.search,d=n.ajax||!1,o=this._model.data,c=null,l=[],h=[],_,g;if(this._data.search.res.length&&!s&&this.clear_search(),t===P&&(t=n.show_only_matches),a===P&&(a=n.show_only_matches_children),!e&&!1!==d)return E.vakata.is_function(d)?d.call(this,r,function(e){e&&e.d&&(e=e.d),this._load_nodes(E.vakata.is_array(e)?E.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})}.bind(this),i):((d=E.extend({},d)).data||(d.data={}),d.data.str=r,i&&(d.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=E.ajax(d).fail(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(d)},this.settings.core.error.call(this,this._data.core.last_error)}.bind(this)).done(function(e){e&&e.d&&(e=e.d),this._load_nodes(E.vakata.is_array(e)?E.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})}.bind(this)),this._data.search.lastRequest);if(s||(this._data.search.str=r,this._data.search.dom=E(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=a),c=new E.vakata.search(r,!0,{caseSensitive:n.case_sensitive,fuzzy:n.fuzzy}),E.each(o[i||E.jstree.root].children_d,function(e,t){var i=o[t];i.text&&!i.state.hidden&&(!n.search_leaves_only||i.state.loaded&&0===i.children.length)&&(n.search_callback&&n.search_callback.call(this,r,i)||!n.search_callback&&c.search(i.text).isMatch)&&(l.push(t),h=h.concat(i.parents))}),l.length){for(_=0,g=(h=E.vakata.array_unique(h)).length;_<g;_++)h[_]!==E.jstree.root&&o[h[_]]&&!0===this.open_node(h[_],null,0)&&this._data.search.opn.push(h[_]);s?(this._data.search.dom=this._data.search.dom.add(E(this.element[0].querySelectorAll("#"+E.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=E.vakata.array_unique(this._data.search.res.concat(l))):(this._data.search.dom=E(this.element[0].querySelectorAll("#"+E.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=l),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:r,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=E(this.element[0].querySelectorAll("#"+E.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=E()},this.redraw_node=function(e,t,i,r){if((e=d.redraw_node.apply(this,arguments))&&-1!==E.inArray(e.id,this._data.search.res)){for(var s,a,n=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(n.className+=" jstree-search")}return e}},(w=E).vakata.search=function(p,e,m){m=m||{},!1!==(m=w.extend({},w.vakata.search.defaults,m)).fuzzy&&(m.fuzzy=!0),p=m.caseSensitive?p:p.toLowerCase();var v=m.location,i=m.distance,j=m.threshold,k=p.length,b,y,x,t;return 32<k&&(m.fuzzy=!1),m.fuzzy&&(b=1<<k-1,y=function(){for(var e={},t=0,t=0;t<k;t++)e[p.charAt(t)]=0;for(t=0;t<k;t++)e[p.charAt(t)]|=1<<k-t-1;return e}(),x=function(e,t){var e=e/k,t=Math.abs(v-t);return i?e+t/i:t?1:e}),t=function(e){if(e=m.caseSensitive?e.toString():e.toString().toLowerCase(),p===e||-1!==e.indexOf(p))return{isMatch:!0,score:0};if(!m.fuzzy)return{isMatch:!1,score:1};var t,i,r=e.length,s=j,a=e.indexOf(p,v),n,d,o=k+r,c,l,h,_,g,u=1,f=[];for(-1!==a&&(s=Math.min(x(0,a),s),-1!==(a=e.lastIndexOf(p,v+k))&&(s=Math.min(x(0,a),s))),a=-1,t=0;t<k;t++){n=0,d=o;while(n<d)x(t,v+d)<=s?n=d:o=d,d=Math.floor((o-n)/2+n);for(o=d,l=Math.max(1,v-d+1),h=Math.min(v+d,r)+k,(_=new Array(h+2))[h+1]=(1<<t)-1,i=h;l<=i;i--)if(g=y[e.charAt(i-1)],_[i]=0===t?(_[i+1]<<1|1)&g:(_[i+1]<<1|1)&g|(c[i+1]|c[i])<<1|1|c[i+1],_[i]&b&&(u=x(t,i-1))<=s){if(s=u,f.push(a=i-1),!(v<a))break;l=Math.max(1,2*v-a)}if(x(t+1,v)>s)break;c=_}return{isMatch:0<=a,score:u}},!0===e?{search:t}:t(e)},w.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},E.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1};var m=!(E.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",function(e,t){this.sort(t.parent,!0)}.bind(this)).on("rename_node.jstree create_node.jstree",function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)}.bind(this)).on("move_node.jstree copy_node.jstree",function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)}.bind(this))},this.sort=function(e,t){var i,r;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(this.settings.sort.bind(this)),t))for(i=0,r=e.children_d.length;i<r;i++)this.sort(e.children_d[i],!1)}}),t,v;E.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},E.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var i=function(){this.element.on(this.settings.state.events,function(){m&&clearTimeout(m),m=setTimeout(function(){this.save_state()}.bind(this),100)}.bind(this)),this.trigger("state_ready")}.bind(this);this.element.on("ready.jstree",function(e,t){this.element.one("restore_state.jstree",i),this.restore_state()||i()}.bind(this))},this.save_state=function(){var e=this.get_state();this.settings.state.preserve_loaded||delete e.core.loaded;var e={state:e,ttl:this.settings.state.ttl,sec:+new Date};E.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var i=E.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl)&&(!!(i=(i=i&&i.state?i.state:i)&&E.vakata.is_function(this.settings.state.filter)?this.settings.state.filter.call(this,i):i)&&(this.settings.state.preserve_loaded||delete i.core.loaded,this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:E.extend(!0,{},i)})}),this.set_state(i),!0))},this.clear_state=function(){return E.vakata.storage.del(this.settings.state.key)}},E.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},E.jstree.defaults.types={default:{}},E.jstree.defaults.types[E.jstree.root]={},E.jstree.plugins.types=function(e,l){this.init=function(e,t){var i,r;if(t&&t.types&&t.types.default)for(i in t.types)if("default"!==i&&i!==E.jstree.root&&t.types.hasOwnProperty(i))for(r in t.types.default)t.types.default.hasOwnProperty(r)&&t.types[i][r]===P&&(t.types[i][r]=t.types.default[r]);l.init.call(this,e,t),this._model.data[E.jstree.root].type=E.jstree.root},this.refresh=function(e,t){l.refresh.call(this,e,t),this._model.data[E.jstree.root].type=E.jstree.root},this.bind=function(){this.element.on("model.jstree",function(e,t){for(var i=this._model.data,r=t.nodes,s=this.settings.types,a,n,d="default",o,a=0,n=r.length;a<n;a++){if(d="default",i[r[a]].original&&i[r[a]].original.type&&s[i[r[a]].original.type]&&(d=i[r[a]].original.type),i[r[a]].data&&i[r[a]].data.jstree&&i[r[a]].data.jstree.type&&s[i[r[a]].data.jstree.type]&&(d=i[r[a]].data.jstree.type),i[r[a]].type=d,!0===i[r[a]].icon&&s[d].icon!==P&&(i[r[a]].icon=s[d].icon),s[d].li_attr!==P&&"object"==typeof s[d].li_attr)for(o in s[d].li_attr)s[d].li_attr.hasOwnProperty(o)&&"id"!==o&&(i[r[a]].li_attr[o]===P?i[r[a]].li_attr[o]=s[d].li_attr[o]:"class"===o&&(i[r[a]].li_attr.class=s[d].li_attr.class+" "+i[r[a]].li_attr.class));if(s[d].a_attr!==P&&"object"==typeof s[d].a_attr)for(o in s[d].a_attr)s[d].a_attr.hasOwnProperty(o)&&"id"!==o&&(i[r[a]].a_attr[o]===P?i[r[a]].a_attr[o]=s[d].a_attr[o]:"href"===o&&"#"===i[r[a]].a_attr[o]?i[r[a]].a_attr.href=s[d].a_attr.href:"class"===o&&(i[r[a]].a_attr.class=s[d].a_attr.class+" "+i[r[a]].a_attr.class))}i[E.jstree.root].type=E.jstree.root}.bind(this)),l.bind.call(this)},this.get_json=function(e,t,i){var r,s,a=this._model.data,n=t?E.extend(!0,{},t,{no_id:!1}):{},d=l.get_json.call(this,e,n,i);if(!1===d)return!1;if(E.vakata.is_array(d))for(r=0,s=d.length;r<s;r++)d[r].type=(d[r].id||0===d[r].id)&&a[d[r].id]&&a[d[r].id].type?a[d[r].id].type:"default",t&&t.no_id&&(delete d[r].id,d[r].li_attr&&d[r].li_attr.id&&delete d[r].li_attr.id,d[r].a_attr&&d[r].a_attr.id&&delete d[r].a_attr.id);else d.type=(d.id||0===d.id)&&a[d.id]&&a[d.id].type?a[d.id].type:"default",t&&t.no_id&&(d=this._delete_ids(d));return d},this._delete_ids=function(e){if(E.vakata.is_array(e)){for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&E.vakata.is_array(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,t,i,r,s){if(!1===l.check.call(this,e,t,i,r,s))return!1;t=t&&(t.id||0===t.id)?t:this.get_node(t),i=i&&(i.id||0===i.id)?i:this.get_node(i);var a,n,d,o,c,a=(a=t&&(t.id||0===t.id)?s&&s.origin?s.origin:E.jstree.reference(t.id):null)&&a._model&&a._model.data?a._model.data:null;switch(e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===E.inArray(t.id,i.children)){if((n=this.get_rules(i)).max_children!==P&&-1!==n.max_children&&n.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(n.valid_children!==P&&-1!==n.valid_children&&-1===E.inArray(t.type||"default",n.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(a&&t.children_d&&t.parents){for(o=d=0,c=t.children_d.length;o<c;o++)d=Math.max(d,a[t.children_d[o]].parents.length);d=d-t.parents.length+1}(d<=0||d===P)&&(d=1);do{if(n.max_depth!==P&&-1!==n.max_depth&&n.max_depth<d)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});i=this.get_node(i.parent),n=this.get_rules(i),d++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var e=this.get_type(e,!0);return e.max_depth===P&&(e.max_depth=-1),e.max_children===P&&(e.max_children=-1),e.valid_children===P&&(e.valid_children=-1),e},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?E.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i=this._model.data,r,s,a,n,d,o,c,l;if(E.vakata.is_array(e)){for(s=0,a=(e=e.slice()).length;s<a;s++)this.set_type(e[s],t);return!0}if(r=this.settings.types,e=this.get_node(e),!r[t]||!e)return!1;if((c=this.get_node(e,!0))&&c.length&&(l=c.children(".jstree-anchor")),n=e.type,d=this.get_icon(e),e.type=t,!0!==d&&r[n]&&(r[n].icon===P||d!==r[n].icon)||this.set_icon(e,r[t].icon===P||r[t].icon),r[n]&&r[n].li_attr!==P&&"object"==typeof r[n].li_attr)for(o in r[n].li_attr)r[n].li_attr.hasOwnProperty(o)&&"id"!==o&&("class"===o?(i[e.id].li_attr.class=(i[e.id].li_attr.class||"").replace(r[n].li_attr[o],""),c&&c.removeClass(r[n].li_attr[o])):i[e.id].li_attr[o]===r[n].li_attr[o]&&(i[e.id].li_attr[o]=null,c&&c.removeAttr(o)));if(r[n]&&r[n].a_attr!==P&&"object"==typeof r[n].a_attr)for(o in r[n].a_attr)r[n].a_attr.hasOwnProperty(o)&&"id"!==o&&("class"===o?(i[e.id].a_attr.class=(i[e.id].a_attr.class||"").replace(r[n].a_attr[o],""),l&&l.removeClass(r[n].a_attr[o])):i[e.id].a_attr[o]===r[n].a_attr[o]&&("href"===o?(i[e.id].a_attr[o]="#",l&&l.attr("href","#")):(delete i[e.id].a_attr[o],l&&l.removeAttr(o))));if(r[t].li_attr!==P&&"object"==typeof r[t].li_attr)for(o in r[t].li_attr)r[t].li_attr.hasOwnProperty(o)&&"id"!==o&&(i[e.id].li_attr[o]===P?(i[e.id].li_attr[o]=r[t].li_attr[o],c&&("class"===o?c.addClass(r[t].li_attr[o]):c.attr(o,r[t].li_attr[o]))):"class"===o&&(i[e.id].li_attr.class=r[t].li_attr[o]+" "+i[e.id].li_attr.class,c&&c.addClass(r[t].li_attr[o])));if(r[t].a_attr!==P&&"object"==typeof r[t].a_attr)for(o in r[t].a_attr)r[t].a_attr.hasOwnProperty(o)&&"id"!==o&&(i[e.id].a_attr[o]===P?(i[e.id].a_attr[o]=r[t].a_attr[o],l&&("class"===o?l.addClass(r[t].a_attr[o]):l.attr(o,r[t].a_attr[o]))):"href"===o&&"#"===i[e.id].a_attr[o]?(i[e.id].a_attr.href=r[t].a_attr.href,l&&l.attr("href",r[t].a_attr.href)):"class"===o&&(i[e.id].a_attr.class=r[t].a_attr.class+" "+i[e.id].a_attr.class,l&&l.addClass(r[t].a_attr[o])));return!0}},E.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},E.jstree.plugins.unique=function(e,f){this.check=function(e,t,i,r,s){if(!1===f.check.call(this,e,t,i,r,s))return!1;if(t=t&&(t.id||0===t.id)?t:this.get_node(t),!(i=i&&(i.id||0===i.id)?i:this.get_node(i))||!i.children)return!0;for(var a="rename_node"===e?r:t.text,n=[],d=this.settings.unique.case_sensitive,o=this.settings.unique.trim_whitespace,c=this._model.data,l,h,_,l=0,h=i.children.length;l<h;l++)_=c[i.children[l]].text,d||(_=_.toLowerCase()),o&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),n.push(_);switch(d||(a=a.toLowerCase()),o&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),e){case"delete_node":return!0;case"rename_node":return _=t.text||"",d||(_=_.toLowerCase()),o&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(l=-1===E.inArray(a,n)||t.text&&_===a)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"create_node":return(l=-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"copy_node":return(l=-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"move_node":return(l=t.parent===i.id&&(!s||!s.is_multi)||-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l}return!0},this.create_node=function(e,t,i,r,s){if(!t||"object"==typeof t&&t.text===P){if(null===e&&(e=E.jstree.root),!(e=this.get_node(e)))return f.create_node.call(this,e,t,i,r,s);if(!(i=i===P?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return f.create_node.call(this,e,t,i,r,s);t=t||{};for(var a,n,d,o,c,l=this._model.data,h=this.settings.unique.case_sensitive,_=this.settings.unique.trim_whitespace,g=this.settings.unique.duplicate,u,n=a=this.get_string("New node"),d=[],o=0,c=e.children.length;o<c;o++)u=l[e.children[o]].text,h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),d.push(u);o=1,u=n,h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));while(-1!==E.inArray(u,d))u=n=g.call(this,a,++o).toString(),h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));t.text=n}return f.create_node.call(this,e,t,i,r,s)}};var j=b.createElement("DIV");if(j.setAttribute("unselectable","on"),j.setAttribute("role","presentation"),j.className="jstree-wholerow",j.innerHTML="&#160;",E.jstree.plugins.wholerow=function(e,a){this.bind=function(){a.bind.call(this),this.element.on("ready.jstree set_state.jstree",function(){this.hide_dots()}.bind(this)).on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-wholerow-ul")}.bind(this)).on("deselect_all.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}.bind(this)).on("changed.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,r,s,r=0,s=t.selected.length;r<s;r++)(i=this.get_node(t.selected[r],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("open_node.jstree",function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("hover_node.jstree dehover_node.jstree",function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}.bind(this)).on("contextmenu.jstree",".jstree-wholerow",function(e){var t;this._data.contextmenu&&(e.preventDefault(),t=E.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY}),E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t))}.bind(this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=E.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=E.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("click.jstree",".jstree-leaf > .jstree-ocl",function(e){e.stopImmediatePropagation();var t=E.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}.bind(this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1}.bind(this)).on("mouseleave.jstree",".jstree-node",function(e){this.dehover_node(e.currentTarget)}.bind(this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),a.teardown.call(this)},this.redraw_node=function(e,t,i,r){var s;return(e=a.redraw_node.apply(this,arguments))&&(s=j.cloneNode(!0),-1!==E.inArray(e.id,this._data.core.selected)&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(s.className+=" jstree-wholerow-hovered"),e.insertBefore(s,e.childNodes[0])),e}},window.customElements&&Object&&Object.create){var e=Object.create(HTMLElement.prototype);e.createdCallback=function(){var e={core:{},plugins:[]},t;for(t in E.jstree.plugins)E.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(e.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(e[t]=JSON.parse(this.getAttribute(t))));for(t in E.jstree.defaults.core)E.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(e.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));E(this).jstree(e)};try{window.customElements.define("vakata-jstree",function(){},{prototype:e})}catch(e){}}}});

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtYnVuZGxlLmNodW5rLnZlbmRvcnMtbm9kZV9tb2R1bGVzX2pzdHJlZV9kaXN0X2pzdHJlZV9taW5fanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFFQSxhQUFhLGFBQWEsS0FBcUMsQ0FBQyxpQ0FBTyxDQUFDLDZFQUFRLENBQUMsb0NBQUMsQ0FBQztBQUFBO0FBQUE7QUFBQSxrR0FBQyxDQUFDLENBQXdGLENBQUMsZUFBZSxhQUFhLGNBQWMsb0hBQW9ILHdCQUF3QixxQkFBcUIsWUFBWSwyQkFBMkIsV0FBVyxXQUFXLDJGQUEyRixXQUFXLGdCQUFnQiwrQkFBK0IsaUNBQWlDLHVCQUF1Qix5RkFBeUYsaUNBQWlDLHNDQUFzQyw2QkFBNkIsMERBQTBELDJCQUEyQixrREFBa0QsTUFBTSxRQUFRLHFDQUFxQywwQkFBMEIsMkNBQTJDLGdDQUFnQyxrQkFBa0IsZ0VBQWdFLE9BQU8sVUFBVSxxQkFBcUIsNENBQTRDLFVBQVUsMkdBQTJHLDZCQUE2QixxQ0FBcUMsSUFBSSx5QkFBeUIsMEVBQTBFLHFEQUFxRCxnREFBZ0QsdUlBQXVJLDBCQUEwQix1REFBdUQsbUJBQW1CLHlEQUF5RCwwQkFBMEIsb0ZBQW9GLHVGQUF1RiwrSUFBK0kseUJBQXlCLDZDQUE2QyxtQkFBbUIsNkNBQTZDLGtCQUFrQixNQUFNLDhNQUE4TSxnQkFBZ0IsbUJBQW1CLHlDQUF5QywyREFBMkQsbUJBQW1CLE1BQU0sOEZBQThGLGdFQUFnRSw0S0FBNEssa0JBQWtCLG1CQUFtQix5Q0FBeUMsMkRBQTJELGlCQUFpQixnQkFBZ0Isa0JBQWtCLG1CQUFtQixtREFBbUQsdUVBQXVFLGlCQUFpQixrR0FBa0csZ0JBQWdCLGdEQUFnRCwwQkFBMEIscUJBQXFCLDBCQUEwQiwwQkFBMEIsc0NBQXNDLG9CQUFvQixhQUFhLE9BQU8sa0VBQWtFLDZDQUE2QyxrQ0FBa0MseUVBQXlFLFdBQVcsc25CQUFzbkIsMEVBQTBFLDhvQkFBOG9CLHFCQUFxQix5Q0FBeUMscURBQXFELFVBQVUs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K0YsOEhBQThILFFBQVEsa05BQWtOLElBQUksdUhBQXVILHlGQUF5Riw2SUFBNkksU0FBUyw0Q0FBNEMsNkJBQTZCLDhIQUE4SCwwQ0FBMEMscUJBQXFCLDZFQUE2RSxpQkFBaUIscUVBQXFFLHVEQUF1RCxvREFBb0QscUZBQXFGLCtDQUErQyxxRkFBcUYseUNBQXlDLElBQUksc0hBQXNILGlEQUFpRCwySEFBMkgsc0VBQXNFLGtMQUFrTCxvRUFBb0UsTUFBTSxxRUFBcUUsb0dBQW9HLDRGQUE0Riw4REFBOEQsNkJBQTZCLHVCQUF1Qix3RUFBd0UsRUFBRSwwR0FBMEcsc0RBQXNELDZCQUE2QiwwQkFBMEIsd0VBQXdFLEVBQUUsMEdBQTBHLDZEQUE2RCw2QkFBNkIsdUJBQXVCLHdFQUF3RSxFQUFFLDBHQUEwRyxnRkFBZ0YsMkdBQTJHLCtEQUErRCxtQ0FBbUMsYUFBYSwwQkFBMEIsNkZBQTZGLG9DQUFvQyxNQUFNLG9TQUFvUywrQ0FBK0MsMkNBQTJDLDZCQUE2QixPQUFPLE9BQU8sWUFBWSxHQUFHLHNNQUFzTSxpS0FBaUssbUJBQW1CLElBQUkseURBQXlELEVBQUUsWUFBWSxFQUFFLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaWdjb21tZXJjZS1jb3JuZXJzdG9uZS8uL25vZGVfbW9kdWxlcy9qc3RyZWUvZGlzdC9qc3RyZWUubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBqc1RyZWUgLSB2My4zLjE1IC0gMjAyMy0wMi0yMCAtIChNSVQpICovXG5cbiFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxlKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJqcXVlcnlcIikpOmUoalF1ZXJ5KX0oZnVuY3Rpb24oRSxQKXtcInVzZSBzdHJpY3RcIjtpZighRS5qc3RyZWUpe3ZhciBzPTAsYT0hMSxuPSExLGQ9ITEscj1bXSxlPUUoXCJzY3JpcHQ6bGFzdFwiKS5hdHRyKFwic3JjXCIpLGI9d2luZG93LmRvY3VtZW50LGM9d2luZG93LnNldEltbWVkaWF0ZSxpPXdpbmRvdy5Qcm9taXNlOyFjJiZpJiYoYz1mdW5jdGlvbihlLHQpe2kucmVzb2x2ZSh0KS50aGVuKGUpfSksRS5qc3RyZWU9e3ZlcnNpb246XCIzLjMuMTVcIixkZWZhdWx0czp7cGx1Z2luczpbXX0scGx1Z2luczp7fSxwYXRoOmUmJi0xIT09ZS5pbmRleE9mKFwiL1wiKT9lLnJlcGxhY2UoL1xcL1teXFwvXSskLyxcIlwiKTpcIlwiLGlkcmVnZXg6L1tcXFxcOiYhXnwoKVxcW1xcXTw+QConK34jXCI7Liw9XFwtIFxcLyR7fSU/YF0vZyxyb290OlwiI1wifSxFLmpzdHJlZS5jcmVhdGU9ZnVuY3Rpb24oZSxpKXt2YXIgcj1uZXcgRS5qc3RyZWUuY29yZSgrK3MpLHQ9aTtyZXR1cm4gaT1FLmV4dGVuZCghMCx7fSxFLmpzdHJlZS5kZWZhdWx0cyxpKSx0JiZ0LnBsdWdpbnMmJihpLnBsdWdpbnM9dC5wbHVnaW5zKSxFLmVhY2goaS5wbHVnaW5zLGZ1bmN0aW9uKGUsdCl7XCJjb3JlXCIhPT1lJiYocj1yLnBsdWdpbih0LGlbdF0pKX0pLEUoZSkuZGF0YShcImpzdHJlZVwiLHIpLHIuaW5pdChlLGkpLHJ9LEUuanN0cmVlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtFKFwiLmpzdHJlZTpqc3RyZWVcIikuanN0cmVlKFwiZGVzdHJveVwiKSxFKGIpLm9mZihcIi5qc3RyZWVcIil9LEUuanN0cmVlLmNvcmU9ZnVuY3Rpb24oZSl7dGhpcy5faWQ9ZSx0aGlzLl9jbnQ9MCx0aGlzLl93cms9bnVsbCx0aGlzLl9kYXRhPXtjb3JlOnt0aGVtZXM6e25hbWU6ITEsZG90czohMSxpY29uczohMSxlbGxpcHNpczohMX0sc2VsZWN0ZWQ6W10sbGFzdF9lcnJvcjp7fSx3b3JraW5nOiExLHdvcmtlcl9xdWV1ZTpbXSxmb2N1c2VkOm51bGx9fX0sRS5qc3RyZWUucmVmZXJlbmNlPWZ1bmN0aW9uKHQpe3ZhciBpPW51bGwsZT1udWxsO2lmKCF0fHwhdC5pZHx8dC50YWdOYW1lJiZ0Lm5vZGVUeXBlfHwodD10LmlkKSwhZXx8IWUubGVuZ3RoKXRyeXtlPUUodCl9Y2F0Y2goZSl7fWlmKCFlfHwhZS5sZW5ndGgpdHJ5e2U9RShcIiNcIit0LnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSl9Y2F0Y2goZSl7fXJldHVybiBlJiZlLmxlbmd0aCYmKGU9ZS5jbG9zZXN0KFwiLmpzdHJlZVwiKSkubGVuZ3RoJiYoZT1lLmRhdGEoXCJqc3RyZWVcIikpP2k9ZTpFKFwiLmpzdHJlZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9RSh0aGlzKS5kYXRhKFwianN0cmVlXCIpO2lmKGUmJmUuX21vZGVsLmRhdGFbdF0pcmV0dXJuIGk9ZSwhMX0pLGl9LEUuZm4uanN0cmVlPWZ1bmN0aW9uKGkpe3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBpLHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGE9bnVsbDtyZXR1cm4hKCEwPT09aSYmIXRoaXMubGVuZ3RoKSYmKHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPUUuanN0cmVlLnJlZmVyZW5jZSh0aGlzKSx0PXImJmU/ZVtpXTpudWxsO2lmKGE9ciYmdD90LmFwcGx5KGUscyk6bnVsbCxlfHxyfHxpIT09UCYmIUUuaXNQbGFpbk9iamVjdChpKXx8RS5qc3RyZWUuY3JlYXRlKHRoaXMsaSksbnVsbCE9PShhPWUmJiFyfHwhMD09PWk/ZXx8ITE6YSkmJmEhPT1QKXJldHVybiExfSksbnVsbCE9PWEmJmEhPT1QP2E6dGhpcyl9LEUuZXhwci5wc2V1ZG9zLmpzdHJlZT1FLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gRShlKS5oYXNDbGFzcyhcImpzdHJlZVwiKSYmRShlKS5kYXRhKFwianN0cmVlXCIpIT09UH19KSxFLmpzdHJlZS5kZWZhdWx0cy5jb3JlPXtkYXRhOiExLHN0cmluZ3M6ITEsY2hlY2tfY2FsbGJhY2s6ITEsZXJyb3I6RS5ub29wLGFuaW1hdGlvbjoyMDAsbXVsdGlwbGU6ITAsdGhlbWVzOntuYW1lOiExLHVybDohMSxkaXI6ITEsZG90czohMCxpY29uczohMCxlbGxpcHNpczohMSxzdHJpcGVzOiExLHZhcmlhbnQ6ITEscmVzcG9uc2l2ZTohMX0sZXhwYW5kX3NlbGVjdGVkX29ubG9hZDohMCx3b3JrZXI6ITAsZm9yY2VfdGV4dDohMSxkYmxjbGlja190b2dnbGU6ITAsbG9hZGVkX3N0YXRlOiExLHJlc3RvcmVfZm9jdXM6ITAsY29tcHV0ZV9lbGVtZW50c19wb3NpdGlvbnM6ITEsa2V5Ym9hcmQ6e1wiY3RybC1zcGFjZVwiOmZ1bmN0aW9uKGUpe2UudHlwZT1cImNsaWNrXCIsRShlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSl9LGVudGVyOmZ1bmN0aW9uKGUpe2UudHlwZT1cImNsaWNrXCIsRShlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSl9LGxlZnQ6ZnVuY3Rpb24oZSl7dmFyIGU7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNfb3BlbihlLmN1cnJlbnRUYXJnZXQpP3RoaXMuY2xvc2Vfbm9kZShlLmN1cnJlbnRUYXJnZXQpOihlPXRoaXMuZ2V0X3BhcmVudChlLmN1cnJlbnRUYXJnZXQpKSYmZS5pZCE9PUUuanN0cmVlLnJvb3QmJnRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9LHVwOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgZT10aGlzLmdldF9wcmV2X2RvbShlLmN1cnJlbnRUYXJnZXQpO2UmJmUubGVuZ3RoJiZlLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfSxyaWdodDpmdW5jdGlvbihlKXt2YXIgZTtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5pc19jbG9zZWQoZS5jdXJyZW50VGFyZ2V0KT90aGlzLm9wZW5fbm9kZShlLmN1cnJlbnRUYXJnZXQsZnVuY3Rpb24oZSl7dGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKX0pOiF0aGlzLmlzX29wZW4oZS5jdXJyZW50VGFyZ2V0KXx8KGU9dGhpcy5nZXRfbm9kZShlLmN1cnJlbnRUYXJnZXQsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKVswXSkmJkUodGhpcy5fZmlyc3RDaGlsZChlKSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9LGRvd246ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPXRoaXMuZ2V0X25leHRfZG9tKGUuY3VycmVudFRhcmdldCk7ZSYmZS5sZW5ndGgmJmUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9LFwiKlwiOmZ1bmN0aW9uKGUpe3RoaXMub3Blbl9hbGwoKX0saG9tZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGU9dGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7ZSYmRShlKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpbHRlcihcIjp2aXNpYmxlXCIpLnRyaWdnZXIoXCJmb2N1c1wiKX0sZW5kOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtYW5jaG9yXCIpLmZpbHRlcihcIjp2aXNpYmxlXCIpLmxhc3QoKS50cmlnZ2VyKFwiZm9jdXNcIil9LGYyOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmVkaXQoZS5jdXJyZW50VGFyZ2V0KX19fSxFLmpzdHJlZS5jb3JlLnByb3RvdHlwZT17cGx1Z2luOmZ1bmN0aW9uKGUsdCl7dmFyIGk9RS5qc3RyZWUucGx1Z2luc1tlXTtyZXR1cm4gaT8odGhpcy5fZGF0YVtlXT17fSxpLnByb3RvdHlwZT10aGlzLG5ldyBpKHQsdGhpcykpOnRoaXN9LGluaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2RlbD17ZGF0YTp7fSxjaGFuZ2VkOltdLGZvcmNlX2Z1bGxfcmVkcmF3OiExLHJlZHJhd190aW1lb3V0OiExLGRlZmF1bHRfc3RhdGU6e2xvYWRlZDohMCxvcGVuZWQ6ITEsc2VsZWN0ZWQ6ITEsZGlzYWJsZWQ6ITF9fSx0aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdPXtpZDpFLmpzdHJlZS5yb290LHBhcmVudDpudWxsLHBhcmVudHM6W10sY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxzdGF0ZTp7bG9hZGVkOiExfX0sdGhpcy5lbGVtZW50PUUoZSkuYWRkQ2xhc3MoXCJqc3RyZWUganN0cmVlLVwiK3RoaXMuX2lkKSx0aGlzLnNldHRpbmdzPXQsdGhpcy5fZGF0YS5jb3JlLnJlYWR5PSExLHRoaXMuX2RhdGEuY29yZS5sb2FkZWQ9ITEsdGhpcy5fZGF0YS5jb3JlLnJ0bD1cInJ0bFwiPT09dGhpcy5lbGVtZW50LmNzcyhcImRpcmVjdGlvblwiKSx0aGlzLmVsZW1lbnRbdGhpcy5fZGF0YS5jb3JlLnJ0bD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzdHJlZS1ydGxcIiksdGhpcy5lbGVtZW50LmF0dHIoXCJyb2xlXCIsXCJ0cmVlXCIpLHRoaXMuc2V0dGluZ3MuY29yZS5tdWx0aXBsZSYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiLCEwKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIpfHx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpLHRoaXMuYmluZCgpLHRoaXMudHJpZ2dlcihcImluaXRcIiksdGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sPXRoaXMuZWxlbWVudC5maW5kKFwiID4gdWwgPiBsaVwiKS5jbG9uZSghMCksdGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sLmZpbmQoXCJsaVwiKS5hZGRCYWNrKCkuY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMz09PXRoaXMubm9kZVR5cGUmJighdGhpcy5ub2RlVmFsdWV8fC9eXFxzKyQvLnRlc3QodGhpcy5ub2RlVmFsdWUpKX0pLnJlbW92ZSgpLHRoaXMuZWxlbWVudC5odG1sKFwiPHVsIGNsYXNzPSdqc3RyZWUtY29udGFpbmVyLXVsIGpzdHJlZS1jaGlsZHJlbicgcm9sZT0nZ3JvdXAnPjxsaSBpZD0nalwiK3RoaXMuX2lkK1wiX2xvYWRpbmcnIGNsYXNzPSdqc3RyZWUtaW5pdGlhbC1ub2RlIGpzdHJlZS1sb2FkaW5nIGpzdHJlZS1sZWFmIGpzdHJlZS1sYXN0JyByb2xlPSdub25lJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLW9jbCc+PC9pPjxhIGNsYXNzPSdqc3RyZWUtYW5jaG9yJyByb2xlPSd0cmVlaXRlbScgaHJlZj0nIyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24taGlkZGVuJz48L2k+XCIrdGhpcy5nZXRfc3RyaW5nKFwiTG9hZGluZyAuLi5cIikrXCI8L2E+PC9saT48L3VsPlwiKSx0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLFwialwiK3RoaXMuX2lkK1wiX2xvYWRpbmdcIiksdGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodD10aGlzLmdldF9jb250YWluZXJfdWwoKS5jaGlsZHJlbihcImxpXCIpLmZpcnN0KCkub3V0ZXJIZWlnaHQoKXx8MjQsdGhpcy5fZGF0YS5jb3JlLm5vZGU9dGhpcy5fY3JlYXRlX3Byb3RvdHlwZV9ub2RlKCksdGhpcy50cmlnZ2VyKFwibG9hZGluZ1wiKSx0aGlzLmxvYWRfbm9kZShFLmpzdHJlZS5yb290KX0sZGVzdHJveTpmdW5jdGlvbihlKXtpZih0aGlzLnRyaWdnZXIoXCJkZXN0cm95XCIpLHRoaXMuX3dyayl0cnl7d2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5fd3JrKSx0aGlzLl93cms9bnVsbH1jYXRjaChlKXt9ZXx8dGhpcy5lbGVtZW50LmVtcHR5KCksdGhpcy50ZWFyZG93bigpfSxfY3JlYXRlX3Byb3RvdHlwZV9ub2RlOmZ1bmN0aW9uKCl7dmFyIGU9Yi5jcmVhdGVFbGVtZW50KFwiTElcIiksdCxpO3JldHVybiBlLnNldEF0dHJpYnV0ZShcInJvbGVcIixcIm5vbmVcIiksKHQ9Yi5jcmVhdGVFbGVtZW50KFwiSVwiKSkuY2xhc3NOYW1lPVwianN0cmVlLWljb24ganN0cmVlLW9jbFwiLHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLGUuYXBwZW5kQ2hpbGQodCksKHQ9Yi5jcmVhdGVFbGVtZW50KFwiQVwiKSkuY2xhc3NOYW1lPVwianN0cmVlLWFuY2hvclwiLHQuc2V0QXR0cmlidXRlKFwiaHJlZlwiLFwiI1wiKSx0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSx0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInRyZWVpdGVtXCIpLChpPWIuY3JlYXRlRWxlbWVudChcIklcIikpLmNsYXNzTmFtZT1cImpzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb25cIixpLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSx0LmFwcGVuZENoaWxkKGkpLGUuYXBwZW5kQ2hpbGQodCksdD1pPW51bGwsZX0sX2tiZXZlbnRfdG9fZnVuYzpmdW5jdGlvbihlKXt2YXIgdD17ODpcIkJhY2tzcGFjZVwiLDk6XCJUYWJcIiwxMzpcIkVudGVyXCIsMTk6XCJQYXVzZVwiLDI3OlwiRXNjXCIsMzI6XCJTcGFjZVwiLDMzOlwiUGFnZVVwXCIsMzQ6XCJQYWdlRG93blwiLDM1OlwiRW5kXCIsMzY6XCJIb21lXCIsMzc6XCJMZWZ0XCIsMzg6XCJVcFwiLDM5OlwiUmlnaHRcIiw0MDpcIkRvd25cIiw0NDpcIlByaW50XCIsNDU6XCJJbnNlcnRcIiw0NjpcIkRlbGV0ZVwiLDk2OlwiTnVtcGFkMFwiLDk3OlwiTnVtcGFkMVwiLDk4OlwiTnVtcGFkMlwiLDk5OlwiTnVtcGFkM1wiLDEwMDpcIk51bXBhZDRcIiwxMDE6XCJOdW1wYWQ1XCIsMTAyOlwiTnVtcGFkNlwiLDEwMzpcIk51bXBhZDdcIiwxMDQ6XCJOdW1wYWQ4XCIsMTA1OlwiTnVtcGFkOVwiLFwiLTEzXCI6XCJOdW1wYWRFbnRlclwiLDExMjpcIkYxXCIsMTEzOlwiRjJcIiwxMTQ6XCJGM1wiLDExNTpcIkY0XCIsMTE2OlwiRjVcIiwxMTc6XCJGNlwiLDExODpcIkY3XCIsMTE5OlwiRjhcIiwxMjA6XCJGOVwiLDEyMTpcIkYxMFwiLDEyMjpcIkYxMVwiLDEyMzpcIkYxMlwiLDE0NDpcIk51bWxvY2tcIiwxNDU6XCJTY3JvbGxsb2NrXCIsMTY6XCJTaGlmdFwiLDE3OlwiQ3RybFwiLDE4OlwiQWx0XCIsNDg6XCIwXCIsNDk6XCIxXCIsNTA6XCIyXCIsNTE6XCIzXCIsNTI6XCI0XCIsNTM6XCI1XCIsNTQ6XCI2XCIsNTU6XCI3XCIsNTY6XCI4XCIsNTc6XCI5XCIsNTk6XCI7XCIsNjE6XCI9XCIsNjU6XCJhXCIsNjY6XCJiXCIsNjc6XCJjXCIsNjg6XCJkXCIsNjk6XCJlXCIsNzA6XCJmXCIsNzE6XCJnXCIsNzI6XCJoXCIsNzM6XCJpXCIsNzQ6XCJqXCIsNzU6XCJrXCIsNzY6XCJsXCIsNzc6XCJtXCIsNzg6XCJuXCIsNzk6XCJvXCIsODA6XCJwXCIsODE6XCJxXCIsODI6XCJyXCIsODM6XCJzXCIsODQ6XCJ0XCIsODU6XCJ1XCIsODY6XCJ2XCIsODc6XCJ3XCIsODg6XCJ4XCIsODk6XCJ5XCIsOTA6XCJ6XCIsMTA3OlwiK1wiLDEwOTpcIi1cIiwxMTA6XCIuXCIsMTg2OlwiO1wiLDE4NzpcIj1cIiwxODg6XCIsXCIsMTg5OlwiLVwiLDE5MDpcIi5cIiwxOTE6XCIvXCIsMTkyOlwiYFwiLDIxOTpcIltcIiwyMjA6XCJcXFxcXCIsMjIxOlwiXVwiLDIyMjpcIidcIiwxMTE6XCIvXCIsMTA2OlwiKlwiLDE3MzpcIi1cIn0saT1bXTtpZihlLmN0cmxLZXkmJmkucHVzaChcImN0cmxcIiksZS5hbHRLZXkmJmkucHVzaChcImFsdFwiKSxlLnNoaWZ0S2V5JiZpLnB1c2goXCJzaGlmdFwiKSxpLnB1c2godFtlLndoaWNoXT90W2Uud2hpY2hdLnRvTG93ZXJDYXNlKCk6ZS53aGljaCksXCJzaGlmdC1zaGlmdFwiPT09KGk9aS5zb3J0KCkuam9pbihcIi1cIikudG9Mb3dlckNhc2UoKSl8fFwiY3RybC1jdHJsXCI9PT1pfHxcImFsdC1hbHRcIj09PWkpcmV0dXJuIG51bGw7dmFyIHI9dGhpcy5zZXR0aW5ncy5jb3JlLmtleWJvYXJkLHMsYTtmb3IocyBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkocykmJihhPVwiLVwiIT09KGE9cykmJlwiK1wiIT09YT8oYT1hLnJlcGxhY2UoXCItLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrK1wiLFwiLVBMVVNcIikucmVwbGFjZShcIi0rXCIsXCItUExVU1wiKSkuc3BsaXQoLy18XFwrLykuc29ydCgpLmpvaW4oXCItXCIpLnJlcGxhY2UoXCJNSU5VU1wiLFwiLVwiKS5yZXBsYWNlKFwiUExVU1wiLFwiK1wiKS50b0xvd2VyQ2FzZSgpOmEpPT09aSlyZXR1cm4gcltzXTtyZXR1cm4gbnVsbH0sdGVhcmRvd246ZnVuY3Rpb24oKXt0aGlzLnVuYmluZCgpLHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcImpzdHJlZVwiKS5yZW1vdmVEYXRhKFwianN0cmVlXCIpLmZpbmQoXCJbY2xhc3NePSdqc3RyZWUnXVwiKS5hZGRCYWNrKCkuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGFzc05hbWUucmVwbGFjZSgvanN0cmVlW14gXSp8JC9naSxcIlwiKX0pLHRoaXMuZWxlbWVudD1udWxsfSxiaW5kOmZ1bmN0aW9uKCl7dmFyIHM9XCJcIixhPW51bGwsdD0wO3RoaXMuZWxlbWVudC5vbihcImRibGNsaWNrLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDtpZihiLnNlbGVjdGlvbiYmYi5zZWxlY3Rpb24uZW1wdHkpYi5zZWxlY3Rpb24uZW1wdHkoKTtlbHNlIGlmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBlPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTt0cnl7ZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmNvbGxhcHNlKCl9Y2F0Y2goZSl7fX19KS5vbihcIm1vdXNlZG93bi5qc3RyZWVcIixmdW5jdGlvbihlKXtlLnRhcmdldD09PXRoaXMuZWxlbWVudFswXSYmKGUucHJldmVudERlZmF1bHQoKSx0PStuZXcgRGF0ZSl9LmJpbmQodGhpcykpLm9uKFwibW91c2Vkb3duLmpzdHJlZVwiLFwiLmpzdHJlZS1vY2xcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS1vY2xcIixmdW5jdGlvbihlKXt0aGlzLnRvZ2dsZV9ub2RlKGUudGFyZ2V0KX0uYmluZCh0aGlzKSkub24oXCJkYmxjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZSYmXCJpbnB1dFwiPT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiEwO3RoaXMuc2V0dGluZ3MuY29yZS5kYmxjbGlja190b2dnbGUmJnRoaXMudG9nZ2xlX25vZGUoZS50YXJnZXQpfS5iaW5kKHRoaXMpKS5vbihcImNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5jdXJyZW50VGFyZ2V0IT09Yi5hY3RpdmVFbGVtZW50JiZFKGUuY3VycmVudFRhcmdldCkudHJpZ2dlcihcImZvY3VzXCIpLHRoaXMuYWN0aXZhdGVfbm9kZShlLmN1cnJlbnRUYXJnZXQsZSl9LmJpbmQodGhpcykpLm9uKFwia2V5ZG93bi5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZSYmXCJpbnB1dFwiPT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiEwO3RoaXMuX2RhdGEuY29yZS5ydGwmJigzNz09PWUud2hpY2g/ZS53aGljaD0zOTozOT09PWUud2hpY2gmJihlLndoaWNoPTM3KSk7dmFyIHQ9dGhpcy5fa2JldmVudF90b19mdW5jKGUpO2lmKHQpe3ZhciBlPXQuY2FsbCh0aGlzLGUpO2lmKCExPT09ZXx8ITA9PT1lKXJldHVybiBlfX0uYmluZCh0aGlzKSkub24oXCJsb2FkX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0LnN0YXR1cyYmKHQubm9kZS5pZCE9PUUuanN0cmVlLnJvb3R8fHRoaXMuX2RhdGEuY29yZS5sb2FkZWR8fCh0aGlzLl9kYXRhLmNvcmUubG9hZGVkPSEwLHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pJiZ0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pLmlkKSx0aGlzLnRyaWdnZXIoXCJsb2FkZWRcIikpLHRoaXMuX2RhdGEuY29yZS5yZWFkeXx8c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHRoaXMuZWxlbWVudCYmIXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmZpbmQoXCIuanN0cmVlLWxvYWRpbmdcIikubGVuZ3RoKXtpZih0aGlzLl9kYXRhLmNvcmUucmVhZHk9ITAsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCl7aWYodGhpcy5zZXR0aW5ncy5jb3JlLmV4cGFuZF9zZWxlY3RlZF9vbmxvYWQpe2Zvcih2YXIgZT1bXSx0LGksdD0wLGk9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aDt0PGk7dCsrKWU9ZS5jb25jYXQodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbdF1dLnBhcmVudHMpO2Zvcih0PTAsaT0oZT1FLnZha2F0YS5hcnJheV91bmlxdWUoZSkpLmxlbmd0aDt0PGk7dCsrKXRoaXMub3Blbl9ub2RlKGVbdF0sITEsMCl9dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJyZWFkeVwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pfXRoaXMudHJpZ2dlcihcInJlYWR5XCIpfX0uYmluZCh0aGlzKSwwKSl9LmJpbmQodGhpcykpLm9uKFwia2V5cHJlc3MuanN0cmVlXCIsZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZSYmXCJpbnB1dFwiPT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiEwO2EmJmNsZWFyVGltZW91dChhKSxhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzPVwiXCJ9LDUwMCk7dmFyIGk9U3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKS50b0xvd2VyQ2FzZSgpLHQ9dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKSxlPXQuaW5kZXgoYi5hY3RpdmVFbGVtZW50KXx8MCxyPSExO2lmKDE8KHMrPWkpLmxlbmd0aCl7aWYodC5zbGljZShlKS5lYWNoKGZ1bmN0aW9uKGUsdCl7aWYoMD09PUUodCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzKSlyZXR1cm4gRSh0KS50cmlnZ2VyKFwiZm9jdXNcIiksIShyPSEwKX0uYmluZCh0aGlzKSkscilyZXR1cm47aWYodC5zbGljZSgwLGUpLmVhY2goZnVuY3Rpb24oZSx0KXtpZigwPT09RSh0KS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHMpKXJldHVybiBFKHQpLnRyaWdnZXIoXCJmb2N1c1wiKSwhKHI9ITApfS5iaW5kKHRoaXMpKSxyKXJldHVybn1uZXcgUmVnRXhwKFwiXlwiK2kucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLFwiXFxcXCQmXCIpK1wiKyRcIikudGVzdChzKSYmKHQuc2xpY2UoZSsxKS5lYWNoKGZ1bmN0aW9uKGUsdCl7aWYoRSh0KS50ZXh0KCkudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCk9PT1pKXJldHVybiBFKHQpLnRyaWdnZXIoXCJmb2N1c1wiKSwhKHI9ITApfS5iaW5kKHRoaXMpKSxyfHx0LnNsaWNlKDAsZSsxKS5lYWNoKGZ1bmN0aW9uKGUsdCl7aWYoRSh0KS50ZXh0KCkudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCk9PT1pKXJldHVybiBFKHQpLnRyaWdnZXIoXCJmb2N1c1wiKSwhKHI9ITApfS5iaW5kKHRoaXMpKSl9LmJpbmQodGhpcykpLm9uKFwiaW5pdC5qc3RyZWVcIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuc2V0dGluZ3MuY29yZS50aGVtZXM7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzPWUuZG90cyx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM9ZS5zdHJpcGVzLHRoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnM9ZS5pY29ucyx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzPWUuZWxsaXBzaXMsdGhpcy5zZXRfdGhlbWUoZS5uYW1lfHxcImRlZmF1bHRcIixlLnVybCksdGhpcy5zZXRfdGhlbWVfdmFyaWFudChlLnZhcmlhbnQpfS5iaW5kKHRoaXMpKS5vbihcImxvYWRpbmcuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzW3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz9cInNob3dfZG90c1wiOlwiaGlkZV9kb3RzXCJdKCksdGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zP1wic2hvd19pY29uc1wiOlwiaGlkZV9pY29uc1wiXSgpLHRoaXNbdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzP1wic2hvd19zdHJpcGVzXCI6XCJoaWRlX3N0cmlwZXNcIl0oKSx0aGlzW3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZWxsaXBzaXM/XCJzaG93X2VsbGlwc2lzXCI6XCJoaWRlX2VsbGlwc2lzXCJdKCl9LmJpbmQodGhpcykpLm9uKFwiYmx1ci5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9bnVsbCxFKGUuY3VycmVudFRhcmdldCkuZmlsdGVyKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLnRyaWdnZXIoXCJtb3VzZWxlYXZlXCIpLHRoaXMuZWxlbWVudC5hdHRyKFwidGFiaW5kZXhcIixcIjBcIiksRShlLmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIil9LmJpbmQodGhpcykpLm9uKFwiZm9jdXMuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0X25vZGUoZS5jdXJyZW50VGFyZ2V0KTt0JiYodC5pZHx8MD09PXQuaWQpJiYodGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9dC5pZCksdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWhvdmVyZWRcIikubm90KGUuY3VycmVudFRhcmdldCkudHJpZ2dlcihcIm1vdXNlbGVhdmVcIiksRShlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoXCJtb3VzZWVudGVyXCIpLHRoaXMuZWxlbWVudC5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLEUoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKFwidGFiaW5kZXhcIixcIjBcIil9LmJpbmQodGhpcykpLm9uKFwiZm9jdXMuanN0cmVlXCIsZnVuY3Rpb24oKXt2YXIgZTs1MDA8K25ldyBEYXRlLXQmJiF0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCYmdGhpcy5zZXR0aW5ncy5jb3JlLnJlc3RvcmVfZm9jdXMmJih0PTAsKGU9dGhpcy5nZXRfbm9kZSh0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSwhMCkpJiZlLmZpbmQoXCI+IC5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSl9LmJpbmQodGhpcykpLm9uKFwibW91c2VlbnRlci5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7dGhpcy5ob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCl9LmJpbmQodGhpcykpLm9uKFwibW91c2VsZWF2ZS5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7dGhpcy5kZWhvdmVyX25vZGUoZS5jdXJyZW50VGFyZ2V0KX0uYmluZCh0aGlzKSl9LHVuYmluZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5vZmYoXCIuanN0cmVlXCIpLEUoYikub2ZmKFwiLmpzdHJlZS1cIit0aGlzLl9pZCl9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXsoKHQ9dHx8e30pLmluc3RhbmNlPXRoaXMpLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoZS5yZXBsYWNlKFwiLmpzdHJlZVwiLFwiXCIpK1wiLmpzdHJlZVwiLHQpfSxnZXRfY29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudH0sZ2V0X2NvbnRhaW5lcl91bDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCl9LGdldF9zdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZXR0aW5ncy5jb3JlLnN0cmluZ3M7cmV0dXJuIEUudmFrYXRhLmlzX2Z1bmN0aW9uKHQpP3QuY2FsbCh0aGlzLGUpOnQmJnRbZV0/dFtlXTplfSxfZmlyc3RDaGlsZDpmdW5jdGlvbihlKXtlPWU/ZS5maXJzdENoaWxkOm51bGw7d2hpbGUobnVsbCE9PWUmJjEhPT1lLm5vZGVUeXBlKWU9ZS5uZXh0U2libGluZztyZXR1cm4gZX0sX25leHRTaWJsaW5nOmZ1bmN0aW9uKGUpe2U9ZT9lLm5leHRTaWJsaW5nOm51bGw7d2hpbGUobnVsbCE9PWUmJjEhPT1lLm5vZGVUeXBlKWU9ZS5uZXh0U2libGluZztyZXR1cm4gZX0sX3ByZXZpb3VzU2libGluZzpmdW5jdGlvbihlKXtlPWU/ZS5wcmV2aW91c1NpYmxpbmc6bnVsbDt3aGlsZShudWxsIT09ZSYmMSE9PWUubm9kZVR5cGUpZT1lLnByZXZpb3VzU2libGluZztyZXR1cm4gZX0sZ2V0X25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaTsoZT1lJiYoZS5pZHx8MD09PWUuaWQpP2UuaWQ6ZSlpbnN0YW5jZW9mIEUmJmUubGVuZ3RoJiZlWzBdLmlkJiYoZT1lWzBdLmlkKTt0cnl7aWYodGhpcy5fbW9kZWwuZGF0YVtlXSllPXRoaXMuX21vZGVsLmRhdGFbZV07ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmdGhpcy5fbW9kZWwuZGF0YVtlLnJlcGxhY2UoL14jLyxcIlwiKV0pZT10aGlzLl9tb2RlbC5kYXRhW2UucmVwbGFjZSgvXiMvLFwiXCIpXTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoaT1FKFwiI1wiK2UucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCkpLmxlbmd0aCYmdGhpcy5fbW9kZWwuZGF0YVtpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXSllPXRoaXMuX21vZGVsLmRhdGFbaS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmF0dHIoXCJpZFwiKV07ZWxzZSBpZigoaT10aGlzLmVsZW1lbnQuZmluZChlKSkubGVuZ3RoJiZ0aGlzLl9tb2RlbC5kYXRhW2kuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5hdHRyKFwiaWRcIildKWU9dGhpcy5fbW9kZWwuZGF0YVtpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXTtlbHNle2lmKCEoaT10aGlzLmVsZW1lbnQuZmluZChlKSkubGVuZ3RofHwhaS5oYXNDbGFzcyhcImpzdHJlZVwiKSlyZXR1cm4hMTtlPXRoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF19cmV0dXJuIGU9dD9lLmlkPT09RS5qc3RyZWUucm9vdD90aGlzLmVsZW1lbnQ6RShcIiNcIitlLmlkLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpOmV9Y2F0Y2goZSl7cmV0dXJuITF9fSxnZXRfcGF0aDpmdW5jdGlvbihlLHQsaSl7aWYoIShlPWUucGFyZW50cz9lOnRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdHx8IWUucGFyZW50cylyZXR1cm4hMTt2YXIgcixzLGE9W107Zm9yKGEucHVzaChpP2UuaWQ6ZS50ZXh0KSxyPTAscz1lLnBhcmVudHMubGVuZ3RoO3I8cztyKyspYS5wdXNoKGk/ZS5wYXJlbnRzW3JdOnRoaXMuZ2V0X3RleHQoZS5wYXJlbnRzW3JdKSk7cmV0dXJuIGE9YS5yZXZlcnNlKCkuc2xpY2UoMSksdD9hLmpvaW4odCk6YX0sZ2V0X25leHRfZG9tOmZ1bmN0aW9uKGUsdCl7dmFyIGk7aWYoKGU9dGhpcy5nZXRfbm9kZShlLCEwKSlbMF09PT10aGlzLmVsZW1lbnRbMF0pe2k9dGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KWk9dGhpcy5fbmV4dFNpYmxpbmcoaSk7cmV0dXJuISFpJiZFKGkpfWlmKCFlfHwhZS5sZW5ndGgpcmV0dXJuITE7aWYodCl7aT1lWzBdO2Rve2k9dGhpcy5fbmV4dFNpYmxpbmcoaSl9d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KTtyZXR1cm4hIWkmJkUoaSl9aWYoZS5oYXNDbGFzcyhcImpzdHJlZS1vcGVuXCIpKXtpPXRoaXMuX2ZpcnN0Q2hpbGQoZS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIilbMF0pO3doaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodClpPXRoaXMuX25leHRTaWJsaW5nKGkpO2lmKG51bGwhPT1pKXJldHVybiBFKGkpfWk9ZVswXTtkb3tpPXRoaXMuX25leHRTaWJsaW5nKGkpfXdoaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodCk7cmV0dXJuIG51bGwhPT1pP0UoaSk6ZS5wYXJlbnRzVW50aWwoXCIuanN0cmVlXCIsXCIuanN0cmVlLW5vZGVcIikubmV4dEFsbChcIi5qc3RyZWUtbm9kZTp2aXNpYmxlXCIpLmZpcnN0KCl9LGdldF9wcmV2X2RvbTpmdW5jdGlvbihlLHQpe3ZhciBpO2lmKChlPXRoaXMuZ2V0X25vZGUoZSwhMCkpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtpPXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmxhc3RDaGlsZDt3aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpaT10aGlzLl9wcmV2aW91c1NpYmxpbmcoaSk7cmV0dXJuISFpJiZFKGkpfWlmKCFlfHwhZS5sZW5ndGgpcmV0dXJuITE7aWYodCl7aT1lWzBdO2Rve2k9dGhpcy5fcHJldmlvdXNTaWJsaW5nKGkpfXdoaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodCk7cmV0dXJuISFpJiZFKGkpfWk9ZVswXTtkb3tpPXRoaXMuX3ByZXZpb3VzU2libGluZyhpKX13aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpO2lmKG51bGw9PT1pKXJldHVybiEoIShpPWVbMF0ucGFyZW50Tm9kZS5wYXJlbnROb2RlKXx8IWkuY2xhc3NOYW1lfHwtMT09PWkuY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtbm9kZVwiKSkmJkUoaSk7ZT1FKGkpO3doaWxlKGUuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSllPWUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCkuY2hpbGRyZW4oXCIuanN0cmVlLW5vZGU6dmlzaWJsZTpsYXN0XCIpO3JldHVybiBlfSxnZXRfcGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJmUucGFyZW50fSxnZXRfY2hpbGRyZW5fZG9tOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSwhMCkpWzBdPT09dGhpcy5lbGVtZW50WzBdP3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpOiEoIWV8fCFlLmxlbmd0aCkmJmUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpfSxpc19wYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dGhpcy5nZXRfbm9kZShlKSkmJighMT09PWUuc3RhdGUubG9hZGVkfHwwPGUuY2hpbGRyZW4ubGVuZ3RoKX0saXNfbG9hZGVkOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLnN0YXRlLmxvYWRlZH0saXNfbG9hZGluZzpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZSYmZS5zdGF0ZS5sb2FkaW5nfSxpc19vcGVuOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLnN0YXRlLm9wZW5lZH0saXNfY2xvc2VkOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZ0aGlzLmlzX3BhcmVudChlKSYmIWUuc3RhdGUub3BlbmVkfSxpc19sZWFmOmZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLmlzX3BhcmVudChlKX0sbG9hZF9ub2RlOmZ1bmN0aW9uKG4sZCl7dmFyIGU9dGhpcy5nZXRfbm9kZShuLCEwKSx0LGkscixzLGE7aWYoRS52YWthdGEuaXNfYXJyYXkobikpcmV0dXJuIHRoaXMuX2xvYWRfbm9kZXMobi5zbGljZSgpLGQpLCEwO2lmKCEobj10aGlzLmdldF9ub2RlKG4pKSlyZXR1cm4gZCYmZC5jYWxsKHRoaXMsbiwhMSksITE7aWYobi5zdGF0ZS5sb2FkZWQpe2ZvcihuLnN0YXRlLmxvYWRlZD0hMSxyPTAscz1uLnBhcmVudHMubGVuZ3RoO3I8cztyKyspdGhpcy5fbW9kZWwuZGF0YVtuLnBhcmVudHNbcl1dLmNoaWxkcmVuX2Q9RS52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX21vZGVsLmRhdGFbbi5wYXJlbnRzW3JdXS5jaGlsZHJlbl9kLGZ1bmN0aW9uKGUpe3JldHVybi0xPT09RS5pbkFycmF5KGUsbi5jaGlsZHJlbl9kKX0pO2Zvcih0PTAsaT1uLmNoaWxkcmVuX2QubGVuZ3RoO3Q8aTt0KyspdGhpcy5fbW9kZWwuZGF0YVtuLmNoaWxkcmVuX2RbdF1dLnN0YXRlLnNlbGVjdGVkJiYoYT0hMCksZGVsZXRlIHRoaXMuX21vZGVsLmRhdGFbbi5jaGlsZHJlbl9kW3RdXTthJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPUUudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1FLmluQXJyYXkoZSxuLmNoaWxkcmVuX2QpfSkpLG4uY2hpbGRyZW49W10sbi5jaGlsZHJlbl9kPVtdLGEmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwibG9hZF9ub2RlXCIsbm9kZTpuLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pfXJldHVybiBuLnN0YXRlLmZhaWxlZD0hMSxuLnN0YXRlLmxvYWRpbmc9ITAsKG4uaWQhPT1FLmpzdHJlZS5yb290P2UuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTplKS5hdHRyKFwiYXJpYS1idXN5XCIsITApLGUuYWRkQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKSx0aGlzLl9sb2FkX25vZGUobixmdW5jdGlvbihlKXsobj10aGlzLl9tb2RlbC5kYXRhW24uaWRdKS5zdGF0ZS5sb2FkaW5nPSExLG4uc3RhdGUubG9hZGVkPWUsbi5zdGF0ZS5mYWlsZWQ9IW4uc3RhdGUubG9hZGVkO2Zvcih2YXIgdD10aGlzLmdldF9ub2RlKG4sITApLGk9MCxyPTAscz10aGlzLl9tb2RlbC5kYXRhLGE9ITEsaT0wLHI9bi5jaGlsZHJlbi5sZW5ndGg7aTxyO2krKylpZihzW24uY2hpbGRyZW5baV1dJiYhc1tuLmNoaWxkcmVuW2ldXS5zdGF0ZS5oaWRkZW4pe2E9ITA7YnJlYWt9bi5zdGF0ZS5sb2FkZWQmJnQmJnQubGVuZ3RoJiYodC5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbG9zZWQganN0cmVlLW9wZW4ganN0cmVlLWxlYWZcIiksYT9cIiNcIiE9PW4uaWQmJnQuYWRkQ2xhc3Mobi5zdGF0ZS5vcGVuZWQ/XCJqc3RyZWUtb3BlblwiOlwianN0cmVlLWNsb3NlZFwiKTp0LmFkZENsYXNzKFwianN0cmVlLWxlYWZcIikpLChuLmlkIT09RS5qc3RyZWUucm9vdD90LmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIik6dCkuYXR0cihcImFyaWEtYnVzeVwiLCExKSx0LnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIiksdGhpcy50cmlnZ2VyKFwibG9hZF9ub2RlXCIse25vZGU6bixzdGF0dXM6ZX0pLGQmJmQuY2FsbCh0aGlzLG4sZSl9LmJpbmQodGhpcykpLCEwfSxfbG9hZF9ub2RlczpmdW5jdGlvbihlLHQsaSxyKXtmb3IodmFyIHM9ITAsYT1mdW5jdGlvbigpe3RoaXMuX2xvYWRfbm9kZXMoZSx0LCEwKX0sbj10aGlzLl9tb2RlbC5kYXRhLGQsbyxjPVtdLGQ9MCxvPWUubGVuZ3RoO2Q8bztkKyspbltlW2RdXSYmKCFuW2VbZF1dLnN0YXRlLmxvYWRlZCYmIW5bZVtkXV0uc3RhdGUuZmFpbGVkfHwhaSYmcikmJih0aGlzLmlzX2xvYWRpbmcoZVtkXSl8fHRoaXMubG9hZF9ub2RlKGVbZF0sYSkscz0hMSk7aWYocyl7Zm9yKGQ9MCxvPWUubGVuZ3RoO2Q8bztkKyspbltlW2RdXSYmbltlW2RdXS5zdGF0ZS5sb2FkZWQmJmMucHVzaChlW2RdKTt0JiYhdC5kb25lJiYodC5jYWxsKHRoaXMsYyksdC5kb25lPSEwKX19LGxvYWRfYWxsOmZ1bmN0aW9uKGUsdCl7aWYoZT1lfHxFLmpzdHJlZS5yb290LCEoZT10aGlzLmdldF9ub2RlKGUpKSlyZXR1cm4hMTt2YXIgaT1bXSxyPXRoaXMuX21vZGVsLmRhdGEscz1yW2UuaWRdLmNoaWxkcmVuX2QsYSxuO2ZvcihlLnN0YXRlJiYhZS5zdGF0ZS5sb2FkZWQmJmkucHVzaChlLmlkKSxhPTAsbj1zLmxlbmd0aDthPG47YSsrKXJbc1thXV0mJnJbc1thXV0uc3RhdGUmJiFyW3NbYV1dLnN0YXRlLmxvYWRlZCYmaS5wdXNoKHNbYV0pO2kubGVuZ3RoP3RoaXMuX2xvYWRfbm9kZXMoaSxmdW5jdGlvbigpe3RoaXMubG9hZF9hbGwoZSx0KX0pOih0JiZ0LmNhbGwodGhpcyxlKSx0aGlzLnRyaWdnZXIoXCJsb2FkX2FsbFwiLHtub2RlOmV9KSl9LF9sb2FkX25vZGU6ZnVuY3Rpb24ocyxhKXt2YXIgZT10aGlzLnNldHRpbmdzLmNvcmUuZGF0YSx0LG49ZnVuY3Rpb24gZSgpe3JldHVybiAzIT09dGhpcy5ub2RlVHlwZSYmOCE9PXRoaXMubm9kZVR5cGV9O3JldHVybiBlP0UudmFrYXRhLmlzX2Z1bmN0aW9uKGUpP2UuY2FsbCh0aGlzLHMsZnVuY3Rpb24oZSl7ITE9PT1lP2EuY2FsbCh0aGlzLCExKTp0aGlzW1wic3RyaW5nXCI9PXR5cGVvZiBlP1wiX2FwcGVuZF9odG1sX2RhdGFcIjpcIl9hcHBlbmRfanNvbl9kYXRhXCJdKHMsXCJzdHJpbmdcIj09dHlwZW9mIGU/RShFLnBhcnNlSFRNTChlKSkuZmlsdGVyKG4pOmUsZnVuY3Rpb24oZSl7YS5jYWxsKHRoaXMsZSl9KX0uYmluZCh0aGlzKSk6XCJvYmplY3RcIj09dHlwZW9mIGU/ZS51cmw/KGU9RS5leHRlbmQoITAse30sZSksRS52YWthdGEuaXNfZnVuY3Rpb24oZS51cmwpJiYoZS51cmw9ZS51cmwuY2FsbCh0aGlzLHMpKSxFLnZha2F0YS5pc19mdW5jdGlvbihlLmRhdGEpJiYoZS5kYXRhPWUuZGF0YS5jYWxsKHRoaXMscykpLEUuYWpheChlKS5kb25lKGZ1bmN0aW9uKGUsdCxpKXt2YXIgcj1pLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO3JldHVybiByJiYtMSE9PXIuaW5kZXhPZihcImpzb25cIil8fFwib2JqZWN0XCI9PXR5cGVvZiBlP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEocyxlLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6ciYmLTEhPT1yLmluZGV4T2YoXCJodG1sXCIpfHxcInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLl9hcHBlbmRfaHRtbF9kYXRhKHMsRShFLnBhcnNlSFRNTChlKSkuZmlsdGVyKG4pLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImFqYXhcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA0XCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgbm9kZVwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOnMuaWQseGhyOml9KX0sdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksYS5jYWxsKHRoaXMsITEpKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbihlKXt0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJhamF4XCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNFwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpzLmlkLHhocjplfSl9LGEuY2FsbCh0aGlzLCExKSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKX0uYmluZCh0aGlzKSkpOih0PUUudmFrYXRhLmlzX2FycmF5KGUpP0UuZXh0ZW5kKCEwLFtdLGUpOkUuaXNQbGFpbk9iamVjdChlKT9FLmV4dGVuZCghMCx7fSxlKTplLHMuaWQ9PT1FLmpzdHJlZS5yb290P3RoaXMuX2FwcGVuZF9qc29uX2RhdGEocyx0LGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcIm5vZGF0YVwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDVcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBub2RlXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7aWQ6cy5pZH0pfSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSxhLmNhbGwodGhpcywhMSkpKTpcInN0cmluZ1wiPT10eXBlb2YgZT9zLmlkPT09RS5qc3RyZWUucm9vdD90aGlzLl9hcHBlbmRfaHRtbF9kYXRhKHMsRShFLnBhcnNlSFRNTChlKSkuZmlsdGVyKG4pLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcIm5vZGF0YVwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDZcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBub2RlXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7aWQ6cy5pZH0pfSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSxhLmNhbGwodGhpcywhMSkpOmEuY2FsbCh0aGlzLCExKTpzLmlkPT09RS5qc3RyZWUucm9vdD90aGlzLl9hcHBlbmRfaHRtbF9kYXRhKHMsdGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sLmNsb25lKCEwKSxmdW5jdGlvbihlKXthLmNhbGwodGhpcyxlKX0pOmEuY2FsbCh0aGlzLCExKX0sX25vZGVfY2hhbmdlZDpmdW5jdGlvbihlKXsoZT10aGlzLmdldF9ub2RlKGUpKSYmLTE9PT1FLmluQXJyYXkoZS5pZCx0aGlzLl9tb2RlbC5jaGFuZ2VkKSYmdGhpcy5fbW9kZWwuY2hhbmdlZC5wdXNoKGUuaWQpfSxfYXBwZW5kX2h0bWxfZGF0YTpmdW5jdGlvbihlLHQsaSl7KGU9dGhpcy5nZXRfbm9kZShlKSkuY2hpbGRyZW49W10sZS5jaGlsZHJlbl9kPVtdO3ZhciB0PXQuaXMoXCJ1bFwiKT90LmNoaWxkcmVuKCk6dCxyPWUuaWQscz1bXSxhPVtdLG49dGhpcy5fbW9kZWwuZGF0YSxkPW5bcl0sZT10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoLG8sYyxsO2Zvcih0LmVhY2goZnVuY3Rpb24oZSx0KXsobz10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2h0bWwoRSh0KSxyLGQucGFyZW50cy5jb25jYXQoKSkpJiYocy5wdXNoKG8pLGEucHVzaChvKSxuW29dLmNoaWxkcmVuX2QubGVuZ3RoJiYoYT1hLmNvbmNhdChuW29dLmNoaWxkcmVuX2QpKSl9LmJpbmQodGhpcykpLGQuY2hpbGRyZW49cyxkLmNoaWxkcmVuX2Q9YSxjPTAsbD1kLnBhcmVudHMubGVuZ3RoO2M8bDtjKyspbltkLnBhcmVudHNbY11dLmNoaWxkcmVuX2Q9bltkLnBhcmVudHNbY11dLmNoaWxkcmVuX2QuY29uY2F0KGEpO3RoaXMudHJpZ2dlcihcIm1vZGVsXCIse25vZGVzOmEscGFyZW50OnJ9KSxyIT09RS5qc3RyZWUucm9vdD8odGhpcy5fbm9kZV9jaGFuZ2VkKHIpLHRoaXMucmVkcmF3KCkpOih0aGlzLmdldF9jb250YWluZXJfdWwoKS5jaGlsZHJlbihcIi5qc3RyZWUtaW5pdGlhbC1ub2RlXCIpLnJlbW92ZSgpLHRoaXMucmVkcmF3KCEwKSksdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCE9PWUmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwibW9kZWxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KSxpLmNhbGwodGhpcywhMCl9LF9hcHBlbmRfanNvbl9kYXRhOmZ1bmN0aW9uKGUsdCxvLGkpe2lmKG51bGwhPT10aGlzLmVsZW1lbnQpeyhlPXRoaXMuZ2V0X25vZGUoZSkpLmNoaWxkcmVuPVtdLGUuY2hpbGRyZW5fZD1bXSx0LmQmJlwic3RyaW5nXCI9PXR5cGVvZih0PXQuZCkmJih0PUpTT04ucGFyc2UodCkpLEUudmFrYXRhLmlzX2FycmF5KHQpfHwodD1bdF0pO3ZhciByPW51bGwscz17ZGY6dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxkYXQ6dCxwYXI6ZS5pZCxtOnRoaXMuX21vZGVsLmRhdGEsdF9pZDp0aGlzLl9pZCx0X2NudDp0aGlzLl9jbnQsc2VsOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0sdj10aGlzLGE9ZnVuY3Rpb24oZSxjKXt2YXIgdD0oZT1lLmRhdGE/ZS5kYXRhOmUpLmRhdCxpPWUucGFyLHI9W10scz1bXSxsPVtdLGg9ZS5kZixfPWUudF9pZCxnPWUudF9jbnQsdT1lLm0sYT11W2ldLGU9ZS5zZWwsbixkLG8sZixwPWZ1bmN0aW9uKGUsdCxpKXtpPWk/aS5jb25jYXQoKTpbXSx0JiZpLnVuc2hpZnQodCk7dmFyIHI9ZS5pZC50b1N0cmluZygpLHMsYSxuLGQsbz17aWQ6cix0ZXh0OmUudGV4dHx8XCJcIixpY29uOmUuaWNvbj09PWN8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46ZS5jaGlsZHJlbnx8W10sY2hpbGRyZW5fZDplLmNoaWxkcmVuX2R8fFtdLGRhdGE6ZS5kYXRhLHN0YXRlOnt9LGxpX2F0dHI6e2lkOiExfSxhX2F0dHI6e2hyZWY6XCIjXCJ9LG9yaWdpbmFsOiExfTtmb3IocyBpbiBoKWguaGFzT3duUHJvcGVydHkocykmJihvLnN0YXRlW3NdPWhbc10pO2lmKGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYoby5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksby5pY29uIT09YyYmbnVsbCE9PW8uaWNvbiYmXCJcIiE9PW8uaWNvbnx8KG8uaWNvbj0hMCksZSYmZS5kYXRhJiYoby5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IocyBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkocykmJihvLnN0YXRlW3NdPWUuZGF0YS5qc3RyZWVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IocyBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KHMpJiYoby5saV9hdHRyW3NdPWUubGlfYXR0cltzXSk7aWYoby5saV9hdHRyLmlkfHwoby5saV9hdHRyLmlkPXIpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFfYXR0cilmb3IocyBpbiBlLmFfYXR0cillLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uYV9hdHRyW3NdPWUuYV9hdHRyW3NdKTtmb3IoZSYmZS5jaGlsZHJlbiYmITA9PT1lLmNoaWxkcmVuJiYoby5zdGF0ZS5sb2FkZWQ9ITEsby5jaGlsZHJlbj1bXSxvLmNoaWxkcmVuX2Q9W10pLHM9MCxhPSh1W28uaWRdPW8pLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW49cCh1W28uY2hpbGRyZW5bc11dLG8uaWQsaSksZD11W25dLG8uY2hpbGRyZW5fZC5wdXNoKG4pLGQuY2hpbGRyZW5fZC5sZW5ndGgmJihvLmNoaWxkcmVuX2Q9by5jaGlsZHJlbl9kLmNvbmNhdChkLmNoaWxkcmVuX2QpKTtyZXR1cm4gZGVsZXRlIGUuZGF0YSxkZWxldGUgZS5jaGlsZHJlbix1W28uaWRdLm9yaWdpbmFsPWUsby5zdGF0ZS5zZWxlY3RlZCYmbC5wdXNoKG8uaWQpLG8uaWR9LG09ZnVuY3Rpb24oZSx0LGkpe2k9aT9pLmNvbmNhdCgpOltdLHQmJmkudW5zaGlmdCh0KTt2YXIgcj0hMSxzLGEsbixkLG87ZG97cj1cImpcIitfK1wiX1wiKyArK2d9d2hpbGUodVtyXSk7Zm9yKHMgaW4gbz17aWQ6ITEsdGV4dDpcInN0cmluZ1wiPT10eXBlb2YgZT9lOlwiXCIsaWNvbjpcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5pY29uPT09Y3x8ZS5pY29uLHBhcmVudDp0LHBhcmVudHM6aSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX0saCloLmhhc093blByb3BlcnR5KHMpJiYoby5zdGF0ZVtzXT1oW3NdKTtpZihlJiYoZS5pZHx8MD09PWUuaWQpJiYoby5pZD1lLmlkLnRvU3RyaW5nKCkpLGUmJmUudGV4dCYmKG8udGV4dD1lLnRleHQpLGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYoby5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksby5pY29uIT09YyYmbnVsbCE9PW8uaWNvbiYmXCJcIiE9PW8uaWNvbnx8KG8uaWNvbj0hMCksZSYmZS5kYXRhJiYoby5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IocyBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkocykmJihvLnN0YXRlW3NdPWUuZGF0YS5qc3RyZWVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IocyBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KHMpJiYoby5saV9hdHRyW3NdPWUubGlfYXR0cltzXSk7aWYoby5saV9hdHRyLmlkJiYhby5pZCYmMCE9PW8uaWQmJihvLmlkPW8ubGlfYXR0ci5pZC50b1N0cmluZygpKSxvLmlkfHwwPT09by5pZHx8KG8uaWQ9ciksby5saV9hdHRyLmlkfHwoby5saV9hdHRyLmlkPW8uaWQpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFfYXR0cilmb3IocyBpbiBlLmFfYXR0cillLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uYV9hdHRyW3NdPWUuYV9hdHRyW3NdKTtpZihlJiZlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCl7Zm9yKHM9MCxhPWUuY2hpbGRyZW4ubGVuZ3RoO3M8YTtzKyspbj1tKGUuY2hpbGRyZW5bc10sby5pZCxpKSxkPXVbbl0sby5jaGlsZHJlbi5wdXNoKG4pLGQuY2hpbGRyZW5fZC5sZW5ndGgmJihvLmNoaWxkcmVuX2Q9by5jaGlsZHJlbl9kLmNvbmNhdChkLmNoaWxkcmVuX2QpKTtvLmNoaWxkcmVuX2Q9by5jaGlsZHJlbl9kLmNvbmNhdChvLmNoaWxkcmVuKX1yZXR1cm4gZSYmZS5jaGlsZHJlbiYmITA9PT1lLmNoaWxkcmVuJiYoby5zdGF0ZS5sb2FkZWQ9ITEsby5jaGlsZHJlbj1bXSxvLmNoaWxkcmVuX2Q9W10pLGRlbGV0ZSBlLmRhdGEsZGVsZXRlIGUuY2hpbGRyZW4sby5vcmlnaW5hbD1lLCh1W28uaWRdPW8pLnN0YXRlLnNlbGVjdGVkJiZsLnB1c2goby5pZCksby5pZH07aWYodC5sZW5ndGgmJnRbMF0uaWQhPT1jJiZ0WzBdLnBhcmVudCE9PWMpe2ZvcihkPTAsbz10Lmxlbmd0aDtkPG87ZCsrKXRbZF0uY2hpbGRyZW58fCh0W2RdLmNoaWxkcmVuPVtdKSx0W2RdLnN0YXRlfHwodFtkXS5zdGF0ZT17fSksdVt0W2RdLmlkLnRvU3RyaW5nKCldPXRbZF07Zm9yKGQ9MCxvPXQubGVuZ3RoO2Q8bztkKyspdVt0W2RdLnBhcmVudC50b1N0cmluZygpXT8odVt0W2RdLnBhcmVudC50b1N0cmluZygpXS5jaGlsZHJlbi5wdXNoKHRbZF0uaWQudG9TdHJpbmcoKSksYS5jaGlsZHJlbl9kLnB1c2godFtkXS5pZC50b1N0cmluZygpKSk6dm9pZCAwIT09diYmKHYuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcInBhcnNlXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wN1wiLHJlYXNvbjpcIk5vZGUgd2l0aCBpbnZhbGlkIHBhcmVudFwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOnRbZF0uaWQudG9TdHJpbmcoKSxwYXJlbnQ6dFtkXS5wYXJlbnQudG9TdHJpbmcoKX0pfSx2LnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh2LHYuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSk7Zm9yKGQ9MCxvPWEuY2hpbGRyZW4ubGVuZ3RoO2Q8bztkKyspbj1wKHVbYS5jaGlsZHJlbltkXV0saSxhLnBhcmVudHMuY29uY2F0KCkpLHMucHVzaChuKSx1W25dLmNoaWxkcmVuX2QubGVuZ3RoJiYocz1zLmNvbmNhdCh1W25dLmNoaWxkcmVuX2QpKTtmb3IoZD0wLG89YS5wYXJlbnRzLmxlbmd0aDtkPG87ZCsrKXVbYS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kPXVbYS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kLmNvbmNhdChzKTtmPXtjbnQ6Zyxtb2Q6dSxzZWw6ZSxwYXI6aSxkcGM6cyxhZGQ6bH19ZWxzZXtmb3IoZD0wLG89dC5sZW5ndGg7ZDxvO2QrKykobj1tKHRbZF0saSxhLnBhcmVudHMuY29uY2F0KCkpKSYmKHIucHVzaChuKSxzLnB1c2gobiksdVtuXS5jaGlsZHJlbl9kLmxlbmd0aCYmKHM9cy5jb25jYXQodVtuXS5jaGlsZHJlbl9kKSkpO2ZvcihhLmNoaWxkcmVuPXIsYS5jaGlsZHJlbl9kPXMsZD0wLG89YS5wYXJlbnRzLmxlbmd0aDtkPG87ZCsrKXVbYS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kPXVbYS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kLmNvbmNhdChzKTtmPXtjbnQ6Zyxtb2Q6dSxzZWw6ZSxwYXI6aSxkcGM6cyxhZGQ6bH19aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmdm9pZCAwIT09d2luZG93LmRvY3VtZW50KXJldHVybiBmO3Bvc3RNZXNzYWdlKGYpfSxuPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7dmFyIGkscjtmb3IoaSBpbiB0aGlzLl9jbnQ9ZS5jbnQscj10aGlzLl9tb2RlbC5kYXRhKXIuaGFzT3duUHJvcGVydHkoaSkmJnJbaV0uc3RhdGUmJnJbaV0uc3RhdGUubG9hZGluZyYmZS5tb2RbaV0mJihlLm1vZFtpXS5zdGF0ZS5sb2FkaW5nPSEwKTtpZih0aGlzLl9tb2RlbC5kYXRhPWUubW9kLHQpe3ZhciBzLGE9ZS5hZGQsbj1lLnNlbCxkPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpLHI9dGhpcy5fbW9kZWwuZGF0YTtpZihuLmxlbmd0aCE9PWQubGVuZ3RofHxFLnZha2F0YS5hcnJheV91bmlxdWUobi5jb25jYXQoZCkpLmxlbmd0aCE9PW4ubGVuZ3RoKXtmb3IoaT0wLHM9bi5sZW5ndGg7aTxzO2krKyktMT09PUUuaW5BcnJheShuW2ldLGEpJiYtMT09PUUuaW5BcnJheShuW2ldLGQpJiYocltuW2ldXS5zdGF0ZS5zZWxlY3RlZD0hMSk7Zm9yKGk9MCxzPWQubGVuZ3RoO2k8cztpKyspLTE9PT1FLmluQXJyYXkoZFtpXSxuKSYmKHJbZFtpXV0uc3RhdGUuc2VsZWN0ZWQ9ITApfX1lLmFkZC5sZW5ndGgmJih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChlLmFkZCkpLHRoaXMudHJpZ2dlcihcIm1vZGVsXCIse25vZGVzOmUuZHBjLHBhcmVudDplLnBhcn0pLGUucGFyIT09RS5qc3RyZWUucm9vdD8odGhpcy5fbm9kZV9jaGFuZ2VkKGUucGFyKSx0aGlzLnJlZHJhdygpKTp0aGlzLnJlZHJhdyghMCksZS5hZGQubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcIm1vZGVsXCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSksIXQmJmM/YyhmdW5jdGlvbigpe28uY2FsbCh2LCEwKX0pOm8uY2FsbCh2LCEwKX19O2lmKHRoaXMuc2V0dGluZ3MuY29yZS53b3JrZXImJndpbmRvdy5CbG9iJiZ3aW5kb3cuVVJMJiZ3aW5kb3cuV29ya2VyKXRyeXtudWxsPT09dGhpcy5fd3JrJiYodGhpcy5fd3JrPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyB3aW5kb3cuQmxvYihbXCJzZWxmLm9ubWVzc2FnZSA9IFwiK2EudG9TdHJpbmcoKV0se3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIn0pKSksIXRoaXMuX2RhdGEuY29yZS53b3JraW5nfHxpPyh0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMCwocj1uZXcgd2luZG93Lldvcmtlcih0aGlzLl93cmspKS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7bi5jYWxsKHRoaXMsZS5kYXRhLCEwKTt0cnl7ci50ZXJtaW5hdGUoKSxyPW51bGx9Y2F0Y2goZSl7fXRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExfS5iaW5kKHRoaXMpLHIub25lcnJvcj1mdW5jdGlvbihlKXtuLmNhbGwodGhpcyxhKHMpLCExKSx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLmxlbmd0aD90aGlzLl9hcHBlbmRfanNvbl9kYXRhLmFwcGx5KHRoaXMsdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5zaGlmdCgpKTp0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMX0uYmluZCh0aGlzKSxzLnBhcj9yLnBvc3RNZXNzYWdlKHMpOnRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExKTp0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnB1c2goW2UsdCxvLCEwXSl9Y2F0Y2goZSl7bi5jYWxsKHRoaXMsYShzKSwhMSksdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5sZW5ndGg/dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUuc2hpZnQoKSk6dGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITF9ZWxzZSBuLmNhbGwodGhpcyxhKHMpLCExKX19LF9wYXJzZV9tb2RlbF9mcm9tX2h0bWw6ZnVuY3Rpb24oZSx0LGkpe2k9aT9bXS5jb25jYXQoaSk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByLHMsYT10aGlzLl9tb2RlbC5kYXRhLG49e2lkOiExLHRleHQ6ITEsaWNvbjohMCxwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxkYXRhOm51bGwsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9LGQsdCxvO2ZvcihkIGluIHRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUpdGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZS5oYXNPd25Qcm9wZXJ0eShkKSYmKG4uc3RhdGVbZF09dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZVtkXSk7aWYodD1FLnZha2F0YS5hdHRyaWJ1dGVzKGUsITApLEUuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7cmV0dXJuISh0PUUudmFrYXRhLnRyaW0odCkpLmxlbmd0aHx8KG4ubGlfYXR0cltlXT10LHZvaWQoXCJpZFwiPT09ZSYmKG4uaWQ9dC50b1N0cmluZygpKSkpfSksKHQ9ZS5jaGlsZHJlbihcImFcIikuZmlyc3QoKSkubGVuZ3RoJiYodD1FLnZha2F0YS5hdHRyaWJ1dGVzKHQsITApLEUuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7KHQ9RS52YWthdGEudHJpbSh0KSkubGVuZ3RoJiYobi5hX2F0dHJbZV09dCl9KSksKHQ9KGUuY2hpbGRyZW4oXCJhXCIpLmZpcnN0KCkubGVuZ3RoP2UuY2hpbGRyZW4oXCJhXCIpLmZpcnN0KCk6ZSkuY2xvbmUoKSkuY2hpbGRyZW4oXCJpbnMsIGksIHVsXCIpLnJlbW92ZSgpLHQ9dC5odG1sKCksdD1FKFwiPGRpdj48L2Rpdj5cIikuaHRtbCh0KSxuLnRleHQ9dGhpcy5zZXR0aW5ncy5jb3JlLmZvcmNlX3RleHQ/dC50ZXh0KCk6dC5odG1sKCksdD1lLmRhdGEoKSxuLmRhdGE9dD9FLmV4dGVuZCghMCx7fSx0KTpudWxsLG4uc3RhdGUub3BlbmVkPWUuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSxuLnN0YXRlLnNlbGVjdGVkPWUuY2hpbGRyZW4oXCJhXCIpLmhhc0NsYXNzKFwianN0cmVlLWNsaWNrZWRcIiksbi5zdGF0ZS5kaXNhYmxlZD1lLmNoaWxkcmVuKFwiYVwiKS5oYXNDbGFzcyhcImpzdHJlZS1kaXNhYmxlZFwiKSxuLmRhdGEmJm4uZGF0YS5qc3RyZWUpZm9yKGQgaW4gbi5kYXRhLmpzdHJlZSluLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KGQpJiYobi5zdGF0ZVtkXT1uLmRhdGEuanN0cmVlW2RdKTsodD1lLmNoaWxkcmVuKFwiYVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpKS5sZW5ndGgmJihuLmljb249IXQuaGFzQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKSYmdC5hdHRyKFwicmVsXCIpKSxuLnN0YXRlLmljb24hPT1QJiYobi5pY29uPW4uc3RhdGUuaWNvbiksbi5pY29uIT09UCYmbnVsbCE9PW4uaWNvbiYmXCJcIiE9PW4uaWNvbnx8KG4uaWNvbj0hMCksdD1lLmNoaWxkcmVuKFwidWxcIikuY2hpbGRyZW4oXCJsaVwiKTtkb3tvPVwialwiK3RoaXMuX2lkK1wiX1wiKyArK3RoaXMuX2NudH13aGlsZShhW29dKTtyZXR1cm4gbi5pZD1uLmxpX2F0dHIuaWQ/bi5saV9hdHRyLmlkLnRvU3RyaW5nKCk6byx0Lmxlbmd0aD8odC5lYWNoKGZ1bmN0aW9uKGUsdCl7cj10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2h0bWwoRSh0KSxuLmlkLGkpLHM9dGhpcy5fbW9kZWwuZGF0YVtyXSxuLmNoaWxkcmVuLnB1c2gocikscy5jaGlsZHJlbl9kLmxlbmd0aCYmKG4uY2hpbGRyZW5fZD1uLmNoaWxkcmVuX2QuY29uY2F0KHMuY2hpbGRyZW5fZCkpfS5iaW5kKHRoaXMpKSxuLmNoaWxkcmVuX2Q9bi5jaGlsZHJlbl9kLmNvbmNhdChuLmNoaWxkcmVuKSk6ZS5oYXNDbGFzcyhcImpzdHJlZS1jbG9zZWRcIikmJihuLnN0YXRlLmxvYWRlZD0hMSksbi5saV9hdHRyLmNsYXNzJiYobi5saV9hdHRyLmNsYXNzPW4ubGlfYXR0ci5jbGFzcy5yZXBsYWNlKFwianN0cmVlLWNsb3NlZFwiLFwiXCIpLnJlcGxhY2UoXCJqc3RyZWUtb3BlblwiLFwiXCIpKSxuLmFfYXR0ci5jbGFzcyYmKG4uYV9hdHRyLmNsYXNzPW4uYV9hdHRyLmNsYXNzLnJlcGxhY2UoXCJqc3RyZWUtY2xpY2tlZFwiLFwiXCIpLnJlcGxhY2UoXCJqc3RyZWUtZGlzYWJsZWRcIixcIlwiKSksKGFbbi5pZF09bikuc3RhdGUuc2VsZWN0ZWQmJnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5wdXNoKG4uaWQpLG4uaWR9LF9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbjpmdW5jdGlvbihlLHQsaSl7aT1pP2kuY29uY2F0KCk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByPWUuaWQudG9TdHJpbmcoKSxzPXRoaXMuX21vZGVsLmRhdGEsYT10aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLG4sZCxvLGMsbD17aWQ6cix0ZXh0OmUudGV4dHx8XCJcIixpY29uOmUuaWNvbj09PVB8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46ZS5jaGlsZHJlbnx8W10sY2hpbGRyZW5fZDplLmNoaWxkcmVuX2R8fFtdLGRhdGE6ZS5kYXRhLHN0YXRlOnt9LGxpX2F0dHI6e2lkOiExfSxhX2F0dHI6e2hyZWY6XCIjXCJ9LG9yaWdpbmFsOiExfTtmb3IobiBpbiBhKWEuaGFzT3duUHJvcGVydHkobikmJihsLnN0YXRlW25dPWFbbl0pO2lmKGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksbC5pY29uIT09UCYmbnVsbCE9PWwuaWNvbiYmXCJcIiE9PWwuaWNvbnx8KGwuaWNvbj0hMCksZSYmZS5kYXRhJiYobC5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IobiBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkobikmJihsLnN0YXRlW25dPWUuZGF0YS5qc3RyZWVbbl0pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihuIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShuKSYmKGwuc3RhdGVbbl09ZS5zdGF0ZVtuXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IobiBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KG4pJiYobC5saV9hdHRyW25dPWUubGlfYXR0cltuXSk7aWYobC5saV9hdHRyLmlkfHwobC5saV9hdHRyLmlkPXIpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFfYXR0cilmb3IobiBpbiBlLmFfYXR0cillLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShuKSYmKGwuYV9hdHRyW25dPWUuYV9hdHRyW25dKTtmb3IoZSYmZS5jaGlsZHJlbiYmITA9PT1lLmNoaWxkcmVuJiYobC5zdGF0ZS5sb2FkZWQ9ITEsbC5jaGlsZHJlbj1bXSxsLmNoaWxkcmVuX2Q9W10pLG49MCxkPShzW2wuaWRdPWwpLmNoaWxkcmVuLmxlbmd0aDtuPGQ7bisrKWM9c1tvPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fZmxhdF9qc29uKHNbbC5jaGlsZHJlbltuXV0sbC5pZCxpKV0sbC5jaGlsZHJlbl9kLnB1c2gobyksYy5jaGlsZHJlbl9kLmxlbmd0aCYmKGwuY2hpbGRyZW5fZD1sLmNoaWxkcmVuX2QuY29uY2F0KGMuY2hpbGRyZW5fZCkpO3JldHVybiBkZWxldGUgZS5kYXRhLGRlbGV0ZSBlLmNoaWxkcmVuLHNbbC5pZF0ub3JpZ2luYWw9ZSxsLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChsLmlkKSxsLmlkfSxfcGFyc2VfbW9kZWxfZnJvbV9qc29uOmZ1bmN0aW9uKGUsdCxpKXtpPWk/aS5jb25jYXQoKTpbXSx0JiZpLnVuc2hpZnQodCk7dmFyIHI9ITEscyxhLG4sZCxvPXRoaXMuX21vZGVsLmRhdGEsYz10aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLGw7ZG97cj1cImpcIit0aGlzLl9pZCtcIl9cIisgKyt0aGlzLl9jbnR9d2hpbGUob1tyXSk7Zm9yKHMgaW4gbD17aWQ6ITEsdGV4dDpcInN0cmluZ1wiPT10eXBlb2YgZT9lOlwiXCIsaWNvbjpcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5pY29uPT09UHx8ZS5pY29uLHBhcmVudDp0LHBhcmVudHM6aSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX0sYyljLmhhc093blByb3BlcnR5KHMpJiYobC5zdGF0ZVtzXT1jW3NdKTtpZihlJiYoZS5pZHx8MD09PWUuaWQpJiYobC5pZD1lLmlkLnRvU3RyaW5nKCkpLGUmJmUudGV4dCYmKGwudGV4dD1lLnRleHQpLGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksbC5pY29uIT09UCYmbnVsbCE9PWwuaWNvbiYmXCJcIiE9PWwuaWNvbnx8KGwuaWNvbj0hMCksZSYmZS5kYXRhJiYobC5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IocyBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkocykmJihsLnN0YXRlW3NdPWUuZGF0YS5qc3RyZWVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKGwuc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IocyBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KHMpJiYobC5saV9hdHRyW3NdPWUubGlfYXR0cltzXSk7aWYobC5saV9hdHRyLmlkJiYhbC5pZCYmMCE9PWwuaWQmJihsLmlkPWwubGlfYXR0ci5pZC50b1N0cmluZygpKSxsLmlkfHwwPT09bC5pZHx8KGwuaWQ9ciksbC5saV9hdHRyLmlkfHwobC5saV9hdHRyLmlkPWwuaWQpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFfYXR0cilmb3IocyBpbiBlLmFfYXR0cillLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGwuYV9hdHRyW3NdPWUuYV9hdHRyW3NdKTtpZihlJiZlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCl7Zm9yKHM9MCxhPWUuY2hpbGRyZW4ubGVuZ3RoO3M8YTtzKyspZD1vW249dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9qc29uKGUuY2hpbGRyZW5bc10sbC5pZCxpKV0sbC5jaGlsZHJlbi5wdXNoKG4pLGQuY2hpbGRyZW5fZC5sZW5ndGgmJihsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbl9kLmNvbmNhdChkLmNoaWxkcmVuX2QpKTtsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbi5jb25jYXQobC5jaGlsZHJlbl9kKX1yZXR1cm4gZSYmZS5jaGlsZHJlbiYmITA9PT1lLmNoaWxkcmVuJiYobC5zdGF0ZS5sb2FkZWQ9ITEsbC5jaGlsZHJlbj1bXSxsLmNoaWxkcmVuX2Q9W10pLGRlbGV0ZSBlLmRhdGEsZGVsZXRlIGUuY2hpbGRyZW4sbC5vcmlnaW5hbD1lLChvW2wuaWRdPWwpLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChsLmlkKSxsLmlkfSxfcmVkcmF3OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPSh0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz90aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdLmNoaWxkcmVuOnRoaXMuX21vZGVsLmNoYW5nZWQpLmNvbmNhdChbXSksdD1iLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSxpLHIscyxhPXRoaXMuX2RhdGEuY29yZS5mb2N1c2VkLHI9MCxzPWUubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5yZWRyYXdfbm9kZShlW3JdLCEwLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3KSkmJnRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3JiZ0LmFwcGVuZENoaWxkKGkpO3RoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3JiYodC5jbGFzc05hbWU9dGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lLHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLHRoaXMuZWxlbWVudC5lbXB0eSgpLmFwcGVuZCh0KSksbnVsbCE9PWEmJnRoaXMuc2V0dGluZ3MuY29yZS5yZXN0b3JlX2ZvY3VzJiYoKGk9dGhpcy5nZXRfbm9kZShhLCEwKSkmJmkubGVuZ3RoJiZpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIilbMF0hPT1iLmFjdGl2ZUVsZW1lbnQ/aS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKTp0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1udWxsKSx0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMSx0aGlzLl9tb2RlbC5jaGFuZ2VkPVtdLHRoaXMudHJpZ2dlcihcInJlZHJhd1wiLHtub2RlczplfSl9LHJlZHJhdzpmdW5jdGlvbihlKXtlJiYodGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITApLHRoaXMuX3JlZHJhdygpfSxkcmF3X2NoaWxkcmVuOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0X25vZGUoZSksaT0hMSxyPSExLHM9ITEsYT1iO2lmKCF0KXJldHVybiExO2lmKHQuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiB0aGlzLnJlZHJhdyghMCk7aWYoIShlPXRoaXMuZ2V0X25vZGUoZSwhMCkpfHwhZS5sZW5ndGgpcmV0dXJuITE7aWYoZS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikucmVtb3ZlKCksZT1lWzBdLHQuY2hpbGRyZW4ubGVuZ3RoJiZ0LnN0YXRlLmxvYWRlZCl7Zm9yKChzPWEuY3JlYXRlRWxlbWVudChcIlVMXCIpKS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncm91cFwiKSxzLmNsYXNzTmFtZT1cImpzdHJlZS1jaGlsZHJlblwiLGk9MCxyPXQuY2hpbGRyZW4ubGVuZ3RoO2k8cjtpKyspcy5hcHBlbmRDaGlsZCh0aGlzLnJlZHJhd19ub2RlKHQuY2hpbGRyZW5baV0sITAsITApKTtlLmFwcGVuZENoaWxkKHMpfX0scmVkcmF3X25vZGU6ZnVuY3Rpb24oZSx0LGkscil7dmFyIHM9dGhpcy5nZXRfbm9kZShlKSxhPSExLG49ITEsZD0hMSxvPSExLGM9ITEsbD0hMSxoPVwiXCIsXz1iLGc9dGhpcy5fbW9kZWwuZGF0YSx1PSExLGY9ITEscD1udWxsLG09MCx2PTAsaj0hMSxrPSExO2lmKCFzKXJldHVybiExO2lmKHMuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiB0aGlzLnJlZHJhdyghMCk7aWYodD10fHwwPT09cy5jaGlsZHJlbi5sZW5ndGgsZT1iLnF1ZXJ5U2VsZWN0b3I/dGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoXCIjXCIrKC0xIT09XCIwMTIzNDU2Nzg5XCIuaW5kZXhPZihzLmlkWzBdKT9cIlxcXFwzXCIrcy5pZFswXStcIiBcIitzLmlkLnN1YnN0cigxKS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIik6cy5pZC5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIikpKTpiLmdldEVsZW1lbnRCeUlkKHMuaWQpKWU9RShlKSxpfHwoKGE9ZS5wYXJlbnQoKS5wYXJlbnQoKVswXSk9PT10aGlzLmVsZW1lbnRbMF0mJihhPW51bGwpLG49ZS5pbmRleCgpKSwodD0hdCYmcy5jaGlsZHJlbi5sZW5ndGgmJiFlLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5sZW5ndGg/ITA6dCl8fChkPWUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdKSx1PWUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKVswXT09PWIuYWN0aXZlRWxlbWVudCxlLnJlbW92ZSgpO2Vsc2UgaWYodD0hMCwhaSl7aWYoIShudWxsPT09KGE9cy5wYXJlbnQhPT1FLmpzdHJlZS5yb290P0UoXCIjXCIrcy5wYXJlbnQucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudClbMF06bnVsbCl8fGEmJmdbcy5wYXJlbnRdLnN0YXRlLm9wZW5lZCkpcmV0dXJuITE7bj1FLmluQXJyYXkocy5pZCwobnVsbD09PWE/Z1tFLmpzdHJlZS5yb290XTpnW3MucGFyZW50XSkuY2hpbGRyZW4pfWZvcihvIGluIGU9dGhpcy5fZGF0YS5jb3JlLm5vZGUuY2xvbmVOb2RlKCEwKSxoPVwianN0cmVlLW5vZGUgXCIscy5saV9hdHRyKXMubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShvKSYmXCJpZFwiIT09byYmKFwiY2xhc3NcIiE9PW8/ZS5zZXRBdHRyaWJ1dGUobyxzLmxpX2F0dHJbb10pOmgrPXMubGlfYXR0cltvXSk7Zm9yKHMuYV9hdHRyLmlkfHwocy5hX2F0dHIuaWQ9cy5pZCtcIl9hbmNob3JcIiksZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhIXMuc3RhdGUuc2VsZWN0ZWQpLGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxldmVsXCIscy5wYXJlbnRzLmxlbmd0aCksdGhpcy5zZXR0aW5ncy5jb3JlLmNvbXB1dGVfZWxlbWVudHNfcG9zaXRpb25zJiYoZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtc2V0c2l6ZVwiLGdbcy5wYXJlbnRdLmNoaWxkcmVuLmxlbmd0aCksZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtcG9zaW5zZXRcIixnW3MucGFyZW50XS5jaGlsZHJlbi5pbmRleE9mKHMuaWQpKzEpKSxzLnN0YXRlLmRpc2FibGVkJiZlLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSxvPTAsYz1zLmNoaWxkcmVuLmxlbmd0aDtvPGM7bysrKWlmKCFnW3MuY2hpbGRyZW5bb11dLnN0YXRlLmhpZGRlbil7aj0hMDticmVha31pZihudWxsIT09cy5wYXJlbnQmJmdbcy5wYXJlbnRdJiYhcy5zdGF0ZS5oaWRkZW4mJihvPUUuaW5BcnJheShzLmlkLGdbcy5wYXJlbnRdLmNoaWxkcmVuKSxrPXMuaWQsLTEhPT1vKSlmb3IobysrLGM9Z1tzLnBhcmVudF0uY2hpbGRyZW4ubGVuZ3RoO288YztvKyspaWYoKGs9IWdbZ1tzLnBhcmVudF0uY2hpbGRyZW5bb11dLnN0YXRlLmhpZGRlbj9nW3MucGFyZW50XS5jaGlsZHJlbltvXTprKSE9PXMuaWQpYnJlYWs7Zm9yKGMgaW4gcy5zdGF0ZS5oaWRkZW4mJihoKz1cIiBqc3RyZWUtaGlkZGVuXCIpLHMuc3RhdGUubG9hZGluZyYmKGgrPVwiIGpzdHJlZS1sb2FkaW5nXCIpLHMuc3RhdGUubG9hZGVkJiYhaj9oKz1cIiBqc3RyZWUtbGVhZlwiOihoKz1zLnN0YXRlLm9wZW5lZCYmcy5zdGF0ZS5sb2FkZWQ/XCIganN0cmVlLW9wZW5cIjpcIiBqc3RyZWUtY2xvc2VkXCIsZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIixzLnN0YXRlLm9wZW5lZCYmcy5zdGF0ZS5sb2FkZWQpKSxrPT09cy5pZCYmKGgrPVwiIGpzdHJlZS1sYXN0XCIpLGUuaWQ9cy5pZCxlLmNsYXNzTmFtZT1oLGg9KHMuc3RhdGUuc2VsZWN0ZWQ/XCIganN0cmVlLWNsaWNrZWRcIjpcIlwiKSsocy5zdGF0ZS5kaXNhYmxlZD9cIiBqc3RyZWUtZGlzYWJsZWRcIjpcIlwiKSxzLmFfYXR0cilzLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShjKSYmKFwiaHJlZlwiPT09YyYmXCIjXCI9PT1zLmFfYXR0cltjXXx8KFwiY2xhc3NcIiE9PWM/ZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShjLHMuYV9hdHRyW2NdKTpoKz1cIiBcIitzLmFfYXR0cltjXSkpO2lmKGgubGVuZ3RoJiYoZS5jaGlsZE5vZGVzWzFdLmNsYXNzTmFtZT1cImpzdHJlZS1hbmNob3IgXCIraCksKHMuaWNvbiYmITAhPT1zLmljb258fCExPT09cy5pY29uKSYmKCExPT09cy5pY29uP2UuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSs9XCIganN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIjotMT09PXMuaWNvbi5pbmRleE9mKFwiL1wiKSYmLTE9PT1zLmljb24uaW5kZXhPZihcIi5cIik/ZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lKz1cIiBcIitzLmljb24rXCIganN0cmVlLXRoZW1laWNvbi1jdXN0b21cIjooZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlPSd1cmwoXCInK3MuaWNvbisnXCIpJyxlLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb249XCJjZW50ZXIgY2VudGVyXCIsZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFNpemU9XCJhdXRvXCIsZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lKz1cIiBqc3RyZWUtdGhlbWVpY29uLWN1c3RvbVwiKSksdGhpcy5zZXR0aW5ncy5jb3JlLmZvcmNlX3RleHQ/ZS5jaGlsZE5vZGVzWzFdLmFwcGVuZENoaWxkKF8uY3JlYXRlVGV4dE5vZGUocy50ZXh0KSk6ZS5jaGlsZE5vZGVzWzFdLmlubmVySFRNTCs9cy50ZXh0LHQmJnMuY2hpbGRyZW4ubGVuZ3RoJiYocy5zdGF0ZS5vcGVuZWR8fHIpJiZzLnN0YXRlLmxvYWRlZCl7Zm9yKChsPV8uY3JlYXRlRWxlbWVudChcIlVMXCIpKS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncm91cFwiKSxsLmNsYXNzTmFtZT1cImpzdHJlZS1jaGlsZHJlblwiLG89MCxjPXMuY2hpbGRyZW4ubGVuZ3RoO288YztvKyspbC5hcHBlbmRDaGlsZCh0aGlzLnJlZHJhd19ub2RlKHMuY2hpbGRyZW5bb10sdCwhMCkpO2UuYXBwZW5kQ2hpbGQobCl9aWYoZCYmZS5hcHBlbmRDaGlsZChkKSwhaSl7Zm9yKG89MCxjPShhPWF8fHRoaXMuZWxlbWVudFswXSkuY2hpbGROb2Rlcy5sZW5ndGg7bzxjO28rKylpZihhLmNoaWxkTm9kZXNbb10mJmEuY2hpbGROb2Rlc1tvXS5jbGFzc05hbWUmJi0xIT09YS5jaGlsZE5vZGVzW29dLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWNoaWxkcmVuXCIpKXtwPWEuY2hpbGROb2Rlc1tvXTticmVha31wfHwoKHA9Xy5jcmVhdGVFbGVtZW50KFwiVUxcIikpLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyb3VwXCIpLHAuY2xhc3NOYW1lPVwianN0cmVlLWNoaWxkcmVuXCIsYS5hcHBlbmRDaGlsZChwKSksbjwoYT1wKS5jaGlsZE5vZGVzLmxlbmd0aD9hLmluc2VydEJlZm9yZShlLGEuY2hpbGROb2Rlc1tuXSk6YS5hcHBlbmRDaGlsZChlKSx1JiYobT10aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wLHY9dGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQsZS5jaGlsZE5vZGVzWzFdLmZvY3VzKCksdGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcD1tLHRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0PXYpfXJldHVybiBzLnN0YXRlLm9wZW5lZCYmIXMuc3RhdGUubG9hZGVkJiYocy5zdGF0ZS5vcGVuZWQ9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMub3Blbl9ub2RlKHMuaWQsITEsMCl9LmJpbmQodGhpcyksMCkpLGV9LG9wZW5fbm9kZTpmdW5jdGlvbihlLGkscil7dmFyIHQscyxhLG47aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2Zvcih0PTAscz0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PHM7dCsrKXRoaXMub3Blbl9ub2RlKGVbdF0saSxyKTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiYocj1yPT09UD90aGlzLnNldHRpbmdzLmNvcmUuYW5pbWF0aW9uOnIsdGhpcy5pc19jbG9zZWQoZSk/dGhpcy5pc19sb2FkZWQoZSk/KGE9dGhpcy5nZXRfbm9kZShlLCEwKSxuPXRoaXMsYS5sZW5ndGgmJihyJiZhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5sZW5ndGgmJmEuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnN0b3AoITAsITApLGUuY2hpbGRyZW4ubGVuZ3RoJiYhdGhpcy5fZmlyc3RDaGlsZChhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKVswXSkmJnRoaXMuZHJhd19jaGlsZHJlbihlKSxyPyh0aGlzLnRyaWdnZXIoXCJiZWZvcmVfb3BlblwiLHtub2RlOmV9KSxhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLmVuZCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNsb3NlZFwiKS5hZGRDbGFzcyhcImpzdHJlZS1vcGVuXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCkuZW5kKCkuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnN0b3AoITAsITApLnNsaWRlRG93bihyLGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiXCIsbi5lbGVtZW50JiZuLnRyaWdnZXIoXCJhZnRlcl9vcGVuXCIse25vZGU6ZX0pfSkpOih0aGlzLnRyaWdnZXIoXCJiZWZvcmVfb3BlblwiLHtub2RlOmV9KSxhWzBdLmNsYXNzTmFtZT1hWzBdLmNsYXNzTmFtZS5yZXBsYWNlKFwianN0cmVlLWNsb3NlZFwiLFwianN0cmVlLW9wZW5cIiksYVswXS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwhMCkpKSxlLnN0YXRlLm9wZW5lZD0hMCxpJiZpLmNhbGwodGhpcyxlLCEwKSxhLmxlbmd0aHx8dGhpcy50cmlnZ2VyKFwiYmVmb3JlX29wZW5cIix7bm9kZTplfSksdGhpcy50cmlnZ2VyKFwib3Blbl9ub2RlXCIse25vZGU6ZX0pLHImJmEubGVuZ3RofHx0aGlzLnRyaWdnZXIoXCJhZnRlcl9vcGVuXCIse25vZGU6ZX0pLCEwKTp0aGlzLmlzX2xvYWRpbmcoZSk/c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMub3Blbl9ub2RlKGUsaSxyKX0uYmluZCh0aGlzKSw1MDApOnZvaWQgdGhpcy5sb2FkX25vZGUoZSxmdW5jdGlvbihlLHQpe3JldHVybiB0P3RoaXMub3Blbl9ub2RlKGUsaSxyKTohIWkmJmkuY2FsbCh0aGlzLGUsITEpfSk6KGkmJmkuY2FsbCh0aGlzLGUsITEpLCExKSl9LF9vcGVuX3RvOmZ1bmN0aW9uKGUpe2lmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7Zm9yKHZhciB0LGkscj1lLnBhcmVudHMsdD0wLGk9ci5sZW5ndGg7dDxpO3QrPTEpdCE9PUUuanN0cmVlLnJvb3QmJnRoaXMub3Blbl9ub2RlKHJbdF0sITEsMCk7cmV0dXJuIEUoXCIjXCIrZS5pZC5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIiksdGhpcy5lbGVtZW50KX0sY2xvc2Vfbm9kZTpmdW5jdGlvbihlLHQpe3ZhciBpLHIscyxhO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLmNsb3NlX25vZGUoZVtpXSx0KTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiYoIXRoaXMuaXNfY2xvc2VkKGUpJiYodD10PT09UD90aGlzLnNldHRpbmdzLmNvcmUuYW5pbWF0aW9uOnQsYT0ocz10aGlzKS5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLm9wZW5lZD0hMSx0aGlzLnRyaWdnZXIoXCJjbG9zZV9ub2RlXCIse25vZGU6ZX0pLHZvaWQoYS5sZW5ndGg/dD9hLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5hdHRyKFwic3R5bGVcIixcImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudFwiKS5lbmQoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1vcGVuXCIpLmFkZENsYXNzKFwianN0cmVlLWNsb3NlZFwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLmVuZCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5zdG9wKCEwLCEwKS5zbGlkZVVwKHQsZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJcIixhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5yZW1vdmUoKSxzLmVsZW1lbnQmJnMudHJpZ2dlcihcImFmdGVyX2Nsb3NlXCIse25vZGU6ZX0pfSk6KGFbMF0uY2xhc3NOYW1lPWFbMF0uY2xhc3NOYW1lLnJlcGxhY2UoXCJqc3RyZWUtb3BlblwiLFwianN0cmVlLWNsb3NlZFwiKSxhLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikucmVtb3ZlKCksdGhpcy50cmlnZ2VyKFwiYWZ0ZXJfY2xvc2VcIix7bm9kZTplfSkpOnRoaXMudHJpZ2dlcihcImFmdGVyX2Nsb3NlXCIse25vZGU6ZX0pKSkpfSx0b2dnbGVfbm9kZTpmdW5jdGlvbihlKXt2YXIgdCxpO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLnRvZ2dsZV9ub2RlKGVbdF0pO3JldHVybiEwfXJldHVybiB0aGlzLmlzX2Nsb3NlZChlKT90aGlzLm9wZW5fbm9kZShlKTp0aGlzLmlzX29wZW4oZSk/dGhpcy5jbG9zZV9ub2RlKGUpOnZvaWQgMH0sb3Blbl9hbGw6ZnVuY3Rpb24oZSxpLHIpe2lmKGU9ZXx8RS5qc3RyZWUucm9vdCwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7dmFyIHQ9ZS5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5nZXRfY29udGFpbmVyX3VsKCk6dGhpcy5nZXRfbm9kZShlLCEwKSxzLGEsbjtpZighdC5sZW5ndGgpe2ZvcihzPTAsYT1lLmNoaWxkcmVuX2QubGVuZ3RoO3M8YTtzKyspdGhpcy5pc19jbG9zZWQodGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2Rbc11dKSYmKHRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3NdXS5zdGF0ZS5vcGVuZWQ9ITApO3JldHVybiB0aGlzLnRyaWdnZXIoXCJvcGVuX2FsbFwiLHtub2RlOmV9KX1yPXJ8fHQsKHQ9KG49dGhpcykuaXNfY2xvc2VkKGUpP3QuZmluZChcIi5qc3RyZWUtY2xvc2VkXCIpLmFkZEJhY2soKTp0LmZpbmQoXCIuanN0cmVlLWNsb3NlZFwiKSkuZWFjaChmdW5jdGlvbigpe24ub3Blbl9ub2RlKHRoaXMsZnVuY3Rpb24oZSx0KXt0JiZ0aGlzLmlzX3BhcmVudChlKSYmdGhpcy5vcGVuX2FsbChlLGkscil9LGl8fDApfSksMD09PXIuZmluZChcIi5qc3RyZWUtY2xvc2VkXCIpLmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwib3Blbl9hbGxcIix7bm9kZTp0aGlzLmdldF9ub2RlKHIpfSl9LGNsb3NlX2FsbDpmdW5jdGlvbihlLHQpe2lmKGU9ZXx8RS5qc3RyZWUucm9vdCwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7dmFyIGk9ZS5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5nZXRfY29udGFpbmVyX3VsKCk6dGhpcy5nZXRfbm9kZShlLCEwKSxyPXRoaXMscyxhO2ZvcihpLmxlbmd0aCYmKGk9dGhpcy5pc19vcGVuKGUpP2kuZmluZChcIi5qc3RyZWUtb3BlblwiKS5hZGRCYWNrKCk6aS5maW5kKFwiLmpzdHJlZS1vcGVuXCIpLEUoaS5nZXQoKS5yZXZlcnNlKCkpLmVhY2goZnVuY3Rpb24oKXtyLmNsb3NlX25vZGUodGhpcyx0fHwwKX0pKSxzPTAsYT1lLmNoaWxkcmVuX2QubGVuZ3RoO3M8YTtzKyspdGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2Rbc11dLnN0YXRlLm9wZW5lZD0hMTt0aGlzLnRyaWdnZXIoXCJjbG9zZV9hbGxcIix7bm9kZTplfSl9LGlzX2Rpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLnN0YXRlJiZlLnN0YXRlLmRpc2FibGVkfSxlbmFibGVfbm9kZTpmdW5jdGlvbihlKXt2YXIgdCxpO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmVuYWJsZV9ub2RlKGVbdF0pO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7ZS5zdGF0ZS5kaXNhYmxlZD0hMSx0aGlzLmdldF9ub2RlKGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhMSksdGhpcy50cmlnZ2VyKFwiZW5hYmxlX25vZGVcIix7bm9kZTplfSl9LGRpc2FibGVfbm9kZTpmdW5jdGlvbihlKXt2YXIgdCxpO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmRpc2FibGVfbm9kZShlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2Uuc3RhdGUuZGlzYWJsZWQ9ITAsdGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITApLHRoaXMudHJpZ2dlcihcImRpc2FibGVfbm9kZVwiLHtub2RlOmV9KX0saXNfaGlkZGVuOmZ1bmN0aW9uKGUpe3JldHVybiEwPT09KGU9dGhpcy5nZXRfbm9kZShlKSkuc3RhdGUuaGlkZGVufSxoaWRlX25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLmhpZGVfbm9kZShlW2ldLCEwKTtyZXR1cm4gdHx8dGhpcy5yZWRyYXcoKSwhMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2Uuc3RhdGUuaGlkZGVufHwoZS5zdGF0ZS5oaWRkZW49ITAsdGhpcy5fbm9kZV9jaGFuZ2VkKGUucGFyZW50KSx0fHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcImhpZGVfbm9kZVwiLHtub2RlOmV9KSl9LHNob3dfbm9kZTpmdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2ZvcihpPTAscj0oZT1lLnNsaWNlKCkpLmxlbmd0aDtpPHI7aSsrKXRoaXMuc2hvd19ub2RlKGVbaV0sITApO3JldHVybiB0fHx0aGlzLnJlZHJhdygpLCEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7ZS5zdGF0ZS5oaWRkZW4mJihlLnN0YXRlLmhpZGRlbj0hMSx0aGlzLl9ub2RlX2NoYW5nZWQoZS5wYXJlbnQpLHR8fHRoaXMucmVkcmF3KCksdGhpcy50cmlnZ2VyKFwic2hvd19ub2RlXCIse25vZGU6ZX0pKX0saGlkZV9hbGw6ZnVuY3Rpb24oZSl7dmFyIHQsaT10aGlzLl9tb2RlbC5kYXRhLHI9W107Zm9yKHQgaW4gaSlpLmhhc093blByb3BlcnR5KHQpJiZ0IT09RS5qc3RyZWUucm9vdCYmIWlbdF0uc3RhdGUuaGlkZGVuJiYoaVt0XS5zdGF0ZS5oaWRkZW49ITAsci5wdXNoKHQpKTtyZXR1cm4gdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITAsZXx8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2FsbFwiLHtub2RlczpyfSkscn0sc2hvd19hbGw6ZnVuY3Rpb24oZSl7dmFyIHQsaT10aGlzLl9tb2RlbC5kYXRhLHI9W107Zm9yKHQgaW4gaSlpLmhhc093blByb3BlcnR5KHQpJiZ0IT09RS5qc3RyZWUucm9vdCYmaVt0XS5zdGF0ZS5oaWRkZW4mJihpW3RdLnN0YXRlLmhpZGRlbj0hMSxyLnB1c2godCkpO3JldHVybiB0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCxlfHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcInNob3dfYWxsXCIse25vZGVzOnJ9KSxyfSxhY3RpdmF0ZV9ub2RlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5pc19kaXNhYmxlZChlKSlyZXR1cm4hMTtpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdHx8KHQ9e30pLHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9dGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCYmdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5pZCE9PVA/dGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkKTpudWxsLHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQmJiF0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnN0YXRlLnNlbGVjdGVkJiYodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD1udWxsKSwhdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCYmdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9dGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aC0xXSkpLHRoaXMuc2V0dGluZ3MuY29yZS5tdWx0aXBsZSYmKHQubWV0YUtleXx8dC5jdHJsS2V5fHx0LnNoaWZ0S2V5KSYmKCF0LnNoaWZ0S2V5fHx0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiZ0aGlzLmdldF9wYXJlbnQoZSkmJnRoaXMuZ2V0X3BhcmVudChlKT09PXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQucGFyZW50KSlpZih0LnNoaWZ0S2V5KXtmb3IodmFyIGk9dGhpcy5nZXRfbm9kZShlKS5pZCxyPXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQscz10aGlzLmdldF9ub2RlKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQucGFyZW50KS5jaGlsZHJlbixhPSExLG4sZCxuPTAsZD1zLmxlbmd0aDtuPGQ7bis9MSlzW25dPT09aSYmKGE9IWEpLHNbbl09PT1yJiYoYT0hYSksdGhpcy5pc19kaXNhYmxlZChzW25dKXx8IWEmJnNbbl0hPT1pJiZzW25dIT09cj90LmN0cmxLZXl8fHRoaXMuZGVzZWxlY3Rfbm9kZShzW25dLCEwLHQpOnRoaXMuaXNfaGlkZGVuKHNbbl0pfHx0aGlzLnNlbGVjdF9ub2RlKHNbbl0sITAsITEsdCk7dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3Rfbm9kZVwiLG5vZGU6dGhpcy5nZXRfbm9kZShlKSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZXZlbnQ6dH0pfWVsc2UgdGhpcy5pc19zZWxlY3RlZChlKT90aGlzLmRlc2VsZWN0X25vZGUoZSwhMSx0KToodC5jdHJsS2V5JiYodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLmdldF9ub2RlKGUpKSx0aGlzLnNlbGVjdF9ub2RlKGUsITEsITEsdCkpO2Vsc2UhdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlJiYodC5tZXRhS2V5fHx0LmN0cmxLZXl8fHQuc2hpZnRLZXkpJiZ0aGlzLmlzX3NlbGVjdGVkKGUpP3RoaXMuZGVzZWxlY3Rfbm9kZShlLCExLHQpOih0aGlzLmlzX3NlbGVjdGVkKGUpJiYxPT09dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aHx8KHRoaXMuZGVzZWxlY3RfYWxsKCEwKSx0aGlzLnNlbGVjdF9ub2RlKGUsITEsITEsdCkpLHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9dGhpcy5nZXRfbm9kZShlKSk7dGhpcy50cmlnZ2VyKFwiYWN0aXZhdGVfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZSksZXZlbnQ6dH0pfSxob3Zlcl9ub2RlOmZ1bmN0aW9uKGUpe2lmKCEoZT10aGlzLmdldF9ub2RlKGUsITApKXx8IWUubGVuZ3RofHxlLmNoaWxkcmVuKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLmxlbmd0aClyZXR1cm4hMTt2YXIgdD10aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtaG92ZXJlZFwiKSxpPXRoaXMuZWxlbWVudDt0JiZ0Lmxlbmd0aCYmdGhpcy5kZWhvdmVyX25vZGUodCksZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWhvdmVyZWRcIiksdGhpcy50cmlnZ2VyKFwiaG92ZXJfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZSl9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsZVswXS5pZCl9LDApfSxkZWhvdmVyX25vZGU6ZnVuY3Rpb24oZSl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZSwhMCkpfHwhZS5sZW5ndGh8fCFlLmNoaWxkcmVuKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLmxlbmd0aClyZXR1cm4hMTtlLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtaG92ZXJlZFwiKSx0aGlzLnRyaWdnZXIoXCJkZWhvdmVyX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGUpfSl9LHNlbGVjdF9ub2RlOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzLGEsbixkO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoYT0wLG49KGU9ZS5zbGljZSgpKS5sZW5ndGg7YTxuO2ErKyl0aGlzLnNlbGVjdF9ub2RlKGVbYV0sdCxpLHIpO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7cz10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuc2VsZWN0ZWR8fChlLnN0YXRlLnNlbGVjdGVkPSEwLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5wdXNoKGUuaWQpLChzPSFpP3RoaXMuX29wZW5fdG8oZSk6cykmJnMubGVuZ3RoJiZzLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2xpY2tlZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSx0aGlzLnRyaWdnZXIoXCJzZWxlY3Rfbm9kZVwiLHtub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50OnJ9KSx0fHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcInNlbGVjdF9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDpyfSkpfSxkZXNlbGVjdF9ub2RlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzLGE7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2ZvcihyPTAscz0oZT1lLnNsaWNlKCkpLmxlbmd0aDtyPHM7cisrKXRoaXMuZGVzZWxlY3Rfbm9kZShlW3JdLHQsaSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTthPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5zZWxlY3RlZCYmKGUuc3RhdGUuc2VsZWN0ZWQ9ITEsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPUUudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxlLmlkKSxhLmxlbmd0aCYmYS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNsaWNrZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSksdGhpcy50cmlnZ2VyKFwiZGVzZWxlY3Rfbm9kZVwiLHtub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50Oml9KSx0fHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImRlc2VsZWN0X25vZGVcIixub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50Oml9KSl9LHNlbGVjdF9hbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSksaSxyO2Zvcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9dGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS5jaGlsZHJlbl9kLmNvbmNhdCgpLGk9MCxyPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7aTxyO2krKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0mJih0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0uc3RhdGUuc2VsZWN0ZWQ9ITApO3RoaXMucmVkcmF3KCEwKSx0aGlzLnRyaWdnZXIoXCJzZWxlY3RfYWxsXCIse3NlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pLGV8fHRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwic2VsZWN0X2FsbFwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxvbGRfc2VsZWN0aW9uOnR9KX0sZGVzZWxlY3RfYWxsOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKSxpLHIsaT0wLHI9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aDtpPHI7aSsrKXRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW2ldXSYmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW2ldXS5zdGF0ZS5zZWxlY3RlZD0hMSk7dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPVtdLHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1jbGlja2VkXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNsaWNrZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSksdGhpcy50cmlnZ2VyKFwiZGVzZWxlY3RfYWxsXCIse3NlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxub2RlOnR9KSxlfHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImRlc2VsZWN0X2FsbFwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxvbGRfc2VsZWN0aW9uOnR9KX0saXNfc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmZS5zdGF0ZS5zZWxlY3RlZH0sZ2V0X3NlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlP0UubWFwKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0uYmluZCh0aGlzKSk6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnNsaWNlKCl9LGdldF90b3Bfc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuZ2V0X3NlbGVjdGVkKCEwKSxpPXt9LHIscyxhLG4scj0wLHM9dC5sZW5ndGg7cjxzO3IrKylpW3Rbcl0uaWRdPXRbcl07Zm9yKHI9MCxzPXQubGVuZ3RoO3I8cztyKyspZm9yKGE9MCxuPXRbcl0uY2hpbGRyZW5fZC5sZW5ndGg7YTxuO2ErKylpW3Rbcl0uY2hpbGRyZW5fZFthXV0mJmRlbGV0ZSBpW3Rbcl0uY2hpbGRyZW5fZFthXV07Zm9yKHIgaW4gdD1bXSxpKWkuaGFzT3duUHJvcGVydHkocikmJnQucHVzaChyKTtyZXR1cm4gZT9FLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldF9ub2RlKGUpfS5iaW5kKHRoaXMpKTp0fSxnZXRfYm90dG9tX3NlbGVjdGVkOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmdldF9zZWxlY3RlZCghMCksaT1bXSxyLHMscj0wLHM9dC5sZW5ndGg7cjxzO3IrKyl0W3JdLmNoaWxkcmVuLmxlbmd0aHx8aS5wdXNoKHRbcl0uaWQpO3JldHVybiBlP0UubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LmJpbmQodGhpcykpOml9LGdldF9zdGF0ZTpmdW5jdGlvbigpe3ZhciBlPXtjb3JlOntvcGVuOltdLGxvYWRlZDpbXSxzY3JvbGw6e2xlZnQ6dGhpcy5lbGVtZW50LnNjcm9sbExlZnQoKSx0b3A6dGhpcy5lbGVtZW50LnNjcm9sbFRvcCgpfSxzZWxlY3RlZDpbXX19LHQ7Zm9yKHQgaW4gdGhpcy5fbW9kZWwuZGF0YSl0aGlzLl9tb2RlbC5kYXRhLmhhc093blByb3BlcnR5KHQpJiZ0IT09RS5qc3RyZWUucm9vdCYmKHRoaXMuX21vZGVsLmRhdGFbdF0uc3RhdGUubG9hZGVkJiZ0aGlzLnNldHRpbmdzLmNvcmUubG9hZGVkX3N0YXRlJiZlLmNvcmUubG9hZGVkLnB1c2godCksdGhpcy5fbW9kZWwuZGF0YVt0XS5zdGF0ZS5vcGVuZWQmJmUuY29yZS5vcGVuLnB1c2godCksdGhpcy5fbW9kZWwuZGF0YVt0XS5zdGF0ZS5zZWxlY3RlZCYmZS5jb3JlLnNlbGVjdGVkLnB1c2godCkpO3JldHVybiBlfSxzZXRfc3RhdGU6ZnVuY3Rpb24odCxpKXtpZih0KXtpZih0LmNvcmUmJnQuY29yZS5zZWxlY3RlZCYmdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uPT09UCYmKHQuY29yZS5pbml0aWFsX3NlbGVjdGlvbj10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKS5zb3J0KCkuam9pbihcIixcIikpLHQuY29yZSl7dmFyIGUscixzLGEsbjtpZih0LmNvcmUubG9hZGVkKXJldHVybiB0aGlzLnNldHRpbmdzLmNvcmUubG9hZGVkX3N0YXRlJiZFLnZha2F0YS5pc19hcnJheSh0LmNvcmUubG9hZGVkKSYmdC5jb3JlLmxvYWRlZC5sZW5ndGg/dGhpcy5fbG9hZF9ub2Rlcyh0LmNvcmUubG9hZGVkLGZ1bmN0aW9uKGUpe2RlbGV0ZSB0LmNvcmUubG9hZGVkLHRoaXMuc2V0X3N0YXRlKHQsaSl9KTooZGVsZXRlIHQuY29yZS5sb2FkZWQsdGhpcy5zZXRfc3RhdGUodCxpKSksITE7aWYodC5jb3JlLm9wZW4pcmV0dXJuIEUudmFrYXRhLmlzX2FycmF5KHQuY29yZS5vcGVuKSYmdC5jb3JlLm9wZW4ubGVuZ3RoP3RoaXMuX2xvYWRfbm9kZXModC5jb3JlLm9wZW4sZnVuY3Rpb24oZSl7dGhpcy5vcGVuX25vZGUoZSwhMSwwKSxkZWxldGUgdC5jb3JlLm9wZW4sdGhpcy5zZXRfc3RhdGUodCxpKX0pOihkZWxldGUgdC5jb3JlLm9wZW4sdGhpcy5zZXRfc3RhdGUodCxpKSksITE7aWYodC5jb3JlLnNjcm9sbClyZXR1cm4gdC5jb3JlLnNjcm9sbCYmdC5jb3JlLnNjcm9sbC5sZWZ0IT09UCYmdGhpcy5lbGVtZW50LnNjcm9sbExlZnQodC5jb3JlLnNjcm9sbC5sZWZ0KSx0LmNvcmUuc2Nyb2xsJiZ0LmNvcmUuc2Nyb2xsLnRvcCE9PVAmJnRoaXMuZWxlbWVudC5zY3JvbGxUb3AodC5jb3JlLnNjcm9sbC50b3ApLGRlbGV0ZSB0LmNvcmUuc2Nyb2xsLHRoaXMuc2V0X3N0YXRlKHQsaSksITE7aWYodC5jb3JlLnNlbGVjdGVkKXJldHVybiBhPXRoaXMsdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uIT09UCYmdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uIT09dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSkuc29ydCgpLmpvaW4oXCIsXCIpfHwodGhpcy5kZXNlbGVjdF9hbGwoKSxFLmVhY2godC5jb3JlLnNlbGVjdGVkLGZ1bmN0aW9uKGUsdCl7YS5zZWxlY3Rfbm9kZSh0LCExLCEwKX0pKSxkZWxldGUgdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uLGRlbGV0ZSB0LmNvcmUuc2VsZWN0ZWQsdGhpcy5zZXRfc3RhdGUodCxpKSwhMTtmb3IobiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJlwiY29yZVwiIT09biYmLTE9PT1FLmluQXJyYXkobix0aGlzLnNldHRpbmdzLnBsdWdpbnMpJiZkZWxldGUgdFtuXTtpZihFLmlzRW1wdHlPYmplY3QodC5jb3JlKSlyZXR1cm4gZGVsZXRlIHQuY29yZSx0aGlzLnNldF9zdGF0ZSh0LGkpLCExfXJldHVybiBFLmlzRW1wdHlPYmplY3QodCk/KHQ9bnVsbCxpJiZpLmNhbGwodGhpcyksdGhpcy50cmlnZ2VyKFwic2V0X3N0YXRlXCIpLCExKTohMH1yZXR1cm4hMX0scmVmcmVzaDpmdW5jdGlvbihlLHQpe3RoaXMuX2RhdGEuY29yZS5zdGF0ZT0hMD09PXQ/e306dGhpcy5nZXRfc3RhdGUoKSx0JiZFLnZha2F0YS5pc19mdW5jdGlvbih0KSYmKHRoaXMuX2RhdGEuY29yZS5zdGF0ZT10LmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUuc3RhdGUpKSx0aGlzLl9jbnQ9MCx0aGlzLl9tb2RlbC5kYXRhPXt9LHRoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF09e2lkOkUuanN0cmVlLnJvb3QscGFyZW50Om51bGwscGFyZW50czpbXSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLHN0YXRlOntsb2FkZWQ6ITF9fSx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9W10sdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD1udWxsLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGw7dmFyIGk9dGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lO2V8fCh0aGlzLmVsZW1lbnQuaHRtbChcIjx1bCBjbGFzcz0nXCIraStcIicgcm9sZT0nZ3JvdXAnPjxsaSBjbGFzcz0nanN0cmVlLWluaXRpYWwtbm9kZSBqc3RyZWUtbG9hZGluZyBqc3RyZWUtbGVhZiBqc3RyZWUtbGFzdCcgcm9sZT0nbm9uZScgaWQ9J2pcIit0aGlzLl9pZCtcIl9sb2FkaW5nJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLW9jbCc+PC9pPjxhIGNsYXNzPSdqc3RyZWUtYW5jaG9yJyByb2xlPSd0cmVlaXRlbScgaHJlZj0nIyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24taGlkZGVuJz48L2k+XCIrdGhpcy5nZXRfc3RyaW5nKFwiTG9hZGluZyAuLi5cIikrXCI8L2E+PC9saT48L3VsPlwiKSx0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLFwialwiK3RoaXMuX2lkK1wiX2xvYWRpbmdcIikpLHRoaXMubG9hZF9ub2RlKEUuanN0cmVlLnJvb3QsZnVuY3Rpb24oZSx0KXt0JiYodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lPWksdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkuaWQpLHRoaXMuc2V0X3N0YXRlKEUuZXh0ZW5kKCEwLHt9LHRoaXMuX2RhdGEuY29yZS5zdGF0ZSksZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoXCJyZWZyZXNoXCIpfSkpLHRoaXMuX2RhdGEuY29yZS5zdGF0ZT1udWxsfSl9LHJlZnJlc2hfbm9kZTpmdW5jdGlvbih0KXtpZighKHQ9dGhpcy5nZXRfbm9kZSh0KSl8fHQuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3ZhciBpPVtdLGU9W10scj10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKTtlLnB1c2godC5pZCksITA9PT10LnN0YXRlLm9wZW5lZCYmaS5wdXNoKHQuaWQpLHRoaXMuZ2V0X25vZGUodCwhMCkuZmluZChcIi5qc3RyZWUtb3BlblwiKS5lYWNoKGZ1bmN0aW9uKCl7ZS5wdXNoKHRoaXMuaWQpLGkucHVzaCh0aGlzLmlkKX0pLHRoaXMuX2xvYWRfbm9kZXMoZSxmdW5jdGlvbihlKXt0aGlzLm9wZW5fbm9kZShpLCExLDApLHRoaXMuc2VsZWN0X25vZGUociksdGhpcy50cmlnZ2VyKFwicmVmcmVzaF9ub2RlXCIse25vZGU6dCxub2RlczplfSl9LmJpbmQodGhpcyksITEsITApfSxzZXRfaWQ6ZnVuY3Rpb24oZSx0KXtpZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3ZhciBpLHIscz10aGlzLl9tb2RlbC5kYXRhLGE9ZS5pZDtmb3IodD10LnRvU3RyaW5nKCksc1tlLnBhcmVudF0uY2hpbGRyZW5bRS5pbkFycmF5KGUuaWQsc1tlLnBhcmVudF0uY2hpbGRyZW4pXT10LGk9MCxyPWUucGFyZW50cy5sZW5ndGg7aTxyO2krKylzW2UucGFyZW50c1tpXV0uY2hpbGRyZW5fZFtFLmluQXJyYXkoZS5pZCxzW2UucGFyZW50c1tpXV0uY2hpbGRyZW5fZCldPXQ7Zm9yKGk9MCxyPWUuY2hpbGRyZW4ubGVuZ3RoO2k8cjtpKyspc1tlLmNoaWxkcmVuW2ldXS5wYXJlbnQ9dDtmb3IoaT0wLHI9ZS5jaGlsZHJlbl9kLmxlbmd0aDtpPHI7aSsrKXNbZS5jaGlsZHJlbl9kW2ldXS5wYXJlbnRzW0UuaW5BcnJheShlLmlkLHNbZS5jaGlsZHJlbl9kW2ldXS5wYXJlbnRzKV09dDtyZXR1cm4tMSE9PShpPUUuaW5BcnJheShlLmlkLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCkpJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW2ldPXQpLChpPXRoaXMuZ2V0X25vZGUoZS5pZCwhMCkpJiYoaS5hdHRyKFwiaWRcIix0KSx0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKT09PWUuaWQmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdCkpLGRlbGV0ZSBzW2UuaWRdLGUuaWQ9dCxzW2UubGlfYXR0ci5pZD10XT1lLHRoaXMudHJpZ2dlcihcInNldF9pZFwiLHtub2RlOmUsbmV3OmUuaWQsb2xkOmF9KSwhMH0sZ2V0X3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmZS50ZXh0fSxzZXRfdGV4dDpmdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2ZvcihpPTAscj0oZT1lLnNsaWNlKCkpLmxlbmd0aDtpPHI7aSsrKXRoaXMuc2V0X3RleHQoZVtpXSx0KTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiYoZS50ZXh0PXQsdGhpcy5nZXRfbm9kZShlLCEwKS5sZW5ndGgmJnRoaXMucmVkcmF3X25vZGUoZS5pZCksdGhpcy50cmlnZ2VyKFwic2V0X3RleHRcIix7b2JqOmUsdGV4dDp0fSksITApfSxnZXRfanNvbjpmdW5jdGlvbihlLHQsaSl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZXx8RS5qc3RyZWUucm9vdCkpKXJldHVybiExO3QmJnQuZmxhdCYmIWkmJihpPVtdKTt2YXIgcj17aWQ6ZS5pZCx0ZXh0OmUudGV4dCxpY29uOnRoaXMuZ2V0X2ljb24oZSksbGlfYXR0cjpFLmV4dGVuZCghMCx7fSxlLmxpX2F0dHIpLGFfYXR0cjpFLmV4dGVuZCghMCx7fSxlLmFfYXR0ciksc3RhdGU6e30sZGF0YTooIXR8fCF0Lm5vX2RhdGEpJiZFLmV4dGVuZCghMCxFLnZha2F0YS5pc19hcnJheShlLmRhdGEpP1tdOnt9LGUuZGF0YSl9LHMsYTtpZih0JiZ0LmZsYXQ/ci5wYXJlbnQ9ZS5wYXJlbnQ6ci5jaGlsZHJlbj1bXSx0JiZ0Lm5vX3N0YXRlKWRlbGV0ZSByLnN0YXRlO2Vsc2UgZm9yKHMgaW4gZS5zdGF0ZSllLnN0YXRlLmhhc093blByb3BlcnR5KHMpJiYoci5zdGF0ZVtzXT1lLnN0YXRlW3NdKTtpZih0JiZ0Lm5vX2xpX2F0dHImJmRlbGV0ZSByLmxpX2F0dHIsdCYmdC5ub19hX2F0dHImJmRlbGV0ZSByLmFfYXR0cix0JiZ0Lm5vX2lkJiYoZGVsZXRlIHIuaWQsci5saV9hdHRyJiZyLmxpX2F0dHIuaWQmJmRlbGV0ZSByLmxpX2F0dHIuaWQsci5hX2F0dHImJnIuYV9hdHRyLmlkJiZkZWxldGUgci5hX2F0dHIuaWQpLHQmJnQuZmxhdCYmZS5pZCE9PUUuanN0cmVlLnJvb3QmJmkucHVzaChyKSwhdHx8IXQubm9fY2hpbGRyZW4pZm9yKHM9MCxhPWUuY2hpbGRyZW4ubGVuZ3RoO3M8YTtzKyspdCYmdC5mbGF0P3RoaXMuZ2V0X2pzb24oZS5jaGlsZHJlbltzXSx0LGkpOnIuY2hpbGRyZW4ucHVzaCh0aGlzLmdldF9qc29uKGUuY2hpbGRyZW5bc10sdCkpO3JldHVybiB0JiZ0LmZsYXQ/aTplLmlkPT09RS5qc3RyZWUucm9vdD9yLmNoaWxkcmVuOnJ9LGNyZWF0ZV9ub2RlOmZ1bmN0aW9uKGUsdCxpLHIscyl7aWYobnVsbD09PWUmJihlPUUuanN0cmVlLnJvb3QpLCEoZT10aGlzLmdldF9ub2RlKGUpKSlyZXR1cm4hMTtpZighKGk9aT09PVA/XCJsYXN0XCI6aSkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiYhcyYmIXRoaXMuaXNfbG9hZGVkKGUpKXJldHVybiB0aGlzLmxvYWRfbm9kZShlLGZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVfbm9kZShlLHQsaSxyLCEwKX0pO3ZhciBhLG4sZCxvO3N3aXRjaCgodD1cInN0cmluZ1wiPT10eXBlb2YodD10fHx7dGV4dDp0aGlzLmdldF9zdHJpbmcoXCJOZXcgbm9kZVwiKX0pP3t0ZXh0OnR9OkUuZXh0ZW5kKCEwLHt9LHQpKS50ZXh0PT09UCYmKHQudGV4dD10aGlzLmdldF9zdHJpbmcoXCJOZXcgbm9kZVwiKSksaT1lLmlkPT09RS5qc3RyZWUucm9vdCYmXCJhZnRlclwiPT09KGk9XCJiZWZvcmVcIj09PWk/XCJmaXJzdFwiOmkpP1wibGFzdFwiOmkpe2Nhc2VcImJlZm9yZVwiOmE9dGhpcy5nZXRfbm9kZShlLnBhcmVudCksaT1FLmluQXJyYXkoZS5pZCxhLmNoaWxkcmVuKSxlPWE7YnJlYWs7Y2FzZVwiYWZ0ZXJcIjphPXRoaXMuZ2V0X25vZGUoZS5wYXJlbnQpLGk9RS5pbkFycmF5KGUuaWQsYS5jaGlsZHJlbikrMSxlPWE7YnJlYWs7Y2FzZVwiaW5zaWRlXCI6Y2FzZVwiZmlyc3RcIjppPTA7YnJlYWs7Y2FzZVwibGFzdFwiOmk9ZS5jaGlsZHJlbi5sZW5ndGg7YnJlYWs7ZGVmYXVsdDppPWl8fDB9aWYoaT5lLmNoaWxkcmVuLmxlbmd0aCYmKGk9ZS5jaGlsZHJlbi5sZW5ndGgpLHQuaWQ9PT1QJiYodC5pZD0hMCksIXRoaXMuY2hlY2soXCJjcmVhdGVfbm9kZVwiLHQsZSxpKSlyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITE7aWYoITA9PT10LmlkJiZkZWxldGUgdC5pZCwhKHQ9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9qc29uKHQsZS5pZCxlLnBhcmVudHMuY29uY2F0KCkpKSlyZXR1cm4hMTtmb3IoYT10aGlzLmdldF9ub2RlKHQpLChuPVtdKS5wdXNoKHQpLG49bi5jb25jYXQoYS5jaGlsZHJlbl9kKSx0aGlzLnRyaWdnZXIoXCJtb2RlbFwiLHtub2RlczpuLHBhcmVudDplLmlkfSksZS5jaGlsZHJlbl9kPWUuY2hpbGRyZW5fZC5jb25jYXQobiksZD0wLG89ZS5wYXJlbnRzLmxlbmd0aDtkPG87ZCsrKXRoaXMuX21vZGVsLmRhdGFbZS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kPXRoaXMuX21vZGVsLmRhdGFbZS5wYXJlbnRzW2RdXS5jaGlsZHJlbl9kLmNvbmNhdChuKTtmb3IodD1hLGE9W10sZD0wLG89ZS5jaGlsZHJlbi5sZW5ndGg7ZDxvO2QrKylhW2k8PWQ/ZCsxOmRdPWUuY2hpbGRyZW5bZF07cmV0dXJuIGFbaV09dC5pZCxlLmNoaWxkcmVuPWEsdGhpcy5yZWRyYXdfbm9kZShlLCEwKSx0aGlzLnRyaWdnZXIoXCJjcmVhdGVfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUodCkscGFyZW50OmUuaWQscG9zaXRpb246aX0pLHImJnIuY2FsbCh0aGlzLHRoaXMuZ2V0X25vZGUodCkpLHQuaWR9LHJlbmFtZV9ub2RlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixzO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnJlbmFtZV9ub2RlKGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmKHM9ZS50ZXh0LHRoaXMuY2hlY2soXCJyZW5hbWVfbm9kZVwiLGUsdGhpcy5nZXRfcGFyZW50KGUpLHQpPyh0aGlzLnNldF90ZXh0KGUsdCksdGhpcy50cmlnZ2VyKFwicmVuYW1lX25vZGVcIix7bm9kZTplLHRleHQ6dCxvbGQ6c30pLCEwKToodGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITEpKX0sZGVsZXRlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyLHMsYSxuLGQsbyxjLGwsaCxzO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmRlbGV0ZV9ub2RlKGVbdF0pO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7aWYocj10aGlzLmdldF9ub2RlKGUucGFyZW50KSxzPUUuaW5BcnJheShlLmlkLHIuY2hpbGRyZW4pLGw9ITEsIXRoaXMuY2hlY2soXCJkZWxldGVfbm9kZVwiLGUscixzKSlyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITE7Zm9yKC0xIT09cyYmKHIuY2hpbGRyZW49RS52YWthdGEuYXJyYXlfcmVtb3ZlKHIuY2hpbGRyZW4scykpLChhPWUuY2hpbGRyZW5fZC5jb25jYXQoW10pKS5wdXNoKGUuaWQpLG49MCxkPWUucGFyZW50cy5sZW5ndGg7bjxkO24rKyl0aGlzLl9tb2RlbC5kYXRhW2UucGFyZW50c1tuXV0uY2hpbGRyZW5fZD1FLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbbl1dLmNoaWxkcmVuX2QsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1FLmluQXJyYXkoZSxhKX0pO2ZvcihvPTAsYz1hLmxlbmd0aDtvPGM7bysrKWlmKHRoaXMuX21vZGVsLmRhdGFbYVtvXV0uc3RhdGUuc2VsZWN0ZWQpe2w9ITA7YnJlYWt9Zm9yKGwmJih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9RS52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxmdW5jdGlvbihlKXtyZXR1cm4tMT09PUUuaW5BcnJheShlLGEpfSkpLHRoaXMudHJpZ2dlcihcImRlbGV0ZV9ub2RlXCIse25vZGU6ZSxwYXJlbnQ6ci5pZH0pLGwmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwiZGVsZXRlX25vZGVcIixub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLHBhcmVudDpyLmlkfSksbz0wLGM9YS5sZW5ndGg7bzxjO28rKylkZWxldGUgdGhpcy5fbW9kZWwuZGF0YVthW29dXTtyZXR1cm4tMSE9PUUuaW5BcnJheSh0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCxhKSYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwsaD10aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wLHM9dGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQsci5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS5jaGlsZHJlblswXSYmdGhpcy5nZXRfbm9kZSh0aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdLmNoaWxkcmVuWzBdLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKTp0aGlzLmdldF9ub2RlKHIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpLHRoaXMuZWxlbWVudFswXS5zY3JvbGxUb3A9aCx0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdD1zKSx0aGlzLnJlZHJhd19ub2RlKHIsITApLCEwfSxjaGVjazpmdW5jdGlvbihlLHQsaSxyLHMpe3Q9dCYmdC5pZD90OnRoaXMuZ2V0X25vZGUodCksaT1pJiZpLmlkP2k6dGhpcy5nZXRfbm9kZShpKTt2YXIgYT1lLm1hdGNoKC9eKG1vdmVfbm9kZXxjb3B5X25vZGV8Y3JlYXRlX25vZGUpJC9pKT9pOnQsbj10aGlzLnNldHRpbmdzLmNvcmUuY2hlY2tfY2FsbGJhY2s7aWYoXCJtb3ZlX25vZGVcIj09PWV8fFwiY29weV9ub2RlXCI9PT1lKXtpZighKHMmJnMuaXNfbXVsdGl8fFwibW92ZV9ub2RlXCIhPT1lfHxFLmluQXJyYXkodC5pZCxpLmNoaWxkcmVuKSE9PXIpKXJldHVybiEodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA4XCIscmVhc29uOlwiTW92aW5nIG5vZGUgdG8gaXRzIGN1cnJlbnQgcG9zaXRpb25cIixkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pO2lmKCEocyYmcy5pc19tdWx0aXx8dC5pZCE9PWkuaWQmJihcIm1vdmVfbm9kZVwiIT09ZXx8RS5pbkFycmF5KHQuaWQsaS5jaGlsZHJlbikhPT1yKSYmLTE9PT1FLmluQXJyYXkoaS5pZCx0LmNoaWxkcmVuX2QpKSlyZXR1cm4hKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wMVwiLHJlYXNvbjpcIk1vdmluZyBwYXJlbnQgaW5zaWRlIGNoaWxkXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQpJiZpLmlkfSl9KX1yZXR1cm4oYT1hJiZhLmRhdGE/YS5kYXRhOmEpJiZhLmZ1bmN0aW9ucyYmKCExPT09YS5mdW5jdGlvbnNbZV18fCEwPT09YS5mdW5jdGlvbnNbZV0pPyghMT09PWEuZnVuY3Rpb25zW2VdJiYodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzAyXCIscmVhc29uOlwiTm9kZSBkYXRhIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSksYS5mdW5jdGlvbnNbZV0pOiEoITE9PT1ufHxFLnZha2F0YS5pc19mdW5jdGlvbihuKSYmITE9PT1uLmNhbGwodGhpcyxlLHQsaSxyLHMpfHxuJiYhMT09PW5bZV0pfHwhKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wM1wiLHJlYXNvbjpcIlVzZXIgY29uZmlnIGZvciBjb3JlLmNoZWNrX2NhbGxiYWNrIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSl9LGxhc3RfZXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3J9LG1vdmVfbm9kZTpmdW5jdGlvbihlLHQsaSxyLHMsYSxuKXt2YXIgZCxvLGMsbCxoLF8sZyx1LGYscCxtLHYsaixrO2lmKHQ9dGhpcy5nZXRfbm9kZSh0KSxpPWk9PT1QPzA6aSwhdClyZXR1cm4hMTtpZighaS50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJiFzJiYhdGhpcy5pc19sb2FkZWQodCkpcmV0dXJuIHRoaXMubG9hZF9ub2RlKHQsZnVuY3Rpb24oKXt0aGlzLm1vdmVfbm9kZShlLHQsaSxyLCEwLCExLG4pfSk7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2lmKDEhPT1lLmxlbmd0aCl7Zm9yKGQ9MCxvPWUubGVuZ3RoO2Q8bztkKyspKGY9dGhpcy5tb3ZlX25vZGUoZVtkXSx0LGkscixzLCExLG4pKSYmKHQ9ZixpPVwiYWZ0ZXJcIik7cmV0dXJuIHRoaXMucmVkcmF3KCksITB9ZT1lWzBdfWlmKCEoZT1lJiZlLmlkIT09UD9lOnRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtpZihjPShlLnBhcmVudHx8RS5qc3RyZWUucm9vdCkudG9TdHJpbmcoKSxoPWkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiZ0LmlkIT09RS5qc3RyZWUucm9vdD90aGlzLmdldF9ub2RlKHQucGFyZW50KTp0LGc9IShfPW58fCh0aGlzLl9tb2RlbC5kYXRhW2UuaWRdP3RoaXM6RS5qc3RyZWUucmVmZXJlbmNlKGUuaWQpKSl8fCFfLl9pZHx8dGhpcy5faWQhPT1fLl9pZCxsPV8mJl8uX2lkJiZjJiZfLl9tb2RlbC5kYXRhW2NdJiZfLl9tb2RlbC5kYXRhW2NdLmNoaWxkcmVuP0UuaW5BcnJheShlLmlkLF8uX21vZGVsLmRhdGFbY10uY2hpbGRyZW4pOi0xLF8mJl8uX2lkJiYoZT1fLl9tb2RlbC5kYXRhW2UuaWRdKSxnKXJldHVybiEhKGY9dGhpcy5jb3B5X25vZGUoZSx0LGkscixzLCExLG4pKSYmKF8mJl8uZGVsZXRlX25vZGUoZSksZik7c3dpdGNoKGk9dC5pZD09PUUuanN0cmVlLnJvb3QmJlwiYWZ0ZXJcIj09PShpPVwiYmVmb3JlXCI9PT1pP1wiZmlyc3RcIjppKT9cImxhc3RcIjppKXtjYXNlXCJiZWZvcmVcIjppPUUuaW5BcnJheSh0LmlkLGguY2hpbGRyZW4pO2JyZWFrO2Nhc2VcImFmdGVyXCI6aT1FLmluQXJyYXkodC5pZCxoLmNoaWxkcmVuKSsxO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6aT0wO2JyZWFrO2Nhc2VcImxhc3RcIjppPWguY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6aT1pfHwwfWlmKGk+aC5jaGlsZHJlbi5sZW5ndGgmJihpPWguY2hpbGRyZW4ubGVuZ3RoKSwhdGhpcy5jaGVjayhcIm1vdmVfbm9kZVwiLGUsaCxpLHtjb3JlOiEwLG9yaWdpbjpuLGlzX211bHRpOl8mJl8uX2lkJiZfLl9pZCE9PXRoaXMuX2lkLGlzX2ZvcmVpZ246IV98fCFfLl9pZH0pKXJldHVybiB0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSwhMTtpZihlLnBhcmVudD09PWguaWQpe2Zvcih1PWguY2hpbGRyZW4uY29uY2F0KCksLTEhPT0oZj1FLmluQXJyYXkoZS5pZCx1KSkmJih1PUUudmFrYXRhLmFycmF5X3JlbW92ZSh1LGYpLGY8aSYmaS0tKSxmPVtdLHA9MCxtPXUubGVuZ3RoO3A8bTtwKyspZltpPD1wP3ArMTpwXT11W3BdO2ZbaV09ZS5pZCxoLmNoaWxkcmVuPWYsdGhpcy5fbm9kZV9jaGFuZ2VkKGguaWQpLHRoaXMucmVkcmF3KGguaWQ9PT1FLmpzdHJlZS5yb290KX1lbHNle2ZvcigoZj1lLmNoaWxkcmVuX2QuY29uY2F0KCkpLnB1c2goZS5pZCkscD0wLG09ZS5wYXJlbnRzLmxlbmd0aDtwPG07cCsrKXtmb3IodT1bXSx2PTAsaj0oaz1fLl9tb2RlbC5kYXRhW2UucGFyZW50c1twXV0uY2hpbGRyZW5fZCkubGVuZ3RoO3Y8ajt2KyspLTE9PT1FLmluQXJyYXkoa1t2XSxmKSYmdS5wdXNoKGtbdl0pO18uX21vZGVsLmRhdGFbZS5wYXJlbnRzW3BdXS5jaGlsZHJlbl9kPXV9Zm9yKF8uX21vZGVsLmRhdGFbY10uY2hpbGRyZW49RS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0oXy5fbW9kZWwuZGF0YVtjXS5jaGlsZHJlbixlLmlkKSxwPTAsbT1oLnBhcmVudHMubGVuZ3RoO3A8bTtwKyspdGhpcy5fbW9kZWwuZGF0YVtoLnBhcmVudHNbcF1dLmNoaWxkcmVuX2Q9dGhpcy5fbW9kZWwuZGF0YVtoLnBhcmVudHNbcF1dLmNoaWxkcmVuX2QuY29uY2F0KGYpO2Zvcih1PVtdLHA9MCxtPWguY2hpbGRyZW4ubGVuZ3RoO3A8bTtwKyspdVtpPD1wP3ArMTpwXT1oLmNoaWxkcmVuW3BdO2Zvcih1W2ldPWUuaWQsaC5jaGlsZHJlbj11LGguY2hpbGRyZW5fZC5wdXNoKGUuaWQpLGguY2hpbGRyZW5fZD1oLmNoaWxkcmVuX2QuY29uY2F0KGUuY2hpbGRyZW5fZCksZS5wYXJlbnQ9aC5pZCwoZj1oLnBhcmVudHMuY29uY2F0KCkpLnVuc2hpZnQoaC5pZCksaz1lLnBhcmVudHMubGVuZ3RoLGY9KGUucGFyZW50cz1mKS5jb25jYXQoKSxwPTAsbT1lLmNoaWxkcmVuX2QubGVuZ3RoO3A8bTtwKyspdGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2RbcF1dLnBhcmVudHM9dGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2RbcF1dLnBhcmVudHMuc2xpY2UoMCwtMSprKSxBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLl9tb2RlbC5kYXRhW2UuY2hpbGRyZW5fZFtwXV0ucGFyZW50cyxmKTtjIT09RS5qc3RyZWUucm9vdCYmaC5pZCE9PUUuanN0cmVlLnJvb3R8fCh0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCksdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXd8fCh0aGlzLl9ub2RlX2NoYW5nZWQoYyksdGhpcy5fbm9kZV9jaGFuZ2VkKGguaWQpKSxhfHx0aGlzLnJlZHJhdygpfXJldHVybiByJiZyLmNhbGwodGhpcyxlLGgsaSksdGhpcy50cmlnZ2VyKFwibW92ZV9ub2RlXCIse25vZGU6ZSxwYXJlbnQ6aC5pZCxwb3NpdGlvbjppLG9sZF9wYXJlbnQ6YyxvbGRfcG9zaXRpb246bCxpc19tdWx0aTpfJiZfLl9pZCYmXy5faWQhPT10aGlzLl9pZCxpc19mb3JlaWduOiFffHwhXy5faWQsb2xkX2luc3RhbmNlOl8sbmV3X2luc3RhbmNlOnRoaXN9KSxlLmlkfSxjb3B5X25vZGU6ZnVuY3Rpb24oZSx0LGkscixzLGEsbil7dmFyIGQsbyxjLGwsaCxfLGcsdSxmLHAsbTtpZih0PXRoaXMuZ2V0X25vZGUodCksaT1pPT09UD8wOmksIXQpcmV0dXJuITE7aWYoIWkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiYhcyYmIXRoaXMuaXNfbG9hZGVkKHQpKXJldHVybiB0aGlzLmxvYWRfbm9kZSh0LGZ1bmN0aW9uKCl7dGhpcy5jb3B5X25vZGUoZSx0LGksciwhMCwhMSxuKX0pO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtpZigxIT09ZS5sZW5ndGgpe2ZvcihkPTAsbz1lLmxlbmd0aDtkPG87ZCsrKShsPXRoaXMuY29weV9ub2RlKGVbZF0sdCxpLHIscywhMCxuKSkmJih0PWwsaT1cImFmdGVyXCIpO3JldHVybiB0aGlzLnJlZHJhdygpLCEwfWU9ZVswXX1pZighKGU9ZSYmZS5pZCE9PVA/ZTp0aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7c3dpdGNoKHU9KGUucGFyZW50fHxFLmpzdHJlZS5yb290KS50b1N0cmluZygpLGY9aS50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJnQuaWQhPT1FLmpzdHJlZS5yb290P3RoaXMuZ2V0X25vZGUodC5wYXJlbnQpOnQsbT0hKHA9bnx8KHRoaXMuX21vZGVsLmRhdGFbZS5pZF0/dGhpczpFLmpzdHJlZS5yZWZlcmVuY2UoZS5pZCkpKXx8IXAuX2lkfHx0aGlzLl9pZCE9PXAuX2lkLHAmJnAuX2lkJiYoZT1wLl9tb2RlbC5kYXRhW2UuaWRdKSxpPXQuaWQ9PT1FLmpzdHJlZS5yb290JiZcImFmdGVyXCI9PT0oaT1cImJlZm9yZVwiPT09aT9cImZpcnN0XCI6aSk/XCJsYXN0XCI6aSl7Y2FzZVwiYmVmb3JlXCI6aT1FLmluQXJyYXkodC5pZCxmLmNoaWxkcmVuKTticmVhaztjYXNlXCJhZnRlclwiOmk9RS5pbkFycmF5KHQuaWQsZi5jaGlsZHJlbikrMTticmVhaztjYXNlXCJpbnNpZGVcIjpjYXNlXCJmaXJzdFwiOmk9MDticmVhaztjYXNlXCJsYXN0XCI6aT1mLmNoaWxkcmVuLmxlbmd0aDticmVhaztkZWZhdWx0Omk9aXx8MH1pZihpPmYuY2hpbGRyZW4ubGVuZ3RoJiYoaT1mLmNoaWxkcmVuLmxlbmd0aCksIXRoaXMuY2hlY2soXCJjb3B5X25vZGVcIixlLGYsaSx7Y29yZTohMCxvcmlnaW46bixpc19tdWx0aTpwJiZwLl9pZCYmcC5faWQhPT10aGlzLl9pZCxpc19mb3JlaWduOiFwfHwhcC5faWR9KSlyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITE7aWYoIShnPXA/cC5nZXRfanNvbihlLHtub19pZDohMCxub19kYXRhOiEwLG5vX3N0YXRlOiEwfSk6ZSkpcmV0dXJuITE7aWYoITA9PT1nLmlkJiZkZWxldGUgZy5pZCwhKGc9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9qc29uKGcsZi5pZCxmLnBhcmVudHMuY29uY2F0KCkpKSlyZXR1cm4hMTtmb3IobD10aGlzLmdldF9ub2RlKGcpLGUmJmUuc3RhdGUmJiExPT09ZS5zdGF0ZS5sb2FkZWQmJihsLnN0YXRlLmxvYWRlZD0hMSksKGM9W10pLnB1c2goZyksYz1jLmNvbmNhdChsLmNoaWxkcmVuX2QpLHRoaXMudHJpZ2dlcihcIm1vZGVsXCIse25vZGVzOmMscGFyZW50OmYuaWR9KSxoPTAsXz1mLnBhcmVudHMubGVuZ3RoO2g8XztoKyspdGhpcy5fbW9kZWwuZGF0YVtmLnBhcmVudHNbaF1dLmNoaWxkcmVuX2Q9dGhpcy5fbW9kZWwuZGF0YVtmLnBhcmVudHNbaF1dLmNoaWxkcmVuX2QuY29uY2F0KGMpO2ZvcihjPVtdLGg9MCxfPWYuY2hpbGRyZW4ubGVuZ3RoO2g8XztoKyspY1tpPD1oP2grMTpoXT1mLmNoaWxkcmVuW2hdO3JldHVybiBjW2ldPWwuaWQsZi5jaGlsZHJlbj1jLGYuY2hpbGRyZW5fZC5wdXNoKGwuaWQpLGYuY2hpbGRyZW5fZD1mLmNoaWxkcmVuX2QuY29uY2F0KGwuY2hpbGRyZW5fZCksZi5pZD09PUUuanN0cmVlLnJvb3QmJih0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCksdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXd8fHRoaXMuX25vZGVfY2hhbmdlZChmLmlkKSxhfHx0aGlzLnJlZHJhdyhmLmlkPT09RS5qc3RyZWUucm9vdCksciYmci5jYWxsKHRoaXMsbCxmLGkpLHRoaXMudHJpZ2dlcihcImNvcHlfbm9kZVwiLHtub2RlOmwsb3JpZ2luYWw6ZSxwYXJlbnQ6Zi5pZCxwb3NpdGlvbjppLG9sZF9wYXJlbnQ6dSxvbGRfcG9zaXRpb246cCYmcC5faWQmJnUmJnAuX21vZGVsLmRhdGFbdV0mJnAuX21vZGVsLmRhdGFbdV0uY2hpbGRyZW4/RS5pbkFycmF5KGUuaWQscC5fbW9kZWwuZGF0YVt1XS5jaGlsZHJlbik6LTEsaXNfbXVsdGk6cCYmcC5faWQmJnAuX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohcHx8IXAuX2lkLG9sZF9pbnN0YW5jZTpwLG5ld19pbnN0YW5jZTp0aGlzfSksbC5pZH0sY3V0OmZ1bmN0aW9uKGUpe2lmKGU9ZXx8dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdCgpLCEoZT0hRS52YWthdGEuaXNfYXJyYXkoZSk/W2VdOmUpLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHQ9W10saSxyLHMscj0wLHM9ZS5sZW5ndGg7cjxzO3IrKykoaT10aGlzLmdldF9ub2RlKGVbcl0pKSYmKGkuaWR8fDA9PT1pLmlkKSYmaS5pZCE9PUUuanN0cmVlLnJvb3QmJnQucHVzaChpKTtpZighdC5sZW5ndGgpcmV0dXJuITE7YT10LG49XCJtb3ZlX25vZGVcIiwoZD10aGlzKS50cmlnZ2VyKFwiY3V0XCIse25vZGU6ZX0pfSxjb3B5OmZ1bmN0aW9uKGUpe2lmKGU9ZXx8dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdCgpLCEoZT0hRS52YWthdGEuaXNfYXJyYXkoZSk/W2VdOmUpLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHQ9W10saSxyLHMscj0wLHM9ZS5sZW5ndGg7cjxzO3IrKykoaT10aGlzLmdldF9ub2RlKGVbcl0pKSYmaS5pZCE9PVAmJmkuaWQhPT1FLmpzdHJlZS5yb290JiZ0LnB1c2goaSk7aWYoIXQubGVuZ3RoKXJldHVybiExO2E9dCxuPVwiY29weV9ub2RlXCIsKGQ9dGhpcykudHJpZ2dlcihcImNvcHlcIix7bm9kZTplfSl9LGdldF9idWZmZXI6ZnVuY3Rpb24oKXtyZXR1cm57bW9kZTpuLG5vZGU6YSxpbnN0OmR9fSxjYW5fcGFzdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMSE9PW4mJiExIT09YX0scGFzdGU6ZnVuY3Rpb24oZSx0KXtpZighKChlPXRoaXMuZ2V0X25vZGUoZSkpJiZuJiZuLm1hdGNoKC9eKGNvcHlfbm9kZXxtb3ZlX25vZGUpJC8pJiZhKSlyZXR1cm4hMTt0aGlzW25dKGEsZSx0LCExLCExLCExLGQpJiZ0aGlzLnRyaWdnZXIoXCJwYXN0ZVwiLHtwYXJlbnQ6ZS5pZCxub2RlOmEsbW9kZTpufSksZD1uPWE9ITF9LGNsZWFyX2J1ZmZlcjpmdW5jdGlvbigpe2Q9bj1hPSExLHRoaXMudHJpZ2dlcihcImNsZWFyX2J1ZmZlclwiKX0sZWRpdDpmdW5jdGlvbihyLGUscyl7dmFyIHQsaSxhLG4sZCxvLGMsdCxsLGg9ITE7cmV0dXJuISEocj10aGlzLmdldF9ub2RlKHIpKSYmKHRoaXMuY2hlY2soXCJlZGl0XCIscix0aGlzLmdldF9wYXJlbnQocikpPyhsPXIsZT1cInN0cmluZ1wiPT10eXBlb2YgZT9lOnIudGV4dCx0aGlzLnNldF90ZXh0KHIsXCJcIikscj10aGlzLl9vcGVuX3RvKHIpLGwudGV4dD1lLHQ9dGhpcy5fZGF0YS5jb3JlLnJ0bCxpPXRoaXMuZWxlbWVudC53aWR0aCgpLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPWwuaWQsYT1yLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpLG49RShcIjxzcGFuPjwvc3Bhbj5cIiksZD1lLG89RShcIjxkaXY+PC9kaXY+XCIse2Nzczp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIi0yMDBweFwiLGxlZnQ6dD9cIjBweFwiOlwiLTEwMDBweFwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIn19KS5hcHBlbmRUbyhiLmJvZHkpLGM9RShcIjxpbnB1dCAvPlwiLHt2YWx1ZTpkLGNsYXNzOlwianN0cmVlLXJlbmFtZS1pbnB1dFwiLGNzczp7cGFkZGluZzpcIjBcIixib3JkZXI6XCIxcHggc29saWQgc2lsdmVyXCIsXCJib3gtc2l6aW5nXCI6XCJib3JkZXItYm94XCIsZGlzcGxheTpcImlubGluZS1ibG9ja1wiLGhlaWdodDp0aGlzLl9kYXRhLmNvcmUubGlfaGVpZ2h0K1wicHhcIixsaW5lSGVpZ2h0OnRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQrXCJweFwiLHdpZHRoOlwiMTUwcHhcIn0sYmx1cjpmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKTt2YXIgdCxpPW4uY2hpbGRyZW4oXCIuanN0cmVlLXJlbmFtZS1pbnB1dFwiKS52YWwoKSxlPXRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0LGU7XCJcIj09PWkmJihpPWQpLG8ucmVtb3ZlKCksbi5yZXBsYWNlV2l0aChhKSxuLnJlbW92ZSgpLGQ9ZT9kOkUoXCI8ZGl2PjwvZGl2PlwiKS5hcHBlbmQoRS5wYXJzZUhUTUwoZCkpLmh0bWwoKSxyPXRoaXMuZ2V0X25vZGUociksdGhpcy5zZXRfdGV4dChyLGQpLChlPSEhdGhpcy5yZW5hbWVfbm9kZShyLGU/RShcIjxkaXY+PC9kaXY+XCIpLnRleHQoaSkudGV4dCgpOkUoXCI8ZGl2PjwvZGl2PlwiKS5hcHBlbmQoRS5wYXJzZUhUTUwoaSkpLmh0bWwoKSkpfHx0aGlzLnNldF90ZXh0KHIsZCksdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9bC5pZCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRfbm9kZShsLmlkLCEwKTtlLmxlbmd0aCYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPWwuaWQsZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSl9LmJpbmQodGhpcyksMCkscyYmcy5jYWxsKHRoaXMsbCxlLGgsaSksYz1udWxsfS5iaW5kKHRoaXMpLGtleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aGljaDsyNz09PXQmJihoPSEwLHRoaXMudmFsdWU9ZCksMjchPT10JiYxMyE9PXQmJjM3IT09dCYmMzghPT10JiYzOSE9PXQmJjQwIT09dCYmMzIhPT10fHxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLDI3IT09dCYmMTMhPT10fHwoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmx1cigpKX0sY2xpY2s6ZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9LGtleXVwOmZ1bmN0aW9uKGUpe2Mud2lkdGgoTWF0aC5taW4oby50ZXh0KFwicFdcIit0aGlzLnZhbHVlKS53aWR0aCgpLGkpKX0sa2V5cHJlc3M6ZnVuY3Rpb24oZSl7aWYoMTM9PT1lLndoaWNoKXJldHVybiExfX0pLHQ9e2ZvbnRGYW1pbHk6YS5jc3MoXCJmb250RmFtaWx5XCIpfHxcIlwiLGZvbnRTaXplOmEuY3NzKFwiZm9udFNpemVcIil8fFwiXCIsZm9udFdlaWdodDphLmNzcyhcImZvbnRXZWlnaHRcIil8fFwiXCIsZm9udFN0eWxlOmEuY3NzKFwiZm9udFN0eWxlXCIpfHxcIlwiLGZvbnRTdHJldGNoOmEuY3NzKFwiZm9udFN0cmV0Y2hcIil8fFwiXCIsZm9udFZhcmlhbnQ6YS5jc3MoXCJmb250VmFyaWFudFwiKXx8XCJcIixsZXR0ZXJTcGFjaW5nOmEuY3NzKFwibGV0dGVyU3BhY2luZ1wiKXx8XCJcIix3b3JkU3BhY2luZzphLmNzcyhcIndvcmRTcGFjaW5nXCIpfHxcIlwifSxuLmF0dHIoXCJjbGFzc1wiLGEuYXR0cihcImNsYXNzXCIpKS5hcHBlbmQoYS5jb250ZW50cygpLmNsb25lKCkpLmFwcGVuZChjKSxhLnJlcGxhY2VXaXRoKG4pLG8uY3NzKHQpLGMuY3NzKHQpLndpZHRoKE1hdGgubWluKG8udGV4dChcInBXXCIrY1swXS52YWx1ZSkud2lkdGgoKSxpKSlbMF0uc2VsZWN0KCksdm9pZCBFKGIpLm9uZShcIm1vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWUgZG5kX3N0YXJ0LnZha2F0YVwiLGZ1bmN0aW9uKGUpe2MmJmUudGFyZ2V0IT09YyYmRShjKS50cmlnZ2VyKFwiYmx1clwiKX0pKToodGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITEpKX0sc2V0X3RoZW1lOmZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuITE7dmFyIGksaTsodD0hMD09PXQ/KGk9KGk9dGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5kaXIpfHxFLmpzdHJlZS5wYXRoK1wiL3RoZW1lc1wiKStcIi9cIitlK1wiL3N0eWxlLmNzc1wiOnQpJiYtMT09PUUuaW5BcnJheSh0LHIpJiYoRShcImhlYWRcIikuYXBwZW5kKCc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIicrdCsnXCIgdHlwZT1cInRleHQvY3NzXCIgLz4nKSxyLnB1c2godCkpLHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwianN0cmVlLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSksdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lPWUsdGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLVwiK2UpLHRoaXMuZWxlbWVudFt0aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzLnJlc3BvbnNpdmU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtXCIrZStcIi1yZXNwb25zaXZlXCIpLHRoaXMudHJpZ2dlcihcInNldF90aGVtZVwiLHt0aGVtZTplfSl9LGdldF90aGVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWV9LHNldF90aGVtZV92YXJpYW50OmZ1bmN0aW9uKGUpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudCYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwianN0cmVlLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZStcIi1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQpLCh0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQ9ZSkmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImpzdHJlZS1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUrXCItXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50KX0sZ2V0X3RoZW1lX3ZhcmlhbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50fSxzaG93X3N0cmlwZXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtc3RyaXBlZFwiKSx0aGlzLnRyaWdnZXIoXCJzaG93X3N0cmlwZXNcIil9LGhpZGVfc3RyaXBlczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1zdHJpcGVkXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfc3RyaXBlc1wiKX0sdG9nZ2xlX3N0cmlwZXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM/dGhpcy5oaWRlX3N0cmlwZXMoKTp0aGlzLnNob3dfc3RyaXBlcygpfSxzaG93X2RvdHM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbm8tZG90c1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2RvdHNcIil9LGhpZGVfZG90czpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1kb3RzXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfZG90c1wiKX0sdG9nZ2xlX2RvdHM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM/dGhpcy5oaWRlX2RvdHMoKTp0aGlzLnNob3dfZG90cygpfSxzaG93X2ljb25zOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1pY29uc1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2ljb25zXCIpfSxoaWRlX2ljb25zOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1pY29uc1wiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2ljb25zXCIpfSx0b2dnbGVfaWNvbnM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zP3RoaXMuaGlkZV9pY29ucygpOnRoaXMuc2hvd19pY29ucygpfSxzaG93X2VsbGlwc2lzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1lbGxpcHNpc1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2VsbGlwc2lzXCIpfSxoaWRlX2VsbGlwc2lzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lbGxpcHNpc1wiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2VsbGlwc2lzXCIpfSx0b2dnbGVfZWxsaXBzaXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzP3RoaXMuaGlkZV9lbGxpcHNpcygpOnRoaXMuc2hvd19lbGxpcHNpcygpfSxzZXRfaWNvbjpmdW5jdGlvbihlLHQpe3ZhciBpLHIscyxhO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnNldF9pY29uKGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmKGE9ZS5pY29uLGUuaWNvbj0hMD09PXR8fG51bGw9PT10fHx0PT09UHx8XCJcIj09PXR8fHQscz10aGlzLmdldF9ub2RlKGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKSwhMT09PXQ/KHMucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWN1c3RvbSBcIithKS5jc3MoXCJiYWNrZ3JvdW5kXCIsXCJcIikucmVtb3ZlQXR0cihcInJlbFwiKSx0aGlzLmhpZGVfaWNvbihlKSk6KCEwPT09dHx8bnVsbD09PXR8fHQ9PT1QfHxcIlwiPT09dD9zLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b20gXCIrYSkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLnJlbW92ZUF0dHIoXCJyZWxcIik6LTE9PT10LmluZGV4T2YoXCIvXCIpJiYtMT09PXQuaW5kZXhPZihcIi5cIik/KHMucmVtb3ZlQ2xhc3MoYSkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLHMuYWRkQ2xhc3ModCtcIiBqc3RyZWUtdGhlbWVpY29uLWN1c3RvbVwiKS5hdHRyKFwicmVsXCIsdCkpOihzLnJlbW92ZUNsYXNzKGEpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKSxzLmFkZENsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikuY3NzKFwiYmFja2dyb3VuZFwiLFwidXJsKCdcIit0K1wiJykgY2VudGVyIGNlbnRlciBuby1yZXBlYXRcIikuYXR0cihcInJlbFwiLHQpKSwhMT09PWEmJnRoaXMuc2hvd19pY29uKGUpKSwhMCl9LGdldF9pY29uOmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJmUuaWNvbn0saGlkZV9pY29uOmZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2Zvcih0PTAsaT0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PGk7dCsrKXRoaXMuaGlkZV9pY29uKGVbdF0pO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlPT09RS5qc3RyZWUucm9vdCkmJihlLmljb249ITEsdGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYWRkQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKSwhMCl9LHNob3dfaWNvbjpmdW5jdGlvbihlKXt2YXIgdCxpLHI7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2Zvcih0PTAsaT0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PGk7dCsrKXRoaXMuc2hvd19pY29uKGVbdF0pO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlPT09RS5qc3RyZWUucm9vdCkmJihyPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5pY29uPSFyLmxlbmd0aHx8ci5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYXR0cihcInJlbFwiKSxlLmljb258fChlLmljb249ITApLHIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIiksITApfX0sRS52YWthdGE9e30sRS52YWthdGEuYXR0cmlidXRlcz1mdW5jdGlvbihlLGkpe2U9RShlKVswXTt2YXIgcj1pP3t9OltdO3JldHVybiBlJiZlLmF0dHJpYnV0ZXMmJkUuZWFjaChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSx0KXstMT09PUUuaW5BcnJheSh0Lm5hbWUudG9Mb3dlckNhc2UoKSxbXCJzdHlsZVwiLFwiY29udGVudGVkaXRhYmxlXCIsXCJoYXNmb2N1c1wiLFwidGFiaW5kZXhcIl0pJiZudWxsIT09dC52YWx1ZSYmXCJcIiE9PUUudmFrYXRhLnRyaW0odC52YWx1ZSkmJihpP3JbdC5uYW1lXT10LnZhbHVlOnIucHVzaCh0Lm5hbWUpKX0pLHJ9LEUudmFrYXRhLmFycmF5X3VuaXF1ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10saSxyLHMsYT17fSxpPTAscz1lLmxlbmd0aDtpPHM7aSsrKWFbZVtpXV09PT1QJiYodC5wdXNoKGVbaV0pLGFbZVtpXV09ITApO3JldHVybiB0fSxFLnZha2F0YS5hcnJheV9yZW1vdmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zcGxpY2UodCwxKSxlfSxFLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbT1mdW5jdGlvbihlLHQpe3ZhciB0PUUuaW5BcnJheSh0LGUpO3JldHVybi0xIT09dD9FLnZha2F0YS5hcnJheV9yZW1vdmUoZSx0KTplfSxFLnZha2F0YS5hcnJheV9maWx0ZXI9ZnVuY3Rpb24oZSx0LGkscixzKXtpZihlLmZpbHRlcilyZXR1cm4gZS5maWx0ZXIodCxpKTtmb3IocyBpbiByPVtdLGUpfn5zK1wiXCI9PXMrXCJcIiYmMDw9cyYmdC5jYWxsKGksZVtzXSwrcyxlKSYmci5wdXNoKGVbc10pO3JldHVybiByfSxFLnZha2F0YS50cmltPWZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0/U3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwoZS50b1N0cmluZygpKTplLnRvU3RyaW5nKCkucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIil9LEUudmFrYXRhLmlzX2Z1bmN0aW9uPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJlwibnVtYmVyXCIhPXR5cGVvZiBlLm5vZGVUeXBlfSxFLnZha2F0YS5pc19hcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9YXJndW1lbnRzWzBdLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlXCIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXIuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0LmFwcGx5KGksZSl9fSksRS5qc3RyZWUucGx1Z2lucy5jaGFuZ2VkPWZ1bmN0aW9uKGUsYSl7dmFyIG49W107dGhpcy50cmlnZ2VyPWZ1bmN0aW9uKGUsdCl7dmFyIGkscjtpZih0PXR8fHt9LFwiY2hhbmdlZFwiPT09ZS5yZXBsYWNlKFwiLmpzdHJlZVwiLFwiXCIpKXt0LmNoYW5nZWQ9e3NlbGVjdGVkOltdLGRlc2VsZWN0ZWQ6W119O2Zvcih2YXIgcz17fSxpPTAscj1uLmxlbmd0aDtpPHI7aSsrKXNbbltpXV09MTtmb3IoaT0wLHI9dC5zZWxlY3RlZC5sZW5ndGg7aTxyO2krKylzW3Quc2VsZWN0ZWRbaV1dP3NbdC5zZWxlY3RlZFtpXV09Mjp0LmNoYW5nZWQuc2VsZWN0ZWQucHVzaCh0LnNlbGVjdGVkW2ldKTtmb3IoaT0wLHI9bi5sZW5ndGg7aTxyO2krKykxPT09c1tuW2ldXSYmdC5jaGFuZ2VkLmRlc2VsZWN0ZWQucHVzaChuW2ldKTtuPXQuc2VsZWN0ZWQuc2xpY2UoKX1hLnRyaWdnZXIuY2FsbCh0aGlzLGUsdCl9LHRoaXMucmVmcmVzaD1mdW5jdGlvbihlLHQpe3JldHVybiBuPVtdLGEucmVmcmVzaC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTt2YXIgbD1iLmNyZWF0ZUVsZW1lbnQoXCJJXCIpLGgsXyxnLG8sdSxmLHAsdztsLmNsYXNzTmFtZT1cImpzdHJlZS1pY29uIGpzdHJlZS1jaGVja2JveFwiLGwuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLEUuanN0cmVlLmRlZmF1bHRzLmNoZWNrYm94PXt2aXNpYmxlOiEwLHRocmVlX3N0YXRlOiEwLHdob2xlX25vZGU6ITAsa2VlcF9zZWxlY3RlZF9zdHlsZTohMCxjYXNjYWRlOlwiXCIsdGllX3NlbGVjdGlvbjohMCxjYXNjYWRlX3RvX2Rpc2FibGVkOiEwLGNhc2NhZGVfdG9faGlkZGVuOiEwfSxFLmpzdHJlZS5wbHVnaW5zLmNoZWNrYm94PWZ1bmN0aW9uKGUsbyl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7by5iaW5kLmNhbGwodGhpcyksdGhpcy5fZGF0YS5jaGVja2JveC51dG89ITEsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1bXSx0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRocmVlX3N0YXRlJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlPVwidXArZG93bit1bmRldGVybWluZWRcIiksdGhpcy5lbGVtZW50Lm9uKFwiaW5pdC5qc3RyZWVcIixmdW5jdGlvbigpe3RoaXMuX2RhdGEuY2hlY2tib3gudmlzaWJsZT10aGlzLnNldHRpbmdzLmNoZWNrYm94LnZpc2libGUsdGhpcy5zZXR0aW5ncy5jaGVja2JveC5rZWVwX3NlbGVjdGVkX3N0eWxlfHx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtbm8tY2xpY2tlZFwiKSx0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImpzdHJlZS1jaGVja2JveC1zZWxlY3Rpb25cIil9LmJpbmQodGhpcykpLm9uKFwibG9hZGluZy5qc3RyZWVcIixmdW5jdGlvbigpe3RoaXNbdGhpcy5fZGF0YS5jaGVja2JveC52aXNpYmxlP1wic2hvd19jaGVja2JveGVzXCI6XCJoaWRlX2NoZWNrYm94ZXNcIl0oKX0uYmluZCh0aGlzKSksLTEhPT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVuZGV0ZXJtaW5lZFwiKSYmdGhpcy5lbGVtZW50Lm9uKFwiY2hhbmdlZC5qc3RyZWUgdW5jaGVja19ub2RlLmpzdHJlZSBjaGVja19ub2RlLmpzdHJlZSB1bmNoZWNrX2FsbC5qc3RyZWUgY2hlY2tfYWxsLmpzdHJlZSBtb3ZlX25vZGUuanN0cmVlIGNvcHlfbm9kZS5qc3RyZWUgcmVkcmF3LmpzdHJlZSBvcGVuX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNoZWNrYm94LnV0byYmY2xlYXJUaW1lb3V0KHRoaXMuX2RhdGEuY2hlY2tib3gudXRvKSx0aGlzLl9kYXRhLmNoZWNrYm94LnV0bz1zZXRUaW1lb3V0KHRoaXMuX3VuZGV0ZXJtaW5lZC5iaW5kKHRoaXMpLDUwKX0uYmluZCh0aGlzKSksdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9ufHx0aGlzLmVsZW1lbnQub24oXCJtb2RlbC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLl9tb2RlbC5kYXRhLHI9aVt0LnBhcmVudF0scz10Lm5vZGVzLGEsbixhPTAsbj1zLmxlbmd0aDthPG47YSsrKWlbc1thXV0uc3RhdGUuY2hlY2tlZD1pW3NbYV1dLnN0YXRlLmNoZWNrZWR8fGlbc1thXV0ub3JpZ2luYWwmJmlbc1thXV0ub3JpZ2luYWwuc3RhdGUmJmlbc1thXV0ub3JpZ2luYWwuc3RhdGUuY2hlY2tlZCxpW3NbYV1dLnN0YXRlLmNoZWNrZWQmJnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQucHVzaChzW2FdKX0uYmluZCh0aGlzKSksLTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVwXCIpJiYtMT09PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwiZG93blwiKXx8dGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9tb2RlbC5kYXRhLHI9aVt0LnBhcmVudF0scz10Lm5vZGVzLGE9W10sbixkLG8sYyxsLGgsdD10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUsXz10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb247aWYoLTEhPT10LmluZGV4T2YoXCJkb3duXCIpKWlmKHIuc3RhdGVbXz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3IoZD0wLG89cy5sZW5ndGg7ZDxvO2QrKylpW3NbZF1dLnN0YXRlW18/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMDt0aGlzLl9kYXRhW18/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD10aGlzLl9kYXRhW18/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5jb25jYXQocyl9ZWxzZSBmb3IoZD0wLG89cy5sZW5ndGg7ZDxvO2QrKylpZihpW3NbZF1dLnN0YXRlW18/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKGM9MCxsPWlbc1tkXV0uY2hpbGRyZW5fZC5sZW5ndGg7YzxsO2MrKylpW2lbc1tkXV0uY2hpbGRyZW5fZFtjXV0uc3RhdGVbXz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwO3RoaXMuX2RhdGFbXz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPXRoaXMuX2RhdGFbXz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLmNvbmNhdChpW3NbZF1dLmNoaWxkcmVuX2QpfWlmKC0xIT09dC5pbmRleE9mKFwidXBcIikpe2ZvcihkPTAsbz1yLmNoaWxkcmVuX2QubGVuZ3RoO2Q8bztkKyspaVtyLmNoaWxkcmVuX2RbZF1dLmNoaWxkcmVuLmxlbmd0aHx8YS5wdXNoKGlbci5jaGlsZHJlbl9kW2RdXS5wYXJlbnQpO2ZvcihjPTAsbD0oYT1FLnZha2F0YS5hcnJheV91bmlxdWUoYSkpLmxlbmd0aDtjPGw7YysrKXtyPWlbYVtjXV07d2hpbGUociYmci5pZCE9PUUuanN0cmVlLnJvb3Qpe2ZvcihkPW49MCxvPXIuY2hpbGRyZW4ubGVuZ3RoO2Q8bztkKyspbis9aVtyLmNoaWxkcmVuW2RdXS5zdGF0ZVtfP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYobiE9PW8pYnJlYWs7ci5zdGF0ZVtfP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITAsdGhpcy5fZGF0YVtfP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQucHVzaChyLmlkKSwoaD10aGlzLmdldF9ub2RlKHIsITApKSYmaC5sZW5ndGgmJmguY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hZGRDbGFzcyhfP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpLHI9dGhpcy5nZXRfbm9kZShyLnBhcmVudCl9fX10aGlzLl9kYXRhW18/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV91bmlxdWUodGhpcy5fZGF0YVtfP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQpfS5iaW5kKHRoaXMpKS5vbih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/XCJzZWxlY3Rfbm9kZS5qc3RyZWVcIjpcImNoZWNrX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLHI9dC5ub2RlLHM9dGhpcy5fbW9kZWwuZGF0YSxhPXRoaXMuZ2V0X25vZGUoci5wYXJlbnQpLG4sZCxvLGMsdD10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUsbD10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24saD17fSxfPXRoaXMuX2RhdGFbbD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkO2ZvcihuPTAsZD1fLmxlbmd0aDtuPGQ7bisrKWhbX1tuXV09ITA7aWYoLTEhPT10LmluZGV4T2YoXCJkb3duXCIpKWZvcih2YXIgZz10aGlzLl9jYXNjYWRlX25ld19jaGVja2VkX3N0YXRlKHIuaWQsITApLHU9ci5jaGlsZHJlbl9kLmNvbmNhdChyLmlkKSxuPTAsZD11Lmxlbmd0aDtuPGQ7bisrKS0xPGcuaW5kZXhPZih1W25dKT9oW3Vbbl1dPSEwOmRlbGV0ZSBoW3Vbbl1dO2lmKC0xIT09dC5pbmRleE9mKFwidXBcIikpd2hpbGUoYSYmYS5pZCE9PUUuanN0cmVlLnJvb3Qpe2ZvcihuPW89MCxkPWEuY2hpbGRyZW4ubGVuZ3RoO248ZDtuKyspbys9c1thLmNoaWxkcmVuW25dXS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYobyE9PWQpYnJlYWs7YS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITAsaFthLmlkXT0hMCwoYz10aGlzLmdldF9ub2RlKGEsITApKSYmYy5sZW5ndGgmJmMuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hZGRDbGFzcyhsP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpLGE9dGhpcy5nZXRfbm9kZShhLnBhcmVudCl9Zm9yKG4gaW4gXz1bXSxoKWguaGFzT3duUHJvcGVydHkobikmJl8ucHVzaChuKTt0aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD1ffS5iaW5kKHRoaXMpKS5vbih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/XCJkZXNlbGVjdF9hbGwuanN0cmVlXCI6XCJ1bmNoZWNrX2FsbC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLmdldF9ub2RlKEUuanN0cmVlLnJvb3QpLHI9dGhpcy5fbW9kZWwuZGF0YSxzLGEsbixzPTAsYT1pLmNoaWxkcmVuX2QubGVuZ3RoO3M8YTtzKyspKG49cltpLmNoaWxkcmVuX2Rbc11dKSYmbi5vcmlnaW5hbCYmbi5vcmlnaW5hbC5zdGF0ZSYmbi5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihuLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD0hMSl9LmJpbmQodGhpcykpLm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj9cImRlc2VsZWN0X25vZGUuanN0cmVlXCI6XCJ1bmNoZWNrX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLHI9dC5ub2RlLHM9dGhpcy5nZXRfbm9kZShyLCEwKSxhLG4sZCxvPXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSxjPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbix0PXRoaXMuX2RhdGFbYz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLGw9e30saD1bXSxfPXIuY2hpbGRyZW5fZC5jb25jYXQoci5pZCksZyx0O2lmKC0xIT09by5pbmRleE9mKFwiZG93blwiKSYmKGc9dGhpcy5fY2FzY2FkZV9uZXdfY2hlY2tlZF9zdGF0ZShyLmlkLCExKSx0PUUudmFrYXRhLmFycmF5X2ZpbHRlcih0LGZ1bmN0aW9uKGUpe3JldHVybi0xPT09Xy5pbmRleE9mKGUpfHwtMTxnLmluZGV4T2YoZSl9KSksLTEhPT1vLmluZGV4T2YoXCJ1cFwiKSYmLTE9PT10LmluZGV4T2Yoci5pZCkpe2ZvcihhPTAsbj1yLnBhcmVudHMubGVuZ3RoO2E8bjthKyspKGQ9dGhpcy5fbW9kZWwuZGF0YVtyLnBhcmVudHNbYV1dKS5zdGF0ZVtjP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITEsZCYmZC5vcmlnaW5hbCYmZC5vcmlnaW5hbC5zdGF0ZSYmZC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihkLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD0hMSksKGQ9dGhpcy5nZXRfbm9kZShyLnBhcmVudHNbYV0sITApKSYmZC5sZW5ndGgmJmQuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhjP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpO3Q9RS52YWthdGEuYXJyYXlfZmlsdGVyKHQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1yLnBhcmVudHMuaW5kZXhPZihlKX0pfXRoaXMuX2RhdGFbYz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPXR9LmJpbmQodGhpcykpLC0xIT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1cFwiKSYmdGhpcy5lbGVtZW50Lm9uKFwiZGVsZXRlX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmdldF9ub2RlKHQucGFyZW50KSxyPXRoaXMuX21vZGVsLmRhdGEscyxhLG4sZCxvPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjt3aGlsZShpJiZpLmlkIT09RS5qc3RyZWUucm9vdCYmIWkuc3RhdGVbbz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3Iocz1uPTAsYT1pLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW4rPXJbaS5jaGlsZHJlbltzXV0uc3RhdGVbbz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKCEoMDxhJiZuPT09YSkpYnJlYWs7aS5zdGF0ZVtvP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITAsdGhpcy5fZGF0YVtvP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQucHVzaChpLmlkKSwoZD10aGlzLmdldF9ub2RlKGksITApKSYmZC5sZW5ndGgmJmQuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hZGRDbGFzcyhvP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpLGk9dGhpcy5nZXRfbm9kZShpLnBhcmVudCl9fS5iaW5kKHRoaXMpKS5vbihcIm1vdmVfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNfbXVsdGkscj10Lm9sZF9wYXJlbnQsdD10aGlzLmdldF9ub2RlKHQucGFyZW50KSxzPXRoaXMuX21vZGVsLmRhdGEsYSxuLGQsbyxjLGw9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uO2lmKCFpKXthPXRoaXMuZ2V0X25vZGUocik7d2hpbGUoYSYmYS5pZCE9PUUuanN0cmVlLnJvb3QmJiFhLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKGQ9bj0wLG89YS5jaGlsZHJlbi5sZW5ndGg7ZDxvO2QrKyluKz1zW2EuY2hpbGRyZW5bZF1dLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZighKDA8byYmbj09PW8pKWJyZWFrO2Euc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLHRoaXMuX2RhdGFbbD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLnB1c2goYS5pZCksKGM9dGhpcy5nZXRfbm9kZShhLCEwKSkmJmMubGVuZ3RoJiZjLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYWRkQ2xhc3MobD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxhPXRoaXMuZ2V0X25vZGUoYS5wYXJlbnQpfX1hPXQ7d2hpbGUoYSYmYS5pZCE9PUUuanN0cmVlLnJvb3Qpe2ZvcihkPW49MCxvPWEuY2hpbGRyZW4ubGVuZ3RoO2Q8bztkKyspbis9c1thLmNoaWxkcmVuW2RdXS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYobj09PW8pYS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fChhLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGEuaWQpLChjPXRoaXMuZ2V0X25vZGUoYSwhMCkpJiZjLmxlbmd0aCYmYy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmFkZENsYXNzKGw/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIikpO2Vsc2V7aWYoIWEuc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKWJyZWFrO2Euc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLHRoaXMuX2RhdGFbbD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPUUudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGFbbD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLGEuaWQpLChjPXRoaXMuZ2V0X25vZGUoYSwhMCkpJiZjLmxlbmd0aCYmYy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLnJlbW92ZUNsYXNzKGw/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIil9YT10aGlzLmdldF9ub2RlKGEucGFyZW50KX19LmJpbmQodGhpcykpfSx0aGlzLmdldF91bmRldGVybWluZWQ9ZnVuY3Rpb24oZSl7aWYoLTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVuZGV0ZXJtaW5lZFwiKSlyZXR1cm5bXTtmb3IodmFyIGkscixzLGEsbj17fSxkPXRoaXMuX21vZGVsLmRhdGEsdD10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sbz10aGlzLl9kYXRhW3Q/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxjPVtdLGw9dGhpcyxoPVtdLGk9MCxyPW8ubGVuZ3RoO2k8cjtpKyspaWYoZFtvW2ldXSYmZFtvW2ldXS5wYXJlbnRzKWZvcihzPTAsYT1kW29baV1dLnBhcmVudHMubGVuZ3RoO3M8YTtzKyspe2lmKG5bZFtvW2ldXS5wYXJlbnRzW3NdXSE9PVApYnJlYWs7ZFtvW2ldXS5wYXJlbnRzW3NdIT09RS5qc3RyZWUucm9vdCYmKG5bZFtvW2ldXS5wYXJlbnRzW3NdXT0hMCxjLnB1c2goZFtvW2ldXS5wYXJlbnRzW3NdKSl9Zm9yKHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikubm90KFwiOmhhcyguanN0cmVlLWNoaWxkcmVuKVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9bC5nZXRfbm9kZSh0aGlzKSx0O2lmKGUpaWYoZS5zdGF0ZS5sb2FkZWQpe2ZvcihpPTAscj1lLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspaWYoISh0PWRbZS5jaGlsZHJlbl9kW2ldXSkuc3RhdGUubG9hZGVkJiZ0Lm9yaWdpbmFsJiZ0Lm9yaWdpbmFsLnN0YXRlJiZ0Lm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmITA9PT10Lm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZClmb3Ioblt0LmlkXT09PVAmJnQuaWQhPT1FLmpzdHJlZS5yb290JiYoblt0LmlkXT0hMCxjLnB1c2godC5pZCkpLHM9MCxhPXQucGFyZW50cy5sZW5ndGg7czxhO3MrKyluW3QucGFyZW50c1tzXV09PT1QJiZ0LnBhcmVudHNbc10hPT1FLmpzdHJlZS5yb290JiYoblt0LnBhcmVudHNbc11dPSEwLGMucHVzaCh0LnBhcmVudHNbc10pKX1lbHNlIGlmKGUub3JpZ2luYWwmJmUub3JpZ2luYWwuc3RhdGUmJmUub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkJiYhMD09PWUub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKWZvcihuW2UuaWRdPT09UCYmZS5pZCE9PUUuanN0cmVlLnJvb3QmJihuW2UuaWRdPSEwLGMucHVzaChlLmlkKSkscz0wLGE9ZS5wYXJlbnRzLmxlbmd0aDtzPGE7cysrKW5bZS5wYXJlbnRzW3NdXT09PVAmJmUucGFyZW50c1tzXSE9PUUuanN0cmVlLnJvb3QmJihuW2UucGFyZW50c1tzXV09ITAsYy5wdXNoKGUucGFyZW50c1tzXSkpfSksaT0wLHI9Yy5sZW5ndGg7aTxyO2krKylkW2NbaV1dLnN0YXRlW3Q/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXXx8aC5wdXNoKGU/ZFtjW2ldXTpjW2ldKTtyZXR1cm4gaH0sdGhpcy5fdW5kZXRlcm1pbmVkPWZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7dmFyIGU9dGhpcy5nZXRfdW5kZXRlcm1pbmVkKCExKSx0LGkscjtmb3IodGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXVuZGV0ZXJtaW5lZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS11bmRldGVybWluZWRcIiksdD0wLGk9ZS5sZW5ndGg7dDxpO3QrKykocj10aGlzLmdldF9ub2RlKGVbdF0sITApKSYmci5sZW5ndGgmJnIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikuYWRkQ2xhc3MoXCJqc3RyZWUtdW5kZXRlcm1pbmVkXCIpfX0sdGhpcy5yZWRyYXdfbm9kZT1mdW5jdGlvbihlLHQsaSxyKXtpZihlPW8ucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIHMsYSxuPW51bGwsZD1udWxsLHM9MCxhPWUuY2hpbGROb2Rlcy5sZW5ndGg7czxhO3MrKylpZihlLmNoaWxkTm9kZXNbc10mJmUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUmJi0xIT09ZS5jaGlsZE5vZGVzW3NdLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWFuY2hvclwiKSl7bj1lLmNoaWxkTm9kZXNbc107YnJlYWt9biYmKCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJnRoaXMuX21vZGVsLmRhdGFbZS5pZF0uc3RhdGUuY2hlY2tlZCYmKG4uY2xhc3NOYW1lKz1cIiBqc3RyZWUtY2hlY2tlZFwiKSxkPWwuY2xvbmVOb2RlKCExKSx0aGlzLl9tb2RlbC5kYXRhW2UuaWRdLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkJiYoZC5jbGFzc05hbWUrPVwiIGpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKSxuLmluc2VydEJlZm9yZShkLG4uY2hpbGROb2Rlc1swXSkpfXJldHVybiBpfHwtMT09PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidW5kZXRlcm1pbmVkXCIpfHwodGhpcy5fZGF0YS5jaGVja2JveC51dG8mJmNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byksdGhpcy5fZGF0YS5jaGVja2JveC51dG89c2V0VGltZW91dCh0aGlzLl91bmRldGVybWluZWQuYmluZCh0aGlzKSw1MCkpLGV9LHRoaXMuc2hvd19jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW5vLWNoZWNrYm94ZXNcIil9LHRoaXMuaGlkZV9jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWNoZWNrYm94ZXNcIil9LHRoaXMudG9nZ2xlX2NoZWNrYm94ZXM9ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmNoZWNrYm94ZXM/dGhpcy5oaWRlX2NoZWNrYm94ZXMoKTp0aGlzLnNob3dfY2hlY2tib3hlcygpfSx0aGlzLmlzX3VuZGV0ZXJtaW5lZD1mdW5jdGlvbihlKXtlPXRoaXMuZ2V0X25vZGUoZSk7dmFyIHQ9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGkscixzPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixhPXRoaXMuX2RhdGFbcz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLG49dGhpcy5fbW9kZWwuZGF0YTtpZighZXx8ITA9PT1lLnN0YXRlW3M/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXXx8LTE9PT10LmluZGV4T2YoXCJ1bmRldGVybWluZWRcIil8fC0xPT09dC5pbmRleE9mKFwiZG93blwiKSYmLTE9PT10LmluZGV4T2YoXCJ1cFwiKSlyZXR1cm4hMTtpZighZS5zdGF0ZS5sb2FkZWQmJiEwPT09ZS5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQpcmV0dXJuITA7Zm9yKGk9MCxyPWUuY2hpbGRyZW5fZC5sZW5ndGg7aTxyO2krKylpZigtMSE9PUUuaW5BcnJheShlLmNoaWxkcmVuX2RbaV0sYSl8fCFuW2UuY2hpbGRyZW5fZFtpXV0uc3RhdGUubG9hZGVkJiZuW2UuY2hpbGRyZW5fZFtpXV0ub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKXJldHVybiEwO3JldHVybiExfSx0aGlzLmRpc2FibGVfY2hlY2tib3g9ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmRpc2FibGVfY2hlY2tib3goZVt0XSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtyPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZHx8KGUuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQ9ITAsciYmci5sZW5ndGgmJnIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksdGhpcy50cmlnZ2VyKFwiZGlzYWJsZV9jaGVja2JveFwiLHtub2RlOmV9KSl9LHRoaXMuZW5hYmxlX2NoZWNrYm94PWZ1bmN0aW9uKGUpe3ZhciB0LGkscjtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5lbmFibGVfY2hlY2tib3goZVt0XSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtyPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCYmKGUuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQ9ITEsciYmci5sZW5ndGgmJnIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksdGhpcy50cmlnZ2VyKFwiZW5hYmxlX2NoZWNrYm94XCIse25vZGU6ZX0pKX0sdGhpcy5hY3RpdmF0ZV9ub2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIUUodC50YXJnZXQpLmhhc0NsYXNzKFwianN0cmVlLWNoZWNrYm94LWRpc2FibGVkXCIpJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC53aG9sZV9ub2RlfHxFKHQudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveFwiKSkmJih0LmN0cmxLZXk9ITApLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8IXRoaXMuc2V0dGluZ3MuY2hlY2tib3gud2hvbGVfbm9kZSYmIUUodC50YXJnZXQpLmhhc0NsYXNzKFwianN0cmVlLWNoZWNrYm94XCIpP28uYWN0aXZhdGVfbm9kZS5jYWxsKHRoaXMsZSx0KTohdGhpcy5pc19kaXNhYmxlZChlKSYmKHRoaXMuaXNfY2hlY2tlZChlKT90aGlzLnVuY2hlY2tfbm9kZShlLHQpOnRoaXMuY2hlY2tfbm9kZShlLHQpLHZvaWQgdGhpcy50cmlnZ2VyKFwiYWN0aXZhdGVfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZSl9KSkpfSx0aGlzLmRlbGV0ZV9ub2RlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8RS52YWthdGEuaXNfYXJyYXkoZSkpcmV0dXJuIG8uZGVsZXRlX25vZGUuY2FsbCh0aGlzLGUpO3ZhciB0LGkscixzPSExO2lmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7Zm9yKCh0PWUuY2hpbGRyZW5fZC5jb25jYXQoW10pKS5wdXNoKGUuaWQpLGk9MCxyPXQubGVuZ3RoO2k8cjtpKyspaWYodGhpcy5fbW9kZWwuZGF0YVt0W2ldXS5zdGF0ZS5jaGVja2VkKXtzPSEwO2JyZWFrfXJldHVybiBzJiYodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxmdW5jdGlvbihlKXtyZXR1cm4tMT09PUUuaW5BcnJheShlLHQpfSkpLG8uZGVsZXRlX25vZGUuY2FsbCh0aGlzLGUpfSx0aGlzLl9jYXNjYWRlX25ld19jaGVja2VkX3N0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixzPXRoaXMuX21vZGVsLmRhdGFbZV0sYT1bXSxuPVtdLGQsbyxjO2lmKCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGVfdG9fZGlzYWJsZWQmJnMuc3RhdGUuZGlzYWJsZWR8fCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGVfdG9faGlkZGVuJiZzLnN0YXRlLmhpZGRlbiljPXRoaXMuZ2V0X2NoZWNrZWRfZGVzY2VuZGFudHMoZSkscy5zdGF0ZVtyP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl0mJmMucHVzaChzLmlkKSxhPWEuY29uY2F0KGMpO2Vsc2V7aWYocy5jaGlsZHJlbilmb3IoZD0wLG89cy5jaGlsZHJlbi5sZW5ndGg7ZDxvO2QrKyl7dmFyIGw9cy5jaGlsZHJlbltkXSxjPWkuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUobCx0KSxhPWEuY29uY2F0KGMpOy0xPGMuaW5kZXhPZihsKSYmbi5wdXNoKGwpfXZhciBoPWkuZ2V0X25vZGUocywhMCksZT0wPG4ubGVuZ3RoJiZuLmxlbmd0aDxzLmNoaWxkcmVuLmxlbmd0aDtzLm9yaWdpbmFsJiZzLm9yaWdpbmFsLnN0YXRlJiZzLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmKHMub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkPWUpLCFlJiZ0JiZuLmxlbmd0aD09PXMuY2hpbGRyZW4ubGVuZ3RoPyhzLnN0YXRlW3I/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT10LGEucHVzaChzLmlkKSxoLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYWRkQ2xhc3Mocj9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSk6KHMuc3RhdGVbcj9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLGguY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhyP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpKX1yZXR1cm4gYX0sdGhpcy5nZXRfY2hlY2tlZF9kZXNjZW5kYW50cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dC5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLGU9dC5fbW9kZWwuZGF0YVtlXTtyZXR1cm4gRS52YWthdGEuYXJyYXlfZmlsdGVyKGUuY2hpbGRyZW5fZCxmdW5jdGlvbihlKXtyZXR1cm4gdC5fbW9kZWwuZGF0YVtlXS5zdGF0ZVtpP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl19KX0sdGhpcy5jaGVja19ub2RlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLnNlbGVjdF9ub2RlKGUsITEsITAsdCk7dmFyIGkscixzLGE7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2ZvcihyPTAscz0oZT1lLnNsaWNlKCkpLmxlbmd0aDtyPHM7cisrKXRoaXMuY2hlY2tfbm9kZShlW3JdLHQpO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7aT10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuY2hlY2tlZHx8KGUuc3RhdGUuY2hlY2tlZD0hMCx0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2goZS5pZCksaSYmaS5sZW5ndGgmJmkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhcImpzdHJlZS1jaGVja2VkXCIpLHRoaXMudHJpZ2dlcihcImNoZWNrX25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZXZlbnQ6dH0pKX0sdGhpcy51bmNoZWNrX25vZGU9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZGVzZWxlY3Rfbm9kZShlLCExLHQpO3ZhciBpLHIscztpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy51bmNoZWNrX25vZGUoZVtpXSx0KTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3M9dGhpcy5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLmNoZWNrZWQmJihlLnN0YXRlLmNoZWNrZWQ9ITEsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGUuaWQpLHMubGVuZ3RoJiZzLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJ1bmNoZWNrX25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZXZlbnQ6dH0pKX0sdGhpcy5jaGVja19hbGw9ZnVuY3Rpb24oKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuc2VsZWN0X2FsbCgpO3ZhciBlPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuY29uY2F0KFtdKSx0LGk7Zm9yKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9dGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS5jaGlsZHJlbl9kLmNvbmNhdCgpLHQ9MCxpPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQubGVuZ3RoO3Q8aTt0KyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW3RdXSYmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFt0XV0uc3RhdGUuY2hlY2tlZD0hMCk7dGhpcy5yZWRyYXcoITApLHRoaXMudHJpZ2dlcihcImNoZWNrX2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkfSl9LHRoaXMudW5jaGVja19hbGw9ZnVuY3Rpb24oKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZGVzZWxlY3RfYWxsKCk7Zm9yKHZhciBlPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuY29uY2F0KFtdKSx0LGksdD0wLGk9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5sZW5ndGg7dDxpO3QrKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbdF1dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW3RdXS5zdGF0ZS5jaGVja2VkPSExKTt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPVtdLHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1jaGVja2VkXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNoZWNrZWRcIiksdGhpcy50cmlnZ2VyKFwidW5jaGVja19hbGxcIix7c2VsZWN0ZWQ6dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxub2RlOmV9KX0sdGhpcy5pc19jaGVja2VkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/dGhpcy5pc19zZWxlY3RlZChlKTohKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiZlLnN0YXRlLmNoZWNrZWR9LHRoaXMuZ2V0X2NoZWNrZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj90aGlzLmdldF9zZWxlY3RlZChlKTplP0UubWFwKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LmJpbmQodGhpcykpOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuc2xpY2UoKX0sdGhpcy5nZXRfdG9wX2NoZWNrZWQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLmdldF90b3Bfc2VsZWN0ZWQoZSk7Zm9yKHZhciB0PXRoaXMuZ2V0X2NoZWNrZWQoITApLGk9e30scixzLGEsbixyPTAscz10Lmxlbmd0aDtyPHM7cisrKWlbdFtyXS5pZF09dFtyXTtmb3Iocj0wLHM9dC5sZW5ndGg7cjxzO3IrKylmb3IoYT0wLG49dFtyXS5jaGlsZHJlbl9kLmxlbmd0aDthPG47YSsrKWlbdFtyXS5jaGlsZHJlbl9kW2FdXSYmZGVsZXRlIGlbdFtyXS5jaGlsZHJlbl9kW2FdXTtmb3IociBpbiB0PVtdLGkpaS5oYXNPd25Qcm9wZXJ0eShyKSYmdC5wdXNoKHIpO3JldHVybiBlP0UubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LmJpbmQodGhpcykpOnR9LHRoaXMuZ2V0X2JvdHRvbV9jaGVja2VkPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5nZXRfYm90dG9tX3NlbGVjdGVkKGUpO2Zvcih2YXIgdD10aGlzLmdldF9jaGVja2VkKCEwKSxpPVtdLHIscyxyPTAscz10Lmxlbmd0aDtyPHM7cisrKXRbcl0uY2hpbGRyZW4ubGVuZ3RofHxpLnB1c2godFtyXS5pZCk7cmV0dXJuIGU/RS5tYXAoaSxmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0uYmluZCh0aGlzKSk6aX0sdGhpcy5sb2FkX25vZGU9ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLHMsYSxuLGQ7aWYoIUUudmFrYXRhLmlzX2FycmF5KGUpJiYhdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYoZD10aGlzLmdldF9ub2RlKGUpKSYmZC5zdGF0ZS5sb2FkZWQpZm9yKGk9MCxyPWQuY2hpbGRyZW5fZC5sZW5ndGg7aTxyO2krKyl0aGlzLl9tb2RlbC5kYXRhW2QuY2hpbGRyZW5fZFtpXV0uc3RhdGUuY2hlY2tlZCYmKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9RS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0odGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxkLmNoaWxkcmVuX2RbaV0pKTtyZXR1cm4gby5sb2FkX25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0aGlzLmdldF9zdGF0ZT1mdW5jdGlvbigpe3ZhciBlPW8uZ2V0X3N0YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9ufHwoZS5jaGVja2JveD10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnNsaWNlKCkpLGV9LHRoaXMuc2V0X3N0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9by5zZXRfc3RhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHI7cmV0dXJuIGkmJmUuY2hlY2tib3g/KHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8KHRoaXMudW5jaGVja19hbGwoKSxyPXRoaXMsRS5lYWNoKGUuY2hlY2tib3gsZnVuY3Rpb24oZSx0KXtyLmNoZWNrX25vZGUodCl9KSksZGVsZXRlIGUuY2hlY2tib3gsdGhpcy5zZXRfc3RhdGUoZSx0KSwhMSk6aX0sdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiYmKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9W10pLG8ucmVmcmVzaC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxFLmpzdHJlZS5kZWZhdWx0cy5jb25kaXRpb25hbHNlbGVjdD1mdW5jdGlvbigpe3JldHVybiEwfSxFLmpzdHJlZS5wbHVnaW5zLmNvbmRpdGlvbmFsc2VsZWN0PWZ1bmN0aW9uKGUsaSl7dGhpcy5hY3RpdmF0ZV9ub2RlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5zZXR0aW5ncy5jb25kaXRpb25hbHNlbGVjdC5jYWxsKHRoaXMsdGhpcy5nZXRfbm9kZShlKSx0KSlyZXR1cm4gaS5hY3RpdmF0ZV9ub2RlLmNhbGwodGhpcyxlLHQpfX0sRS5qc3RyZWUuZGVmYXVsdHMuY29udGV4dG1lbnU9e3NlbGVjdF9ub2RlOiEwLHNob3dfYXRfbm9kZTohMCxpdGVtczpmdW5jdGlvbihlLHQpe3JldHVybntjcmVhdGU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsc2VwYXJhdG9yX2FmdGVyOiEwLF9kaXNhYmxlZDohMSxsYWJlbDpcIkNyZWF0ZVwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgaT1FLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGU9aS5nZXRfbm9kZShlLnJlZmVyZW5jZSk7aS5jcmVhdGVfbm9kZShlLHt9LFwibGFzdFwiLGZ1bmN0aW9uKHQpe3RyeXtpLmVkaXQodCl9Y2F0Y2goZSl7c2V0VGltZW91dChmdW5jdGlvbigpe2kuZWRpdCh0KX0sMCl9fSl9fSxyZW5hbWU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsc2VwYXJhdG9yX2FmdGVyOiExLF9kaXNhYmxlZDohMSxsYWJlbDpcIlJlbmFtZVwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1FLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGU9dC5nZXRfbm9kZShlLnJlZmVyZW5jZSk7dC5lZGl0KGUpfX0scmVtb3ZlOntzZXBhcmF0b3JfYmVmb3JlOiExLGljb246ITEsc2VwYXJhdG9yX2FmdGVyOiExLF9kaXNhYmxlZDohMSxsYWJlbDpcIkRlbGV0ZVwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1FLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGU9dC5nZXRfbm9kZShlLnJlZmVyZW5jZSk7dC5pc19zZWxlY3RlZChlKT90LmRlbGV0ZV9ub2RlKHQuZ2V0X3NlbGVjdGVkKCkpOnQuZGVsZXRlX25vZGUoZSl9fSxjY3A6e3NlcGFyYXRvcl9iZWZvcmU6ITAsaWNvbjohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJFZGl0XCIsYWN0aW9uOiExLHN1Ym1lbnU6e2N1dDp7c2VwYXJhdG9yX2JlZm9yZTohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJDdXRcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPXQuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO3QuaXNfc2VsZWN0ZWQoZSk/dC5jdXQodC5nZXRfdG9wX3NlbGVjdGVkKCkpOnQuY3V0KGUpfX0sY29weTp7c2VwYXJhdG9yX2JlZm9yZTohMSxpY29uOiExLHNlcGFyYXRvcl9hZnRlcjohMSxsYWJlbDpcIkNvcHlcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPXQuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO3QuaXNfc2VsZWN0ZWQoZSk/dC5jb3B5KHQuZ2V0X3RvcF9zZWxlY3RlZCgpKTp0LmNvcHkoZSl9fSxwYXN0ZTp7c2VwYXJhdG9yX2JlZm9yZTohMSxpY29uOiExLF9kaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4hRS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKS5jYW5fcGFzdGUoKX0sc2VwYXJhdG9yX2FmdGVyOiExLGxhYmVsOlwiUGFzdGVcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPXQuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO3QucGFzdGUoZSl9fX19fX19LEUuanN0cmVlLnBsdWdpbnMuY29udGV4dG1lbnU9ZnVuY3Rpb24oZSxhKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXthLmJpbmQuY2FsbCh0aGlzKTt2YXIgaT0wLHI9bnVsbCx0LHM7dGhpcy5lbGVtZW50Lm9uKFwiaW5pdC5qc3RyZWUgbG9hZGluZy5qc3RyZWUgcmVhZHkuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1jb250ZXh0bWVudVwiKX0uYmluZCh0aGlzKSkub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSx0KXtcImlucHV0XCIhPT1lLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJihlLnByZXZlbnREZWZhdWx0KCksaT1lLmN0cmxLZXk/K25ldyBEYXRlOjAsKHR8fHIpJiYoaT0rbmV3IERhdGUrMWU0KSxyJiZjbGVhclRpbWVvdXQociksdGhpcy5pc19sb2FkaW5nKGUuY3VycmVudFRhcmdldCl8fHRoaXMuc2hvd19jb250ZXh0bWVudShlLmN1cnJlbnRUYXJnZXQsZS5wYWdlWCxlLnBhZ2VZLGUpKX0uYmluZCh0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlJiYoIWl8fDI1MDwrbmV3IERhdGUtaSkmJkUudmFrYXRhLmNvbnRleHQuaGlkZSgpLGk9MH0uYmluZCh0aGlzKSkub24oXCJ0b3VjaHN0YXJ0LmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihlKXtlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdJiYodD1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxzPWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZLHI9c2V0VGltZW91dChmdW5jdGlvbigpe0UoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKFwiY29udGV4dG1lbnVcIiwhMCl9LDc1MCkpfSkub24oXCJ0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe3ImJmUub3JpZ2luYWxFdmVudCYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJigxMDxNYXRoLmFicyh0LWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYKXx8MTA8TWF0aC5hYnMocy1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSkpJiYoY2xlYXJUaW1lb3V0KHIpLEUudmFrYXRhLmNvbnRleHQuaGlkZSgpKX0pLm9uKFwidG91Y2hlbmQudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe3ImJmNsZWFyVGltZW91dChyKX0pLEUoYikub24oXCJjb250ZXh0X2hpZGUudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlPSExLEUodC5yZWZlcmVuY2UpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNvbnRleHRcIil9LmJpbmQodGhpcykpfSx0aGlzLnRlYXJkb3duPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlJiZFLnZha2F0YS5jb250ZXh0LmhpZGUoKSxFKGIpLm9mZihcImNvbnRleHRfaGlkZS52YWthdGEuanN0cmVlXCIpLGEudGVhcmRvd24uY2FsbCh0aGlzKX0sdGhpcy5zaG93X2NvbnRleHRtZW51PWZ1bmN0aW9uKHQsaSxyLGUpe2lmKCEodD10aGlzLmdldF9ub2RlKHQpKXx8dC5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7dmFyIHM9dGhpcy5zZXR0aW5ncy5jb250ZXh0bWVudSxhLG49dGhpcy5nZXRfbm9kZSh0LCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLGQ9ITEsbz0hMTshcy5zaG93X2F0X25vZGUmJmkhPT1QJiZyIT09UHx8KGQ9bi5vZmZzZXQoKSxpPWQubGVmdCxyPWQudG9wK3RoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQpLHRoaXMuc2V0dGluZ3MuY29udGV4dG1lbnUuc2VsZWN0X25vZGUmJiF0aGlzLmlzX3NlbGVjdGVkKHQpJiZ0aGlzLmFjdGl2YXRlX25vZGUodCxlKSxvPXMuaXRlbXMsRS52YWthdGEuaXNfZnVuY3Rpb24obykmJihvPW8uY2FsbCh0aGlzLHQsZnVuY3Rpb24oZSl7dGhpcy5fc2hvd19jb250ZXh0bWVudSh0LGkscixlKX0uYmluZCh0aGlzKSkpLEUuaXNQbGFpbk9iamVjdChvKSYmdGhpcy5fc2hvd19jb250ZXh0bWVudSh0LGkscixvKX0sdGhpcy5fc2hvd19jb250ZXh0bWVudT1mdW5jdGlvbihlLHQsaSxyKXt2YXIgcyxhPXRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTtFKGIpLm9uZShcImNvbnRleHRfc2hvdy52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT1cImpzdHJlZS1jb250ZXh0bWVudSBqc3RyZWUtXCIrdGhpcy5nZXRfdGhlbWUoKStcIi1jb250ZXh0bWVudVwiO0UodC5lbGVtZW50KS5hZGRDbGFzcyhpKSxhLmFkZENsYXNzKFwianN0cmVlLWNvbnRleHRcIil9LmJpbmQodGhpcykpLHRoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZT0hMCxFLnZha2F0YS5jb250ZXh0LnNob3coYSx7eDp0LHk6aX0sciksdGhpcy50cmlnZ2VyKFwic2hvd19jb250ZXh0bWVudVwiLHtub2RlOmUseDp0LHk6aX0pfX0sZz17ZWxlbWVudDpfPSExLHJlZmVyZW5jZTohMSxwb3NpdGlvbl94OjAscG9zaXRpb25feTowLGl0ZW1zOltdLGh0bWw6XCJcIixpc192aXNpYmxlOiExfSwoaD1FKS52YWthdGEuY29udGV4dD17c2V0dGluZ3M6e2hpZGVfb25tb3VzZWxlYXZlOjAsaWNvbnM6ITB9LF90cmlnZ2VyOmZ1bmN0aW9uKGUpe2goYikudHJpZ2dlckhhbmRsZXIoXCJjb250ZXh0X1wiK2UrXCIudmFrYXRhXCIse3JlZmVyZW5jZTpnLnJlZmVyZW5jZSxlbGVtZW50OmcuZWxlbWVudCxwb3NpdGlvbjp7eDpnLnBvc2l0aW9uX3gseTpnLnBvc2l0aW9uX3l9fSl9LF9leGVjdXRlOmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPWcuaXRlbXNbZV0pfHxlLl9kaXNhYmxlZCYmKCFoLnZha2F0YS5pc19mdW5jdGlvbihlLl9kaXNhYmxlZCl8fGUuX2Rpc2FibGVkKHtpdGVtOmUscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50fSkpfHwhZS5hY3Rpb24pJiZlLmFjdGlvbi5jYWxsKG51bGwse2l0ZW06ZSxyZWZlcmVuY2U6Zy5yZWZlcmVuY2UsZWxlbWVudDpnLmVsZW1lbnQscG9zaXRpb246e3g6Zy5wb3NpdGlvbl94LHk6Zy5wb3NpdGlvbl95fX0pfSxfcGFyc2U6ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4hMTt0fHwoZy5odG1sPVwiXCIsZy5pdGVtcz1bXSk7dmFyIGk9XCJcIixyPSExLHM7cmV0dXJuIHQmJihpKz1cIjx1bD5cIiksaC5lYWNoKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4hdHx8KGcuaXRlbXMucHVzaCh0KSwhciYmdC5zZXBhcmF0b3JfYmVmb3JlJiYoaSs9XCI8bGkgY2xhc3M9J3Zha2F0YS1jb250ZXh0LXNlcGFyYXRvcic+PGEgaHJlZj0nIycgXCIrKGgudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaWNvbnM/XCJcIjonY2xhc3M9XCJ2YWthdGEtY29udGV4dC1uby1pY29uc1wiJykrXCI+JiMxNjA7PC9hPjwvbGk+XCIpLHI9ITEsaSs9XCI8bGkgY2xhc3M9J1wiKyh0Ll9jbGFzc3x8XCJcIikrKCEwPT09dC5fZGlzYWJsZWR8fGgudmFrYXRhLmlzX2Z1bmN0aW9uKHQuX2Rpc2FibGVkKSYmdC5fZGlzYWJsZWQoe2l0ZW06dCxyZWZlcmVuY2U6Zy5yZWZlcmVuY2UsZWxlbWVudDpnLmVsZW1lbnR9KT9cIiB2YWthdGEtY29udGV4dG1lbnUtZGlzYWJsZWQgXCI6XCJcIikrXCInIFwiKyh0LnNob3J0Y3V0P1wiIGRhdGEtc2hvcnRjdXQ9J1wiK3Quc2hvcnRjdXQrXCInIFwiOlwiXCIpK1wiPlwiLGkrPVwiPGEgaHJlZj0nIycgcmVsPSdcIisoZy5pdGVtcy5sZW5ndGgtMSkrXCInIFwiKyh0LnRpdGxlP1widGl0bGU9J1wiK3QudGl0bGUrXCInXCI6XCJcIikrXCI+XCIsaC52YWthdGEuY29udGV4dC5zZXR0aW5ncy5pY29ucyYmKGkrPVwiPGkgXCIsdC5pY29uJiYoLTEhPT10Lmljb24uaW5kZXhPZihcIi9cIil8fC0xIT09dC5pY29uLmluZGV4T2YoXCIuXCIpP2krPVwiIHN0eWxlPSdiYWNrZ3JvdW5kOnVybChcXFwiXCIrdC5pY29uK1wiXFxcIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQnIFwiOmkrPVwiIGNsYXNzPSdcIit0Lmljb24rXCInIFwiKSxpKz1cIj48L2k+PHNwYW4gY2xhc3M9J3Zha2F0YS1jb250ZXh0bWVudS1zZXAnPiYjMTYwOzwvc3Bhbj5cIiksaSs9KGgudmFrYXRhLmlzX2Z1bmN0aW9uKHQubGFiZWwpP3QubGFiZWwoe2l0ZW06ZSxyZWZlcmVuY2U6Zy5yZWZlcmVuY2UsZWxlbWVudDpnLmVsZW1lbnR9KTp0LmxhYmVsKSsodC5zaG9ydGN1dD8nIDxzcGFuIGNsYXNzPVwidmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0IHZha2F0YS1jb250ZXh0bWVudS1zaG9ydGN1dC0nK3Quc2hvcnRjdXQrJ1wiPicrKHQuc2hvcnRjdXRfbGFiZWx8fFwiXCIpK1wiPC9zcGFuPlwiOlwiXCIpK1wiPC9hPlwiLHQuc3VibWVudSYmKHM9aC52YWthdGEuY29udGV4dC5fcGFyc2UodC5zdWJtZW51LCEwKSkmJihpKz1zKSxpKz1cIjwvbGk+XCIsdm9pZCh0LnNlcGFyYXRvcl9hZnRlciYmKGkrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhoLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J2NsYXNzPVwidmFrYXRhLWNvbnRleHQtbm8taWNvbnNcIicpK1wiPiYjMTYwOzwvYT48L2xpPlwiLHI9ITApKSl9KSxpPWkucmVwbGFjZSgvPGxpIGNsYXNzXFw9J3Zha2F0YS1jb250ZXh0LXNlcGFyYXRvcidcXD48XFwvbGlcXD4kLyxcIlwiKSx0JiYoaSs9XCI8L3VsPlwiKSx0fHwoZy5odG1sPWksaC52YWthdGEuY29udGV4dC5fdHJpZ2dlcihcInBhcnNlXCIpKSwxMDxpLmxlbmd0aCYmaX0sX3Nob3dfc3VibWVudTpmdW5jdGlvbihlKXt2YXIgdCxpLHIscyxhLG4sZCxvOyhlPWgoZSkpLmxlbmd0aCYmZS5jaGlsZHJlbihcInVsXCIpLmxlbmd0aCYmKHQ9ZS5jaGlsZHJlbihcInVsXCIpLHI9KGk9ZS5vZmZzZXQoKS5sZWZ0KStlLm91dGVyV2lkdGgoKSxzPWUub2Zmc2V0KCkudG9wLGE9dC53aWR0aCgpLG49dC5oZWlnaHQoKSxkPWgod2luZG93KS53aWR0aCgpK2god2luZG93KS5zY3JvbGxMZWZ0KCksbz1oKHdpbmRvdykuaGVpZ2h0KCkraCh3aW5kb3cpLnNjcm9sbFRvcCgpLF8/ZVtyLShhKzEwK2Uub3V0ZXJXaWR0aCgpKTwwP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwidmFrYXRhLWNvbnRleHQtbGVmdFwiKTplW2Q8cithJiZkLXI8aT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcInZha2F0YS1jb250ZXh0LXJpZ2h0XCIpLG88cytuKzEwJiZ0LmNzcyhcImJvdHRvbVwiLFwiLTFweFwiKSxlLmhhc0NsYXNzKFwidmFrYXRhLWNvbnRleHQtcmlnaHRcIik/aTxhJiZ0LmNzcyhcIm1hcmdpbi1yaWdodFwiLGktYSk6ZC1yPGEmJnQuY3NzKFwibWFyZ2luLWxlZnRcIixkLXItYSksdC5zaG93KCkpfSxzaG93OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzLGEsbixkLG8sYyxpLGw9ITA7c3dpdGNoKGcuZWxlbWVudCYmZy5lbGVtZW50Lmxlbmd0aCYmZy5lbGVtZW50LndpZHRoKFwiXCIpLCEwKXtjYXNlIXQmJiFlOnJldHVybiExO2Nhc2UhIXQmJiEhZTpnLnJlZmVyZW5jZT1lLGcucG9zaXRpb25feD10LngsZy5wb3NpdGlvbl95PXQueTticmVhaztjYXNlIXQmJiEhZTpyPShnLnJlZmVyZW5jZT1lKS5vZmZzZXQoKSxnLnBvc2l0aW9uX3g9ci5sZWZ0K2Uub3V0ZXJIZWlnaHQoKSxnLnBvc2l0aW9uX3k9ci50b3A7YnJlYWs7Y2FzZSEhdCYmIWU6Zy5wb3NpdGlvbl94PXQueCxnLnBvc2l0aW9uX3k9dC55fWUmJiFpJiZoKGUpLmRhdGEoXCJ2YWthdGFfY29udGV4dG1lbnVcIikmJihpPWgoZSkuZGF0YShcInZha2F0YV9jb250ZXh0bWVudVwiKSksaC52YWthdGEuY29udGV4dC5fcGFyc2UoaSkmJmcuZWxlbWVudC5odG1sKGcuaHRtbCksZy5pdGVtcy5sZW5ndGgmJihnLmVsZW1lbnQuYXBwZW5kVG8oYi5ib2R5KSxzPWcuZWxlbWVudCxhPWcucG9zaXRpb25feCxuPWcucG9zaXRpb25feSxkPXMud2lkdGgoKSxvPXMuaGVpZ2h0KCksYz1oKHdpbmRvdykud2lkdGgoKStoKHdpbmRvdykuc2Nyb2xsTGVmdCgpLGk9aCh3aW5kb3cpLmhlaWdodCgpK2god2luZG93KS5zY3JvbGxUb3AoKSxfJiYoYS09cy5vdXRlcldpZHRoKCktaChlKS5vdXRlcldpZHRoKCkpPGgod2luZG93KS5zY3JvbGxMZWZ0KCkrMjAmJihhPWgod2luZG93KS5zY3JvbGxMZWZ0KCkrMjApLGcuZWxlbWVudC5jc3Moe2xlZnQ6YT1jPGErZCsyMD9jLShkKzIwKTphLHRvcDpuPWk8bitvKzIwP2ktKG8rMjApOm59KS5zaG93KCkuZmluZChcImFcIikuZmlyc3QoKS50cmlnZ2VyKFwiZm9jdXNcIikucGFyZW50KCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKSxnLmlzX3Zpc2libGU9ITAsaC52YWthdGEuY29udGV4dC5fdHJpZ2dlcihcInNob3dcIikpfSxoaWRlOmZ1bmN0aW9uKCl7Zy5pc192aXNpYmxlJiYoZy5lbGVtZW50LmhpZGUoKS5maW5kKFwidWxcIikuaGlkZSgpLmVuZCgpLmZpbmQoXCI6Zm9jdXNcIikudHJpZ2dlcihcImJsdXJcIikuZW5kKCkuZGV0YWNoKCksZy5pc192aXNpYmxlPSExLGgudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJoaWRlXCIpKX19LGgoZnVuY3Rpb24oKXtfPVwicnRsXCI9PT1oKGIuYm9keSkuY3NzKFwiZGlyZWN0aW9uXCIpO3ZhciBpPSExO2cuZWxlbWVudD1oKFwiPHVsIGNsYXNzPSd2YWthdGEtY29udGV4dCc+PC91bD5cIiksZy5lbGVtZW50Lm9uKFwibW91c2VlbnRlclwiLFwibGlcIixmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGguY29udGFpbnModGhpcyxlLnJlbGF0ZWRUYXJnZXQpfHwoaSYmY2xlYXJUaW1lb3V0KGkpLGcuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuZW5kKCksaCh0aGlzKS5zaWJsaW5ncygpLmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCkuZW5kKCkucGFyZW50c1VudGlsKFwiLnZha2F0YS1jb250ZXh0XCIsXCJsaVwiKS5hZGRCYWNrKCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKSxoLnZha2F0YS5jb250ZXh0Ll9zaG93X3N1Ym1lbnUodGhpcykpfSkub24oXCJtb3VzZWxlYXZlXCIsXCJsaVwiLGZ1bmN0aW9uKGUpe2guY29udGFpbnModGhpcyxlLnJlbGF0ZWRUYXJnZXQpfHxoKHRoaXMpLmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikuYWRkQmFjaygpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIil9KS5vbihcIm1vdXNlbGVhdmVcIixmdW5jdGlvbihlKXt2YXIgdDtoKHRoaXMpLmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKSxoLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmhpZGVfb25tb3VzZWxlYXZlJiYoaT1zZXRUaW1lb3V0KCh0PXRoaXMsZnVuY3Rpb24oKXtoLnZha2F0YS5jb250ZXh0LmhpZGUoKX0pLGgudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaGlkZV9vbm1vdXNlbGVhdmUpKX0pLm9uKFwiY2xpY2tcIixcImFcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksaCh0aGlzKS50cmlnZ2VyKFwiYmx1clwiKS5wYXJlbnQoKS5oYXNDbGFzcyhcInZha2F0YS1jb250ZXh0LWRpc2FibGVkXCIpfHwhMT09PWgudmFrYXRhLmNvbnRleHQuX2V4ZWN1dGUoaCh0aGlzKS5hdHRyKFwicmVsXCIpKXx8aC52YWthdGEuY29udGV4dC5oaWRlKCl9KS5vbihcImtleWRvd25cIixcImFcIixmdW5jdGlvbihlKXt2YXIgdD1udWxsO3N3aXRjaChlLndoaWNoKXtjYXNlIDEzOmNhc2UgMzI6ZS50eXBlPVwiY2xpY2tcIixlLnByZXZlbnREZWZhdWx0KCksaChlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSk7YnJlYWs7Y2FzZSAzNzpnLmlzX3Zpc2libGUmJihnLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5sYXN0KCkuY2xvc2VzdChcImxpXCIpLmZpcnN0KCkuZmluZChcInVsXCIpLmhpZGUoKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuZW5kKCkuZW5kKCkuY2hpbGRyZW4oXCJhXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSAzODpnLmlzX3Zpc2libGUmJigodD0hKHQ9Zy5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5wcmV2QWxsKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmZpcnN0KCkpLmxlbmd0aD9nLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5sYXN0KCk6dCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDM5OmcuaXNfdmlzaWJsZSYmKGcuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmxhc3QoKS5jaGlsZHJlbihcInVsXCIpLnNob3coKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDQwOmcuaXNfdmlzaWJsZSYmKCh0PSEodD1nLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLm5leHRBbGwoXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikuZmlyc3QoKSkubGVuZ3RoP2cuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmZpcnN0KCk6dCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDI3OmgudmFrYXRhLmNvbnRleHQuaGlkZSgpLGUucHJldmVudERlZmF1bHQoKX19KS5vbihcImtleWRvd25cIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGU9Zy5lbGVtZW50LmZpbmQoXCIudmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0LVwiK2Uud2hpY2gpLnBhcmVudCgpO2UucGFyZW50KCkubm90KFwiLnZha2F0YS1jb250ZXh0LWRpc2FibGVkXCIpJiZlLnRyaWdnZXIoXCJjbGlja1wiKX0pLGgoYikub24oXCJtb3VzZWRvd24udmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe2cuaXNfdmlzaWJsZSYmZy5lbGVtZW50WzBdIT09ZS50YXJnZXQmJiFoLmNvbnRhaW5zKGcuZWxlbWVudFswXSxlLnRhcmdldCkmJmgudmFrYXRhLmNvbnRleHQuaGlkZSgpfSkub24oXCJjb250ZXh0X3Nob3cudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7Zy5lbGVtZW50LmZpbmQoXCJsaTpoYXModWwpXCIpLmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LXBhcmVudFwiKSxfJiZnLmVsZW1lbnQuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ydGxcIikuY3NzKFwiZGlyZWN0aW9uXCIsXCJydGxcIiksZy5lbGVtZW50LmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCl9KX0pLEUuanN0cmVlLmRlZmF1bHRzLmRuZD17Y29weTohMCxvcGVuX3RpbWVvdXQ6NTAwLGlzX2RyYWdnYWJsZTohMCxjaGVja193aGlsZV9kcmFnZ2luZzohMCxhbHdheXNfY29weTohMSxpbnNpZGVfcG9zOjAsZHJhZ19zZWxlY3Rpb246ITAsdG91Y2g6ITAsbGFyZ2VfZHJvcF90YXJnZXQ6ITEsbGFyZ2VfZHJhZ190YXJnZXQ6ITEsdXNlX2h0bWw1OiExLGJsYW5rX3NwYWNlX2Ryb3A6ITF9LEUuanN0cmVlLnBsdWdpbnMuZG5kPWZ1bmN0aW9uKGUsZCl7dGhpcy5pbml0PWZ1bmN0aW9uKGUsdCl7ZC5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNT10aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDUmJlwiZHJhZ2dhYmxlXCJpbiBiLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpfSx0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtkLmJpbmQuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub24odGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1P1wiZHJhZ3N0YXJ0LmpzdHJlZVwiOlwibW91c2Vkb3duLmpzdHJlZSB0b3VjaHN0YXJ0LmpzdHJlZVwiLHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0P1wiLmpzdHJlZS1ub2RlXCI6XCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0JiZFKGUudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpWzBdIT09ZS5jdXJyZW50VGFyZ2V0KXJldHVybiEwO2lmKFwidG91Y2hzdGFydFwiPT09ZS50eXBlJiYoIXRoaXMuc2V0dGluZ3MuZG5kLnRvdWNofHxcInNlbGVjdGVkXCI9PT10aGlzLnNldHRpbmdzLmRuZC50b3VjaCYmIUUoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuaGFzQ2xhc3MoXCJqc3RyZWUtY2xpY2tlZFwiKSkpcmV0dXJuITA7dmFyIHQ9dGhpcy5nZXRfbm9kZShlLnRhcmdldCksaT10aGlzLmlzX3NlbGVjdGVkKHQpJiZ0aGlzLnNldHRpbmdzLmRuZC5kcmFnX3NlbGVjdGlvbj90aGlzLmdldF90b3Bfc2VsZWN0ZWQoKS5sZW5ndGg6MSxyPTE8aT9pK1wiIFwiK3RoaXMuZ2V0X3N0cmluZyhcIm5vZGVzXCIpOnRoaXMuZ2V0X3RleHQoZS5jdXJyZW50VGFyZ2V0KTtpZih0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCYmKHI9RS52YWthdGEuaHRtbC5lc2NhcGUocikpLHQmJih0LmlkfHwwPT09dC5pZCkmJnQuaWQhPT1FLmpzdHJlZS5yb290JiYoMT09PWUud2hpY2h8fFwidG91Y2hzdGFydFwiPT09ZS50eXBlfHxcImRyYWdzdGFydFwiPT09ZS50eXBlKSYmKCEwPT09dGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlfHxFLnZha2F0YS5pc19mdW5jdGlvbih0aGlzLnNldHRpbmdzLmRuZC5pc19kcmFnZ2FibGUpJiZ0aGlzLnNldHRpbmdzLmRuZC5pc19kcmFnZ2FibGUuY2FsbCh0aGlzLDE8aT90aGlzLmdldF90b3Bfc2VsZWN0ZWQoITApOlt0XSxlKSkpe2lmKG89e2pzdHJlZTohMCxvcmlnaW46dGhpcyxvYmo6dGhpcy5nZXRfbm9kZSh0LCEwKSxub2RlczoxPGk/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCk6W3QuaWRdfSx1PWUuY3VycmVudFRhcmdldCwhdGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1KXJldHVybiB0aGlzLmVsZW1lbnQudHJpZ2dlcihcIm1vdXNlZG93bi5qc3RyZWVcIiksRS52YWthdGEuZG5kLnN0YXJ0KGUsbywnPGRpdiBpZD1cImpzdHJlZS1kbmRcIiBjbGFzcz1cImpzdHJlZS0nK3RoaXMuZ2V0X3RoZW1lKCkrXCIganN0cmVlLVwiK3RoaXMuZ2V0X3RoZW1lKCkrXCItXCIrdGhpcy5nZXRfdGhlbWVfdmFyaWFudCgpK1wiIFwiKyh0aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzLnJlc3BvbnNpdmU/XCIganN0cmVlLWRuZC1yZXNwb25zaXZlXCI6XCJcIikrJ1wiPjxpIGNsYXNzPVwianN0cmVlLWljb24ganN0cmVlLWVyXCI+PC9pPicrcisnPGlucyBjbGFzcz1cImpzdHJlZS1jb3B5XCI+KzwvaW5zPjwvZGl2PicpO0UudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0YXJ0XCIsZSx7aGVscGVyOkUoKSxlbGVtZW50OnUsZGF0YTpvfSl9fS5iaW5kKHRoaXMpKSx0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDUmJnRoaXMuZWxlbWVudC5vbihcImRyYWdvdmVyLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCksRS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGUse2hlbHBlcjpFKCksZWxlbWVudDp1LGRhdGE6b30pLCExfSkub24oXCJkcm9wLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCksRS52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RvcFwiLGUse2hlbHBlcjpFKCksZWxlbWVudDp1LGRhdGE6b30pLCExfS5iaW5kKHRoaXMpKX0sdGhpcy5yZWRyYXdfbm9kZT1mdW5jdGlvbihlLHQsaSxyKXtpZigoZT1kLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkmJnRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSlpZih0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldCllLnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCEwKTtlbHNle2Zvcih2YXIgcyxhLG49bnVsbCxzPTAsYT1lLmNoaWxkTm9kZXMubGVuZ3RoO3M8YTtzKyspaWYoZS5jaGlsZE5vZGVzW3NdJiZlLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lJiYtMSE9PWUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikpe249ZS5jaGlsZE5vZGVzW3NdO2JyZWFrfW4mJm4uc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsITApfXJldHVybiBlfX0sRShmdW5jdGlvbigpe3ZhciBOPSExLFQ9ITEsTz0hMSxBPSExLFM9RSgnPGRpdiBpZD1cImpzdHJlZS1tYXJrZXJcIj4mIzE2MDs8L2Rpdj4nKS5oaWRlKCk7RShiKS5vbihcImRyYWdvdmVyLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlKXt1JiZFLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJtb3ZlXCIsZSx7aGVscGVyOkUoKSxlbGVtZW50OnUsZGF0YTpvfSl9KS5vbihcImRyb3AudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe3UmJihFLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdG9wXCIsZSx7aGVscGVyOkUoKSxlbGVtZW50OnUsZGF0YTpvfSksbz11PW51bGwpfSkub24oXCJkbmRfc3RhcnQudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7Tz1OPSExLHQmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSYmUy5hcHBlbmRUbyhiLmJvZHkpfSkub24oXCJkbmRfbW92ZS52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSxzKXt2YXIgYT1zLmV2ZW50LnRhcmdldCE9PU8udGFyZ2V0O2lmKEEmJihzLmV2ZW50JiZcImRyYWdvdmVyXCI9PT1zLmV2ZW50LnR5cGUmJiFhfHxjbGVhclRpbWVvdXQoQSkpLHMmJnMuZGF0YSYmcy5kYXRhLmpzdHJlZSYmKCFzLmV2ZW50LnRhcmdldC5pZHx8XCJqc3RyZWUtbWFya2VyXCIhPT1zLmV2ZW50LnRhcmdldC5pZCkpe089cy5ldmVudDt2YXIgbj1FLmpzdHJlZS5yZWZlcmVuY2Uocy5ldmVudC50YXJnZXQpLGQ9ITEsbz0hMSx0PSExLGksYyxsLGgsXyxnLHUsZixwLG0sdixqLGssYix5LHgsdyxDO2lmKG4mJm4uX2RhdGEmJm4uX2RhdGEuZG5kKWlmKFMuYXR0cihcImNsYXNzXCIsXCJqc3RyZWUtXCIrbi5nZXRfdGhlbWUoKSsobi5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKSx4PXMuZGF0YS5vcmlnaW4mJihzLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5hbHdheXNfY29weXx8cy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuY29weSYmKHMuZXZlbnQubWV0YUtleXx8cy5ldmVudC5jdHJsS2V5KSkscy5oZWxwZXIuY2hpbGRyZW4oKS5hdHRyKFwiY2xhc3NcIixcImpzdHJlZS1cIituLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIituLmdldF90aGVtZSgpK1wiLVwiK24uZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisobi5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKS5maW5kKFwiLmpzdHJlZS1jb3B5XCIpLmZpcnN0KClbeD9cInNob3dcIjpcImhpZGVcIl0oKSxzLmV2ZW50LnRhcmdldCE9PW4uZWxlbWVudFswXSYmcy5ldmVudC50YXJnZXQhPT1uLmdldF9jb250YWluZXJfdWwoKVswXXx8MCE9PW4uZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKCkubGVuZ3RoJiYhbi5zZXR0aW5ncy5kbmQuYmxhbmtfc3BhY2VfZHJvcCl7aWYoKGQ9bi5zZXR0aW5ncy5kbmQubGFyZ2VfZHJvcF90YXJnZXQ/RShzLmV2ZW50LnRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpOkUocy5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLWFuY2hvclwiKSkmJmQubGVuZ3RoJiZkLnBhcmVudCgpLmlzKFwiLmpzdHJlZS1jbG9zZWQsIC5qc3RyZWUtb3BlbiwgLmpzdHJlZS1sZWFmXCIpJiYobz1kLm9mZnNldCgpLHQ9KHMuZXZlbnQucGFnZVkhPT1QP3MuZXZlbnQ6cy5ldmVudC5vcmlnaW5hbEV2ZW50KS5wYWdlWS1vLnRvcCxoPWQub3V0ZXJIZWlnaHQoKSx1PXQ8aC8zP1tcImJcIixcImlcIixcImFcIl06aC1oLzM8dD9bXCJhXCIsXCJpXCIsXCJiXCJdOmgvMjx0P1tcImlcIixcImFcIixcImJcIl06W1wiaVwiLFwiYlwiLFwiYVwiXSxFLmVhY2godSxmdW5jdGlvbihlLHQpe3N3aXRjaCh0KXtjYXNlXCJiXCI6Yz1vLmxlZnQtNixsPW8udG9wLF89bi5nZXRfcGFyZW50KGQpLGc9ZC5wYXJlbnQoKS5pbmRleCgpLEM9XCJqc3RyZWUtYmVsb3dcIjticmVhaztjYXNlXCJpXCI6Yj1uLnNldHRpbmdzLmRuZC5pbnNpZGVfcG9zLHk9bi5nZXRfbm9kZShkLnBhcmVudCgpKSxjPW8ubGVmdC0yLGw9by50b3AraC8yKzEsXz15LmlkLGc9XCJmaXJzdFwiPT09Yj8wOlwibGFzdFwiPT09Yj95LmNoaWxkcmVuLmxlbmd0aDpNYXRoLm1pbihiLHkuY2hpbGRyZW4ubGVuZ3RoKSxDPVwianN0cmVlLWluc2lkZVwiO2JyZWFrO2Nhc2VcImFcIjpjPW8ubGVmdC02LGw9by50b3AraCxfPW4uZ2V0X3BhcmVudChkKSxnPWQucGFyZW50KCkuaW5kZXgoKSsxLEM9XCJqc3RyZWUtYWJvdmVcIn1mb3IoZj0hMCxwPTAsbT1zLmRhdGEubm9kZXMubGVuZ3RoO3A8bTtwKyspaWYodj1zLmRhdGEub3JpZ2luJiYocy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihzLmV2ZW50Lm1ldGFLZXl8fHMuZXZlbnQuY3RybEtleSkpP1wiY29weV9ub2RlXCI6XCJtb3ZlX25vZGVcIixqPWcsXCJtb3ZlX25vZGVcIj09diYmXCJhXCI9PT10JiZzLmRhdGEub3JpZ2luJiZzLmRhdGEub3JpZ2luPT09biYmXz09PW4uZ2V0X3BhcmVudChzLmRhdGEubm9kZXNbcF0pJiYoaz1uLmdldF9ub2RlKF8pLGo+RS5pbkFycmF5KHMuZGF0YS5ub2Rlc1twXSxrLmNoaWxkcmVuKSYmLS1qKSwhKGY9ZiYmKG4mJm4uc2V0dGluZ3MmJm4uc2V0dGluZ3MuZG5kJiYhMT09PW4uc2V0dGluZ3MuZG5kLmNoZWNrX3doaWxlX2RyYWdnaW5nfHxuLmNoZWNrKHYscy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbiE9PW4/cy5kYXRhLm9yaWdpbi5nZXRfbm9kZShzLmRhdGEubm9kZXNbcF0pOnMuZGF0YS5ub2Rlc1twXSxfLGose2RuZDohMCxyZWY6bi5nZXRfbm9kZShkLnBhcmVudCgpKSxwb3M6dCxvcmlnaW46cy5kYXRhLm9yaWdpbixpc19tdWx0aTpzLmRhdGEub3JpZ2luJiZzLmRhdGEub3JpZ2luIT09bixpc19mb3JlaWduOiFzLmRhdGEub3JpZ2lufSkpKSl7biYmbi5sYXN0X2Vycm9yJiYoVD1uLmxhc3RfZXJyb3IoKSk7YnJlYWt9dmFyIGkscjtpZihcImlcIj09PXQmJmQucGFyZW50KCkuaXMoXCIuanN0cmVlLWNsb3NlZFwiKSYmbi5zZXR0aW5ncy5kbmQub3Blbl90aW1lb3V0JiYocy5ldmVudCYmXCJkcmFnb3ZlclwiPT09cy5ldmVudC50eXBlJiYhYXx8KEEmJmNsZWFyVGltZW91dChBKSxBPXNldFRpbWVvdXQoKHI9ZCxmdW5jdGlvbigpe2kub3Blbl9ub2RlKHIpfSksKGk9bikuc2V0dGluZ3MuZG5kLm9wZW5fdGltZW91dCkpKSxmKXJldHVybih3PW4uZ2V0X25vZGUoXywhMCkpLmhhc0NsYXNzKFwiLmpzdHJlZS1kbmQtcGFyZW50XCIpfHwoRShcIi5qc3RyZWUtZG5kLXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpLHcuYWRkQ2xhc3MoXCJqc3RyZWUtZG5kLXBhcmVudFwiKSksTj17aW5zOm4scGFyOl8scG9zOlwiaVwiIT09dHx8XCJsYXN0XCIhPT1ifHwwIT09Z3x8bi5pc19sb2FkZWQoeSk/ZzpcImxhc3RcIn0sUy5jc3Moe2xlZnQ6YytcInB4XCIsdG9wOmwrXCJweFwifSkuc2hvdygpLFMucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtYWJvdmUganN0cmVlLWluc2lkZSBqc3RyZWUtYmVsb3dcIikuYWRkQ2xhc3MoQykscy5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5maXJzdCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLWVyXCIpLmFkZENsYXNzKFwianN0cmVlLW9rXCIpLHMuZXZlbnQub3JpZ2luYWxFdmVudCYmcy5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciYmKHMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD14P1wiY29weVwiOlwibW92ZVwiKSxUPXt9LCEodT0hMCl9KSwhMD09PXUpKXJldHVybn1lbHNle2ZvcihmPSEwLHA9MCxtPXMuZGF0YS5ub2Rlcy5sZW5ndGg7cDxtO3ArKylpZighKGY9ZiYmbi5jaGVjayhzLmRhdGEub3JpZ2luJiYocy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihzLmV2ZW50Lm1ldGFLZXl8fHMuZXZlbnQuY3RybEtleSkpP1wiY29weV9ub2RlXCI6XCJtb3ZlX25vZGVcIixzLmRhdGEub3JpZ2luJiZzLmRhdGEub3JpZ2luIT09bj9zLmRhdGEub3JpZ2luLmdldF9ub2RlKHMuZGF0YS5ub2Rlc1twXSk6cy5kYXRhLm5vZGVzW3BdLEUuanN0cmVlLnJvb3QsXCJsYXN0XCIse2RuZDohMCxyZWY6bi5nZXRfbm9kZShFLmpzdHJlZS5yb290KSxwb3M6XCJpXCIsb3JpZ2luOnMuZGF0YS5vcmlnaW4saXNfbXVsdGk6cy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbiE9PW4saXNfZm9yZWlnbjohcy5kYXRhLm9yaWdpbn0pKSlicmVhaztpZihmKXJldHVybiBOPXtpbnM6bixwYXI6RS5qc3RyZWUucm9vdCxwb3M6XCJsYXN0XCJ9LFMuaGlkZSgpLHMuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikuZmlyc3QoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lclwiKS5hZGRDbGFzcyhcImpzdHJlZS1va1wiKSx2b2lkKHMuZXZlbnQub3JpZ2luYWxFdmVudCYmcy5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciYmKHMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD14P1wiY29weVwiOlwibW92ZVwiKSl9RShcIi5qc3RyZWUtZG5kLXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpLE49ITEscy5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1va1wiKS5hZGRDbGFzcyhcImpzdHJlZS1lclwiKSxzLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJnMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIsUy5oaWRlKCl9fSkub24oXCJkbmRfc2Nyb2xsLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3QmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSYmKFMuaGlkZSgpLE89Tj0hMSx0LmhlbHBlci5maW5kKFwiLmpzdHJlZS1pY29uXCIpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb2tcIikuYWRkQ2xhc3MoXCJqc3RyZWUtZXJcIikpfSkub24oXCJkbmRfc3RvcC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtpZihFKFwiLmpzdHJlZS1kbmQtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIiksQSYmY2xlYXJUaW1lb3V0KEEpLHQmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSl7Uy5oaWRlKCkuZGV0YWNoKCk7dmFyIGkscixzPVtdO2lmKE4pe2ZvcihpPTAscj10LmRhdGEubm9kZXMubGVuZ3RoO2k8cjtpKyspc1tpXT10LmRhdGEub3JpZ2luP3QuZGF0YS5vcmlnaW4uZ2V0X25vZGUodC5kYXRhLm5vZGVzW2ldKTp0LmRhdGEubm9kZXNbaV07Ti5pbnNbdC5kYXRhLm9yaWdpbiYmKHQuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHx0LmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYodC5ldmVudC5tZXRhS2V5fHx0LmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCJdKHMsTi5wYXIsTi5wb3MsITEsITEsITEsdC5kYXRhLm9yaWdpbil9ZWxzZShpPUUodC5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlXCIpKS5sZW5ndGgmJlQmJlQuZXJyb3ImJlwiY2hlY2tcIj09PVQuZXJyb3ImJihpPWkuanN0cmVlKCEwKSkmJmkuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsVCk7Tj1PPSExfX0pLm9uKFwia2V5dXAuanN0cmVlIGtleWRvd24uanN0cmVlXCIsZnVuY3Rpb24oZSx0KXsodD1FLnZha2F0YS5kbmQuX2dldCgpKSYmdC5kYXRhJiZ0LmRhdGEuanN0cmVlJiYoXCJrZXl1cFwiPT09ZS50eXBlJiYyNz09PWUud2hpY2g/KEEmJmNsZWFyVGltZW91dChBKSxBPU89VD1OPSExLFMuaGlkZSgpLmRldGFjaCgpLEUudmFrYXRhLmRuZC5fY2xlYW4oKSk6KHQuaGVscGVyLmZpbmQoXCIuanN0cmVlLWNvcHlcIikuZmlyc3QoKVt0LmRhdGEub3JpZ2luJiYodC5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHQuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpP1wic2hvd1wiOlwiaGlkZVwiXSgpLE8mJihPLm1ldGFLZXk9ZS5tZXRhS2V5LE8uY3RybEtleT1lLmN0cmxLZXksRS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLE8pKSkpfSl9KSxwPXtlbGVtZW50OiEoKGY9RSkudmFrYXRhLmh0bWw9e2RpdjpmKFwiPGRpdj48L2Rpdj5cIiksZXNjYXBlOmZ1bmN0aW9uKGUpe3JldHVybiBmLnZha2F0YS5odG1sLmRpdi50ZXh0KGUpLmh0bWwoKX0sc3RyaXA6ZnVuY3Rpb24oZSl7cmV0dXJuIGYudmFrYXRhLmh0bWwuZGl2LmVtcHR5KCkuYXBwZW5kKGYucGFyc2VIVE1MKGUpKS50ZXh0KCl9fSksdGFyZ2V0OiExLGlzX2Rvd246ITEsaXNfZHJhZzohMSxoZWxwZXI6ITEsaGVscGVyX3c6MCxkYXRhOiExLGluaXRfeDowLGluaXRfeTowLHNjcm9sbF9sOjAsc2Nyb2xsX3Q6MCxzY3JvbGxfZTohMSxzY3JvbGxfaTohMSxpc190b3VjaDohMX0sZi52YWthdGEuZG5kPXtzZXR0aW5nczp7c2Nyb2xsX3NwZWVkOjEwLHNjcm9sbF9wcm94aW1pdHk6MjAsaGVscGVyX2xlZnQ6NSxoZWxwZXJfdG9wOjEwLHRocmVzaG9sZDo1LHRocmVzaG9sZF90b3VjaDoxMH0sX3RyaWdnZXI6ZnVuY3Rpb24oZSx0LGkpeyhpPWk9PT1QP2YudmFrYXRhLmRuZC5fZ2V0KCk6aSkuZXZlbnQ9dCxmKGIpLnRyaWdnZXJIYW5kbGVyKFwiZG5kX1wiK2UrXCIudmFrYXRhXCIsaSl9LF9nZXQ6ZnVuY3Rpb24oKXtyZXR1cm57ZGF0YTpwLmRhdGEsZWxlbWVudDpwLmVsZW1lbnQsaGVscGVyOnAuaGVscGVyfX0sX2NsZWFuOmZ1bmN0aW9uKCl7cC5oZWxwZXImJnAuaGVscGVyLnJlbW92ZSgpLHAuc2Nyb2xsX2kmJihjbGVhckludGVydmFsKHAuc2Nyb2xsX2kpLHAuc2Nyb2xsX2k9ITEpLHA9e2VsZW1lbnQ6ITEsdGFyZ2V0OiExLGlzX2Rvd246ITEsaXNfZHJhZzohMSxoZWxwZXI6ITEsaGVscGVyX3c6MCxkYXRhOiExLGluaXRfeDowLGluaXRfeTowLHNjcm9sbF9sOjAsc2Nyb2xsX3Q6MCxzY3JvbGxfZTohMSxzY3JvbGxfaTohMSxpc190b3VjaDohMX0sdT1udWxsLGYoYikub2ZmKFwibW91c2Vtb3ZlLnZha2F0YS5qc3RyZWUgdG91Y2htb3ZlLnZha2F0YS5qc3RyZWVcIixmLnZha2F0YS5kbmQuZHJhZyksZihiKS5vZmYoXCJtb3VzZXVwLnZha2F0YS5qc3RyZWUgdG91Y2hlbmQudmFrYXRhLmpzdHJlZVwiLGYudmFrYXRhLmRuZC5zdG9wKX0sX3Njcm9sbDpmdW5jdGlvbihlKXtpZighcC5zY3JvbGxfZXx8IXAuc2Nyb2xsX2wmJiFwLnNjcm9sbF90KXJldHVybiBwLnNjcm9sbF9pJiYoY2xlYXJJbnRlcnZhbChwLnNjcm9sbF9pKSxwLnNjcm9sbF9pPSExKSwhMTtpZighcC5zY3JvbGxfaSlyZXR1cm4gcC5zY3JvbGxfaT1zZXRJbnRlcnZhbChmLnZha2F0YS5kbmQuX3Njcm9sbCwxMDApLCExO2lmKCEwPT09ZSlyZXR1cm4hMTt2YXIgdD1wLnNjcm9sbF9lLnNjcm9sbFRvcCgpLGU9cC5zY3JvbGxfZS5zY3JvbGxMZWZ0KCk7cC5zY3JvbGxfZS5zY3JvbGxUb3AodCtwLnNjcm9sbF90KmYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfc3BlZWQpLHAuc2Nyb2xsX2Uuc2Nyb2xsTGVmdChlK3Auc2Nyb2xsX2wqZi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9zcGVlZCksdD09PXAuc2Nyb2xsX2Uuc2Nyb2xsVG9wKCkmJmU9PT1wLnNjcm9sbF9lLnNjcm9sbExlZnQoKXx8Zi52YWthdGEuZG5kLl90cmlnZ2VyKFwic2Nyb2xsXCIscC5zY3JvbGxfZSl9LHN0YXJ0OmZ1bmN0aW9uKGUsdCxpKXtcInRvdWNoc3RhcnRcIj09PWUudHlwZSYmZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGUucGFnZVg9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGUucGFnZVk9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGUudGFyZ2V0PWIuZWxlbWVudEZyb21Qb2ludChlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxwLmlzX2RyYWcmJmYudmFrYXRhLmRuZC5zdG9wKHt9KTt0cnl7ZS5jdXJyZW50VGFyZ2V0LnVuc2VsZWN0YWJsZT1cIm9uXCIsZS5jdXJyZW50VGFyZ2V0Lm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZS5jdXJyZW50VGFyZ2V0LnN0eWxlJiYoZS5jdXJyZW50VGFyZ2V0LnN0eWxlLnRvdWNoQWN0aW9uPVwibm9uZVwiLGUuY3VycmVudFRhcmdldC5zdHlsZS5tc1RvdWNoQWN0aW9uPVwibm9uZVwiLGUuY3VycmVudFRhcmdldC5zdHlsZS5Nb3pVc2VyU2VsZWN0PVwibm9uZVwiKX1jYXRjaChlKXt9cmV0dXJuIHAuaW5pdF94PWUucGFnZVgscC5pbml0X3k9ZS5wYWdlWSxwLmRhdGE9dCxwLmlzX2Rvd249ITAscC5lbGVtZW50PWUuY3VycmVudFRhcmdldCxwLnRhcmdldD1lLnRhcmdldCxwLmlzX3RvdWNoPVwidG91Y2hzdGFydFwiPT09ZS50eXBlLCExIT09aSYmKHAuaGVscGVyPWYoXCI8ZGl2IGlkPSd2YWthdGEtZG5kJz48L2Rpdj5cIikuaHRtbChpKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLG1hcmdpbjpcIjBcIixwYWRkaW5nOlwiMFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMjAwMHB4XCIsbGluZUhlaWdodDpcIjE2cHhcIix6SW5kZXg6XCIxMDAwMFwifSkpLGYoYikub24oXCJtb3VzZW1vdmUudmFrYXRhLmpzdHJlZSB0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLGYudmFrYXRhLmRuZC5kcmFnKSxmKGIpLm9uKFwibW91c2V1cC52YWthdGEuanN0cmVlIHRvdWNoZW5kLnZha2F0YS5qc3RyZWVcIixmLnZha2F0YS5kbmQuc3RvcCksITF9LGRyYWc6ZnVuY3Rpb24oaSl7aWYoXCJ0b3VjaG1vdmVcIj09PWkudHlwZSYmaS5vcmlnaW5hbEV2ZW50JiZpLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGkucGFnZVg9aS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGkucGFnZVk9aS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGkudGFyZ2V0PWIuZWxlbWVudEZyb21Qb2ludChpLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxwLmlzX2Rvd24pe2lmKCFwLmlzX2RyYWcpe2lmKCEoTWF0aC5hYnMoaS5wYWdlWC1wLmluaXRfeCk+KHAuaXNfdG91Y2g/Zi52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZF90b3VjaDpmLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkKXx8TWF0aC5hYnMoaS5wYWdlWS1wLmluaXRfeSk+KHAuaXNfdG91Y2g/Zi52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZF90b3VjaDpmLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkKSkpcmV0dXJuO3AuaGVscGVyJiYocC5oZWxwZXIuYXBwZW5kVG8oYi5ib2R5KSxwLmhlbHBlcl93PXAuaGVscGVyLm91dGVyV2lkdGgoKSkscC5pc19kcmFnPSEwLGYocC50YXJnZXQpLm9uZShcImNsaWNrLnZha2F0YVwiLCExKSxmLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdGFydFwiLGkpfXZhciBlPSExLHQ9ITEscj0hMSxzPSExLGE9ITEsbj0hMSxkPSExLG89ITEsYz0hMSxsPSExO3JldHVybiBwLnNjcm9sbF90PTAscC5zY3JvbGxfbD0wLHAuc2Nyb2xsX2U9ITEsZihmKGkudGFyZ2V0KS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmFkZEJhY2soKS5nZXQoKS5yZXZlcnNlKCkpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQmJi9eYXV0b3xzY3JvbGwkLy50ZXN0KGYodGhpcykuY3NzKFwib3ZlcmZsb3dcIikpJiYodGhpcy5zY3JvbGxIZWlnaHQ+dGhpcy5vZmZzZXRIZWlnaHR8fHRoaXMuc2Nyb2xsV2lkdGg+dGhpcy5vZmZzZXRXaWR0aCl9KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9Zih0aGlzKSx0PWUub2Zmc2V0KCk7aWYodGhpcy5zY3JvbGxIZWlnaHQ+dGhpcy5vZmZzZXRIZWlnaHQmJih0LnRvcCtlLmhlaWdodCgpLWkucGFnZVk8Zi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihwLnNjcm9sbF90PTEpLGkucGFnZVktdC50b3A8Zi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihwLnNjcm9sbF90PS0xKSksdGhpcy5zY3JvbGxXaWR0aD50aGlzLm9mZnNldFdpZHRoJiYodC5sZWZ0K2Uud2lkdGgoKS1pLnBhZ2VYPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfbD0xKSxpLnBhZ2VYLXQubGVmdDxmLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKHAuc2Nyb2xsX2w9LTEpKSxwLnNjcm9sbF90fHxwLnNjcm9sbF9sKXJldHVybiBwLnNjcm9sbF9lPWYodGhpcyksITF9KSxwLnNjcm9sbF9lfHwoZT1mKGIpLHQ9Zih3aW5kb3cpLHI9ZS5oZWlnaHQoKSxzPXQuaGVpZ2h0KCksYT1lLndpZHRoKCksbj10LndpZHRoKCksZD1lLnNjcm9sbFRvcCgpLG89ZS5zY3JvbGxMZWZ0KCksczxyJiZpLnBhZ2VZLWQ8Zi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihwLnNjcm9sbF90PS0xKSxzPHImJnMtKGkucGFnZVktZCk8Zi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihwLnNjcm9sbF90PTEpLG48YSYmaS5wYWdlWC1vPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfbD0tMSksbjxhJiZuLShpLnBhZ2VYLW8pPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfbD0xKSwocC5zY3JvbGxfdHx8cC5zY3JvbGxfbCkmJihwLnNjcm9sbF9lPWUpKSxwLnNjcm9sbF9lJiZmLnZha2F0YS5kbmQuX3Njcm9sbCghMCkscC5oZWxwZXImJihjPXBhcnNlSW50KGkucGFnZVkrZi52YWthdGEuZG5kLnNldHRpbmdzLmhlbHBlcl90b3AsMTApLGw9cGFyc2VJbnQoaS5wYWdlWCtmLnZha2F0YS5kbmQuc2V0dGluZ3MuaGVscGVyX2xlZnQsMTApLGEmJmwrcC5oZWxwZXJfdz5hJiYobD1hLShwLmhlbHBlcl93KzIpKSxwLmhlbHBlci5jc3Moe2xlZnQ6bCtcInB4XCIsdG9wOihjPXImJnI8YysyNT9yLTUwOmMpK1wicHhcIn0pKSxmLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJtb3ZlXCIsaSksITF9fSxzdG9wOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVyblwidG91Y2hlbmRcIj09PWUudHlwZSYmZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGUucGFnZVg9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGUucGFnZVk9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGUudGFyZ2V0PWIuZWxlbWVudEZyb21Qb2ludChlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxwLmlzX2RyYWc/KGUudGFyZ2V0IT09cC50YXJnZXQmJmYocC50YXJnZXQpLm9mZihcImNsaWNrLnZha2F0YVwiKSxmLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdG9wXCIsZSkpOlwidG91Y2hlbmRcIj09PWUudHlwZSYmZS50YXJnZXQ9PT1wLnRhcmdldCYmKHQ9c2V0VGltZW91dChmdW5jdGlvbigpe2YoZS50YXJnZXQpLnRyaWdnZXIoXCJjbGlja1wiKX0sMTAwKSxmKGUudGFyZ2V0KS5vbmUoXCJjbGlja1wiLGZ1bmN0aW9uKCl7dCYmY2xlYXJUaW1lb3V0KHQpfSkpLGYudmFrYXRhLmRuZC5fY2xlYW4oKSwhMX19LEUuanN0cmVlLmRlZmF1bHRzLm1hc3Nsb2FkPW51bGwsRS5qc3RyZWUucGx1Z2lucy5tYXNzbG9hZD1mdW5jdGlvbihlLGwpe3RoaXMuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMuX2RhdGEubWFzc2xvYWQ9e30sbC5pbml0LmNhbGwodGhpcyxlLHQpfSx0aGlzLl9sb2FkX25vZGVzPWZ1bmN0aW9uKGEsbixkLG8pe3ZhciBlPXRoaXMuc2V0dGluZ3MubWFzc2xvYWQsdD1bXSxpPXRoaXMuX21vZGVsLmRhdGEscixzLGM7aWYoIWQpe2ZvcihyPTAscz1hLmxlbmd0aDtyPHM7cisrKWlbYVtyXV0mJihpW2Fbcl1dLnN0YXRlLmxvYWRlZHx8aVthW3JdXS5zdGF0ZS5mYWlsZWQpJiYhb3x8KHQucHVzaChhW3JdKSwoYz10aGlzLmdldF9ub2RlKGFbcl0sITApKSYmYy5sZW5ndGgmJmMuYWRkQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITApKTtpZih0aGlzLl9kYXRhLm1hc3Nsb2FkPXt9LHQubGVuZ3RoKXtpZihFLnZha2F0YS5pc19mdW5jdGlvbihlKSlyZXR1cm4gZS5jYWxsKHRoaXMsdCxmdW5jdGlvbihlKXt2YXIgdCxpO2lmKGUpZm9yKHQgaW4gZSllLmhhc093blByb3BlcnR5KHQpJiYodGhpcy5fZGF0YS5tYXNzbG9hZFt0XT1lW3RdKTtmb3IodD0wLGk9YS5sZW5ndGg7dDxpO3QrKykoYz10aGlzLmdldF9ub2RlKGFbdF0sITApKSYmYy5sZW5ndGgmJmMucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITEpO2wuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixkLG8pfS5iaW5kKHRoaXMpKTtpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS51cmwpcmV0dXJuIGU9RS5leHRlbmQoITAse30sZSksRS52YWthdGEuaXNfZnVuY3Rpb24oZS51cmwpJiYoZS51cmw9ZS51cmwuY2FsbCh0aGlzLHQpKSxFLnZha2F0YS5pc19mdW5jdGlvbihlLmRhdGEpJiYoZS5kYXRhPWUuZGF0YS5jYWxsKHRoaXMsdCkpLEUuYWpheChlKS5kb25lKGZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzO2lmKGUpZm9yKHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodGhpcy5fZGF0YS5tYXNzbG9hZFtyXT1lW3JdKTtmb3Iocj0wLHM9YS5sZW5ndGg7cjxzO3IrKykoYz10aGlzLmdldF9ub2RlKGFbcl0sITApKSYmYy5sZW5ndGgmJmMucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITEpO2wuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixkLG8pfS5iaW5kKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKGUpe2wuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixkLG8pfS5iaW5kKHRoaXMpKX19cmV0dXJuIGwuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixkLG8pfSx0aGlzLl9sb2FkX25vZGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9kYXRhLm1hc3Nsb2FkW2UuaWRdLHI9bnVsbCxpO3JldHVybiBpPyhyPXRoaXNbXCJzdHJpbmdcIj09dHlwZW9mIGk/XCJfYXBwZW5kX2h0bWxfZGF0YVwiOlwiX2FwcGVuZF9qc29uX2RhdGFcIl0oZSxcInN0cmluZ1wiPT10eXBlb2YgaT9FKEUucGFyc2VIVE1MKGkpKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMyE9PXRoaXMubm9kZVR5cGV9KTppLGZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzLGUpfSksKGk9dGhpcy5nZXRfbm9kZShlLmlkLCEwKSkmJmkubGVuZ3RoJiZpLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKSxkZWxldGUgdGhpcy5fZGF0YS5tYXNzbG9hZFtlLmlkXSxyKTpsLl9sb2FkX25vZGUuY2FsbCh0aGlzLGUsdCl9fSxFLmpzdHJlZS5kZWZhdWx0cy5zZWFyY2g9e2FqYXg6ITEsZnV6enk6ITEsY2FzZV9zZW5zaXRpdmU6ITEsc2hvd19vbmx5X21hdGNoZXM6ITEsc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW46ITEsY2xvc2Vfb3BlbmVkX29uY2xlYXI6ITAsc2VhcmNoX2xlYXZlc19vbmx5OiExLHNlYXJjaF9jYWxsYmFjazohMX0sRS5qc3RyZWUucGx1Z2lucy5zZWFyY2g9ZnVuY3Rpb24oZSxkKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtkLmJpbmQuY2FsbCh0aGlzKSx0aGlzLl9kYXRhLnNlYXJjaC5zdHI9XCJcIix0aGlzLl9kYXRhLnNlYXJjaC5kb209RSgpLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1bXSx0aGlzLl9kYXRhLnNlYXJjaC5vcG49W10sdGhpcy5fZGF0YS5zZWFyY2guc29tPSExLHRoaXMuX2RhdGEuc2VhcmNoLnNtYz0hMSx0aGlzLl9kYXRhLnNlYXJjaC5oZG49W10sdGhpcy5lbGVtZW50Lm9uKFwic2VhcmNoLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fZGF0YS5zZWFyY2guc29tJiZ0LnJlcy5sZW5ndGgpe2Zvcih2YXIgaT10aGlzLl9tb2RlbC5kYXRhLHIscyxhPVtdLG4sZCxyPTAscz10LnJlcy5sZW5ndGg7cjxzO3IrKylpZihpW3QucmVzW3JdXSYmIWlbdC5yZXNbcl1dLnN0YXRlLmhpZGRlbiYmKGEucHVzaCh0LnJlc1tyXSksYT1hLmNvbmNhdChpW3QucmVzW3JdXS5wYXJlbnRzKSx0aGlzLl9kYXRhLnNlYXJjaC5zbWMpKWZvcihuPTAsZD1pW3QucmVzW3JdXS5jaGlsZHJlbl9kLmxlbmd0aDtuPGQ7bisrKWlbaVt0LnJlc1tyXV0uY2hpbGRyZW5fZFtuXV0mJiFpW2lbdC5yZXNbcl1dLmNoaWxkcmVuX2Rbbl1dLnN0YXRlLmhpZGRlbiYmYS5wdXNoKGlbdC5yZXNbcl1dLmNoaWxkcmVuX2Rbbl0pO2E9RS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0oRS52YWthdGEuYXJyYXlfdW5pcXVlKGEpLEUuanN0cmVlLnJvb3QpLHRoaXMuX2RhdGEuc2VhcmNoLmhkbj10aGlzLmhpZGVfYWxsKCEwKSx0aGlzLnNob3dfbm9kZShhLCEwKSx0aGlzLnJlZHJhdyghMCl9fS5iaW5kKHRoaXMpKS5vbihcImNsZWFyX3NlYXJjaC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuX2RhdGEuc2VhcmNoLnNvbSYmdC5yZXMubGVuZ3RoJiYodGhpcy5zaG93X25vZGUodGhpcy5fZGF0YS5zZWFyY2guaGRuLCEwKSx0aGlzLnJlZHJhdyghMCkpfS5iaW5kKHRoaXMpKX0sdGhpcy5zZWFyY2g9ZnVuY3Rpb24ocixlLHQsaSxzLGEpe2lmKCExPT09cnx8XCJcIj09PUUudmFrYXRhLnRyaW0oci50b1N0cmluZygpKSlyZXR1cm4gdGhpcy5jbGVhcl9zZWFyY2goKTtpPShpPXRoaXMuZ2V0X25vZGUoaSkpJiYoaS5pZHx8MD09PWkuaWQpP2kuaWQ6bnVsbCxyPXIudG9TdHJpbmcoKTt2YXIgbj10aGlzLnNldHRpbmdzLnNlYXJjaCxkPW4uYWpheHx8ITEsbz10aGlzLl9tb2RlbC5kYXRhLGM9bnVsbCxsPVtdLGg9W10sXyxnO2lmKHRoaXMuX2RhdGEuc2VhcmNoLnJlcy5sZW5ndGgmJiFzJiZ0aGlzLmNsZWFyX3NlYXJjaCgpLHQ9PT1QJiYodD1uLnNob3dfb25seV9tYXRjaGVzKSxhPT09UCYmKGE9bi5zaG93X29ubHlfbWF0Y2hlc19jaGlsZHJlbiksIWUmJiExIT09ZClyZXR1cm4gRS52YWthdGEuaXNfZnVuY3Rpb24oZCk/ZC5jYWxsKHRoaXMscixmdW5jdGlvbihlKXtlJiZlLmQmJihlPWUuZCksdGhpcy5fbG9hZF9ub2RlcyhFLnZha2F0YS5pc19hcnJheShlKT9FLnZha2F0YS5hcnJheV91bmlxdWUoZSk6W10sZnVuY3Rpb24oKXt0aGlzLnNlYXJjaChyLCEwLHQsaSxzLGEpfSl9LmJpbmQodGhpcyksaSk6KChkPUUuZXh0ZW5kKHt9LGQpKS5kYXRhfHwoZC5kYXRhPXt9KSxkLmRhdGEuc3RyPXIsaSYmKGQuZGF0YS5pbnNpZGU9aSksdGhpcy5fZGF0YS5zZWFyY2gubGFzdFJlcXVlc3QmJnRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0LmFib3J0KCksdGhpcy5fZGF0YS5zZWFyY2gubGFzdFJlcXVlc3Q9RS5hamF4KGQpLmZhaWwoZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJhamF4XCIscGx1Z2luOlwic2VhcmNoXCIsaWQ6XCJzZWFyY2hfMDFcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBzZWFyY2ggcGFyZW50c1wiLGRhdGE6SlNPTi5zdHJpbmdpZnkoZCl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpfS5iaW5kKHRoaXMpKS5kb25lKGZ1bmN0aW9uKGUpe2UmJmUuZCYmKGU9ZS5kKSx0aGlzLl9sb2FkX25vZGVzKEUudmFrYXRhLmlzX2FycmF5KGUpP0UudmFrYXRhLmFycmF5X3VuaXF1ZShlKTpbXSxmdW5jdGlvbigpe3RoaXMuc2VhcmNoKHIsITAsdCxpLHMsYSl9KX0uYmluZCh0aGlzKSksdGhpcy5fZGF0YS5zZWFyY2gubGFzdFJlcXVlc3QpO2lmKHN8fCh0aGlzLl9kYXRhLnNlYXJjaC5zdHI9cix0aGlzLl9kYXRhLnNlYXJjaC5kb209RSgpLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1bXSx0aGlzLl9kYXRhLnNlYXJjaC5vcG49W10sdGhpcy5fZGF0YS5zZWFyY2guc29tPXQsdGhpcy5fZGF0YS5zZWFyY2guc21jPWEpLGM9bmV3IEUudmFrYXRhLnNlYXJjaChyLCEwLHtjYXNlU2Vuc2l0aXZlOm4uY2FzZV9zZW5zaXRpdmUsZnV6enk6bi5mdXp6eX0pLEUuZWFjaChvW2l8fEUuanN0cmVlLnJvb3RdLmNoaWxkcmVuX2QsZnVuY3Rpb24oZSx0KXt2YXIgaT1vW3RdO2kudGV4dCYmIWkuc3RhdGUuaGlkZGVuJiYoIW4uc2VhcmNoX2xlYXZlc19vbmx5fHxpLnN0YXRlLmxvYWRlZCYmMD09PWkuY2hpbGRyZW4ubGVuZ3RoKSYmKG4uc2VhcmNoX2NhbGxiYWNrJiZuLnNlYXJjaF9jYWxsYmFjay5jYWxsKHRoaXMscixpKXx8IW4uc2VhcmNoX2NhbGxiYWNrJiZjLnNlYXJjaChpLnRleHQpLmlzTWF0Y2gpJiYobC5wdXNoKHQpLGg9aC5jb25jYXQoaS5wYXJlbnRzKSl9KSxsLmxlbmd0aCl7Zm9yKF89MCxnPShoPUUudmFrYXRhLmFycmF5X3VuaXF1ZShoKSkubGVuZ3RoO188ZztfKyspaFtfXSE9PUUuanN0cmVlLnJvb3QmJm9baFtfXV0mJiEwPT09dGhpcy5vcGVuX25vZGUoaFtfXSxudWxsLDApJiZ0aGlzLl9kYXRhLnNlYXJjaC5vcG4ucHVzaChoW19dKTtzPyh0aGlzLl9kYXRhLnNlYXJjaC5kb209dGhpcy5fZGF0YS5zZWFyY2guZG9tLmFkZChFKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiI1wiK0UubWFwKGwsZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1cIjAxMjM0NTY3ODlcIi5pbmRleE9mKGVbMF0pP1wiXFxcXDNcIitlWzBdK1wiIFwiK2Uuc3Vic3RyKDEpLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKTplLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKX0pLmpvaW4oXCIsICNcIikpKSksdGhpcy5fZGF0YS5zZWFyY2gucmVzPUUudmFrYXRhLmFycmF5X3VuaXF1ZSh0aGlzLl9kYXRhLnNlYXJjaC5yZXMuY29uY2F0KGwpKSk6KHRoaXMuX2RhdGEuc2VhcmNoLmRvbT1FKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiI1wiK0UubWFwKGwsZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1cIjAxMjM0NTY3ODlcIi5pbmRleE9mKGVbMF0pP1wiXFxcXDNcIitlWzBdK1wiIFwiK2Uuc3Vic3RyKDEpLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKTplLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKX0pLmpvaW4oXCIsICNcIikpKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9bCksdGhpcy5fZGF0YS5zZWFyY2guZG9tLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtc2VhcmNoXCIpfXRoaXMudHJpZ2dlcihcInNlYXJjaFwiLHtub2Rlczp0aGlzLl9kYXRhLnNlYXJjaC5kb20sc3RyOnIscmVzOnRoaXMuX2RhdGEuc2VhcmNoLnJlcyxzaG93X29ubHlfbWF0Y2hlczp0fSl9LHRoaXMuY2xlYXJfc2VhcmNoPWZ1bmN0aW9uKCl7dGhpcy5zZXR0aW5ncy5zZWFyY2guY2xvc2Vfb3BlbmVkX29uY2xlYXImJnRoaXMuY2xvc2Vfbm9kZSh0aGlzLl9kYXRhLnNlYXJjaC5vcG4sMCksdGhpcy50cmlnZ2VyKFwiY2xlYXJfc2VhcmNoXCIse25vZGVzOnRoaXMuX2RhdGEuc2VhcmNoLmRvbSxzdHI6dGhpcy5fZGF0YS5zZWFyY2guc3RyLHJlczp0aGlzLl9kYXRhLnNlYXJjaC5yZXN9KSx0aGlzLl9kYXRhLnNlYXJjaC5yZXMubGVuZ3RoJiYodGhpcy5fZGF0YS5zZWFyY2guZG9tPUUodGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjXCIrRS5tYXAodGhpcy5fZGF0YS5zZWFyY2gucmVzLGZ1bmN0aW9uKGUpe3JldHVybi0xIT09XCIwMTIzNDU2Nzg5XCIuaW5kZXhPZihlWzBdKT9cIlxcXFwzXCIrZVswXStcIiBcIitlLnN1YnN0cigxKS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIik6ZS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIil9KS5qb2luKFwiLCAjXCIpKSksdGhpcy5fZGF0YS5zZWFyY2guZG9tLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtc2VhcmNoXCIpKSx0aGlzLl9kYXRhLnNlYXJjaC5zdHI9XCJcIix0aGlzLl9kYXRhLnNlYXJjaC5yZXM9W10sdGhpcy5fZGF0YS5zZWFyY2gub3BuPVtdLHRoaXMuX2RhdGEuc2VhcmNoLmRvbT1FKCl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7aWYoKGU9ZC5yZWRyYXdfbm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpJiYtMSE9PUUuaW5BcnJheShlLmlkLHRoaXMuX2RhdGEuc2VhcmNoLnJlcykpe2Zvcih2YXIgcyxhLG49bnVsbCxzPTAsYT1lLmNoaWxkTm9kZXMubGVuZ3RoO3M8YTtzKyspaWYoZS5jaGlsZE5vZGVzW3NdJiZlLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lJiYtMSE9PWUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikpe249ZS5jaGlsZE5vZGVzW3NdO2JyZWFrfW4mJihuLmNsYXNzTmFtZSs9XCIganN0cmVlLXNlYXJjaFwiKX1yZXR1cm4gZX19LCh3PUUpLnZha2F0YS5zZWFyY2g9ZnVuY3Rpb24ocCxlLG0pe209bXx8e30sITEhPT0obT13LmV4dGVuZCh7fSx3LnZha2F0YS5zZWFyY2guZGVmYXVsdHMsbSkpLmZ1enp5JiYobS5mdXp6eT0hMCkscD1tLmNhc2VTZW5zaXRpdmU/cDpwLnRvTG93ZXJDYXNlKCk7dmFyIHY9bS5sb2NhdGlvbixpPW0uZGlzdGFuY2Usaj1tLnRocmVzaG9sZCxrPXAubGVuZ3RoLGIseSx4LHQ7cmV0dXJuIDMyPGsmJihtLmZ1enp5PSExKSxtLmZ1enp5JiYoYj0xPDxrLTEseT1mdW5jdGlvbigpe2Zvcih2YXIgZT17fSx0PTAsdD0wO3Q8azt0KyspZVtwLmNoYXJBdCh0KV09MDtmb3IodD0wO3Q8azt0KyspZVtwLmNoYXJBdCh0KV18PTE8PGstdC0xO3JldHVybiBlfSgpLHg9ZnVuY3Rpb24oZSx0KXt2YXIgZT1lL2ssdD1NYXRoLmFicyh2LXQpO3JldHVybiBpP2UrdC9pOnQ/MTplfSksdD1mdW5jdGlvbihlKXtpZihlPW0uY2FzZVNlbnNpdGl2ZT9lLnRvU3RyaW5nKCk6ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkscD09PWV8fC0xIT09ZS5pbmRleE9mKHApKXJldHVybntpc01hdGNoOiEwLHNjb3JlOjB9O2lmKCFtLmZ1enp5KXJldHVybntpc01hdGNoOiExLHNjb3JlOjF9O3ZhciB0LGkscj1lLmxlbmd0aCxzPWosYT1lLmluZGV4T2YocCx2KSxuLGQsbz1rK3IsYyxsLGgsXyxnLHU9MSxmPVtdO2ZvcigtMSE9PWEmJihzPU1hdGgubWluKHgoMCxhKSxzKSwtMSE9PShhPWUubGFzdEluZGV4T2YocCx2K2spKSYmKHM9TWF0aC5taW4oeCgwLGEpLHMpKSksYT0tMSx0PTA7dDxrO3QrKyl7bj0wLGQ9bzt3aGlsZShuPGQpeCh0LHYrZCk8PXM/bj1kOm89ZCxkPU1hdGguZmxvb3IoKG8tbikvMituKTtmb3Iobz1kLGw9TWF0aC5tYXgoMSx2LWQrMSksaD1NYXRoLm1pbih2K2QscikraywoXz1uZXcgQXJyYXkoaCsyKSlbaCsxXT0oMTw8dCktMSxpPWg7bDw9aTtpLS0paWYoZz15W2UuY2hhckF0KGktMSldLF9baV09MD09PXQ/KF9baSsxXTw8MXwxKSZnOihfW2krMV08PDF8MSkmZ3woY1tpKzFdfGNbaV0pPDwxfDF8Y1tpKzFdLF9baV0mYiYmKHU9eCh0LGktMSkpPD1zKXtpZihzPXUsZi5wdXNoKGE9aS0xKSwhKHY8YSkpYnJlYWs7bD1NYXRoLm1heCgxLDIqdi1hKX1pZih4KHQrMSx2KT5zKWJyZWFrO2M9X31yZXR1cm57aXNNYXRjaDowPD1hLHNjb3JlOnV9fSwhMD09PWU/e3NlYXJjaDp0fTp0KGUpfSx3LnZha2F0YS5zZWFyY2guZGVmYXVsdHM9e2xvY2F0aW9uOjAsZGlzdGFuY2U6MTAwLHRocmVzaG9sZDouNixmdXp6eTohMSxjYXNlU2Vuc2l0aXZlOiExfSxFLmpzdHJlZS5kZWZhdWx0cy5zb3J0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2V0X3RleHQoZSk+dGhpcy5nZXRfdGV4dCh0KT8xOi0xfTt2YXIgbT0hKEUuanN0cmVlLnBsdWdpbnMuc29ydD1mdW5jdGlvbihlLHQpe3RoaXMuYmluZD1mdW5jdGlvbigpe3QuYmluZC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vbihcIm1vZGVsLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5zb3J0KHQucGFyZW50LCEwKX0uYmluZCh0aGlzKSkub24oXCJyZW5hbWVfbm9kZS5qc3RyZWUgY3JlYXRlX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0aGlzLnNvcnQodC5wYXJlbnR8fHQubm9kZS5wYXJlbnQsITEpLHRoaXMucmVkcmF3X25vZGUodC5wYXJlbnR8fHQubm9kZS5wYXJlbnQsITApfS5iaW5kKHRoaXMpKS5vbihcIm1vdmVfbm9kZS5qc3RyZWUgY29weV9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5zb3J0KHQucGFyZW50LCExKSx0aGlzLnJlZHJhd19ub2RlKHQucGFyZW50LCEwKX0uYmluZCh0aGlzKSl9LHRoaXMuc29ydD1mdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYoKGU9dGhpcy5nZXRfbm9kZShlKSkmJmUuY2hpbGRyZW4mJmUuY2hpbGRyZW4ubGVuZ3RoJiYoZS5jaGlsZHJlbi5zb3J0KHRoaXMuc2V0dGluZ3Muc29ydC5iaW5kKHRoaXMpKSx0KSlmb3IoaT0wLHI9ZS5jaGlsZHJlbl9kLmxlbmd0aDtpPHI7aSsrKXRoaXMuc29ydChlLmNoaWxkcmVuX2RbaV0sITEpfX0pLHQsdjtFLmpzdHJlZS5kZWZhdWx0cy5zdGF0ZT17a2V5OlwianN0cmVlXCIsZXZlbnRzOlwiY2hhbmdlZC5qc3RyZWUgb3Blbl9ub2RlLmpzdHJlZSBjbG9zZV9ub2RlLmpzdHJlZSBjaGVja19ub2RlLmpzdHJlZSB1bmNoZWNrX25vZGUuanN0cmVlXCIsdHRsOiExLGZpbHRlcjohMSxwcmVzZXJ2ZV9sb2FkZWQ6ITF9LEUuanN0cmVlLnBsdWdpbnMuc3RhdGU9ZnVuY3Rpb24oZSx0KXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXt0LmJpbmQuY2FsbCh0aGlzKTt2YXIgaT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5vbih0aGlzLnNldHRpbmdzLnN0YXRlLmV2ZW50cyxmdW5jdGlvbigpe20mJmNsZWFyVGltZW91dChtKSxtPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnNhdmVfc3RhdGUoKX0uYmluZCh0aGlzKSwxMDApfS5iaW5kKHRoaXMpKSx0aGlzLnRyaWdnZXIoXCJzdGF0ZV9yZWFkeVwiKX0uYmluZCh0aGlzKTt0aGlzLmVsZW1lbnQub24oXCJyZWFkeS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudC5vbmUoXCJyZXN0b3JlX3N0YXRlLmpzdHJlZVwiLGkpLHRoaXMucmVzdG9yZV9zdGF0ZSgpfHxpKCl9LmJpbmQodGhpcykpfSx0aGlzLnNhdmVfc3RhdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldF9zdGF0ZSgpO3RoaXMuc2V0dGluZ3Muc3RhdGUucHJlc2VydmVfbG9hZGVkfHxkZWxldGUgZS5jb3JlLmxvYWRlZDt2YXIgZT17c3RhdGU6ZSx0dGw6dGhpcy5zZXR0aW5ncy5zdGF0ZS50dGwsc2VjOituZXcgRGF0ZX07RS52YWthdGEuc3RvcmFnZS5zZXQodGhpcy5zZXR0aW5ncy5zdGF0ZS5rZXksSlNPTi5zdHJpbmdpZnkoZSkpfSx0aGlzLnJlc3RvcmVfc3RhdGU9ZnVuY3Rpb24oKXt2YXIgaT1FLnZha2F0YS5zdG9yYWdlLmdldCh0aGlzLnNldHRpbmdzLnN0YXRlLmtleSk7aWYoaSl0cnl7aT1KU09OLnBhcnNlKGkpfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEoaSYmaS50dGwmJmkuc2VjJiYrbmV3IERhdGUtaS5zZWM+aS50dGwpJiYoISEoaT0oaT1pJiZpLnN0YXRlP2kuc3RhdGU6aSkmJkUudmFrYXRhLmlzX2Z1bmN0aW9uKHRoaXMuc2V0dGluZ3Muc3RhdGUuZmlsdGVyKT90aGlzLnNldHRpbmdzLnN0YXRlLmZpbHRlci5jYWxsKHRoaXMsaSk6aSkmJih0aGlzLnNldHRpbmdzLnN0YXRlLnByZXNlcnZlX2xvYWRlZHx8ZGVsZXRlIGkuY29yZS5sb2FkZWQsdGhpcy5lbGVtZW50Lm9uZShcInNldF9zdGF0ZS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3QuaW5zdGFuY2UudHJpZ2dlcihcInJlc3RvcmVfc3RhdGVcIix7c3RhdGU6RS5leHRlbmQoITAse30saSl9KX0pLHRoaXMuc2V0X3N0YXRlKGkpLCEwKSl9LHRoaXMuY2xlYXJfc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gRS52YWthdGEuc3RvcmFnZS5kZWwodGhpcy5zZXR0aW5ncy5zdGF0ZS5rZXkpfX0sRS52YWthdGEuc3RvcmFnZT17c2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLHQpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKX0sZGVsOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSl9fSxFLmpzdHJlZS5kZWZhdWx0cy50eXBlcz17ZGVmYXVsdDp7fX0sRS5qc3RyZWUuZGVmYXVsdHMudHlwZXNbRS5qc3RyZWUucm9vdF09e30sRS5qc3RyZWUucGx1Z2lucy50eXBlcz1mdW5jdGlvbihlLGwpe3RoaXMuaW5pdD1mdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYodCYmdC50eXBlcyYmdC50eXBlcy5kZWZhdWx0KWZvcihpIGluIHQudHlwZXMpaWYoXCJkZWZhdWx0XCIhPT1pJiZpIT09RS5qc3RyZWUucm9vdCYmdC50eXBlcy5oYXNPd25Qcm9wZXJ0eShpKSlmb3IociBpbiB0LnR5cGVzLmRlZmF1bHQpdC50eXBlcy5kZWZhdWx0Lmhhc093blByb3BlcnR5KHIpJiZ0LnR5cGVzW2ldW3JdPT09UCYmKHQudHlwZXNbaV1bcl09dC50eXBlcy5kZWZhdWx0W3JdKTtsLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS50eXBlPUUuanN0cmVlLnJvb3R9LHRoaXMucmVmcmVzaD1mdW5jdGlvbihlLHQpe2wucmVmcmVzaC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdLnR5cGU9RS5qc3RyZWUucm9vdH0sdGhpcy5iaW5kPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyPXQubm9kZXMscz10aGlzLnNldHRpbmdzLnR5cGVzLGEsbixkPVwiZGVmYXVsdFwiLG8sYT0wLG49ci5sZW5ndGg7YTxuO2ErKyl7aWYoZD1cImRlZmF1bHRcIixpW3JbYV1dLm9yaWdpbmFsJiZpW3JbYV1dLm9yaWdpbmFsLnR5cGUmJnNbaVtyW2FdXS5vcmlnaW5hbC50eXBlXSYmKGQ9aVtyW2FdXS5vcmlnaW5hbC50eXBlKSxpW3JbYV1dLmRhdGEmJmlbclthXV0uZGF0YS5qc3RyZWUmJmlbclthXV0uZGF0YS5qc3RyZWUudHlwZSYmc1tpW3JbYV1dLmRhdGEuanN0cmVlLnR5cGVdJiYoZD1pW3JbYV1dLmRhdGEuanN0cmVlLnR5cGUpLGlbclthXV0udHlwZT1kLCEwPT09aVtyW2FdXS5pY29uJiZzW2RdLmljb24hPT1QJiYoaVtyW2FdXS5pY29uPXNbZF0uaWNvbiksc1tkXS5saV9hdHRyIT09UCYmXCJvYmplY3RcIj09dHlwZW9mIHNbZF0ubGlfYXR0cilmb3IobyBpbiBzW2RdLmxpX2F0dHIpc1tkXS5saV9hdHRyLmhhc093blByb3BlcnR5KG8pJiZcImlkXCIhPT1vJiYoaVtyW2FdXS5saV9hdHRyW29dPT09UD9pW3JbYV1dLmxpX2F0dHJbb109c1tkXS5saV9hdHRyW29dOlwiY2xhc3NcIj09PW8mJihpW3JbYV1dLmxpX2F0dHIuY2xhc3M9c1tkXS5saV9hdHRyLmNsYXNzK1wiIFwiK2lbclthXV0ubGlfYXR0ci5jbGFzcykpO2lmKHNbZF0uYV9hdHRyIT09UCYmXCJvYmplY3RcIj09dHlwZW9mIHNbZF0uYV9hdHRyKWZvcihvIGluIHNbZF0uYV9hdHRyKXNbZF0uYV9hdHRyLmhhc093blByb3BlcnR5KG8pJiZcImlkXCIhPT1vJiYoaVtyW2FdXS5hX2F0dHJbb109PT1QP2lbclthXV0uYV9hdHRyW29dPXNbZF0uYV9hdHRyW29dOlwiaHJlZlwiPT09byYmXCIjXCI9PT1pW3JbYV1dLmFfYXR0cltvXT9pW3JbYV1dLmFfYXR0ci5ocmVmPXNbZF0uYV9hdHRyLmhyZWY6XCJjbGFzc1wiPT09byYmKGlbclthXV0uYV9hdHRyLmNsYXNzPXNbZF0uYV9hdHRyLmNsYXNzK1wiIFwiK2lbclthXV0uYV9hdHRyLmNsYXNzKSl9aVtFLmpzdHJlZS5yb290XS50eXBlPUUuanN0cmVlLnJvb3R9LmJpbmQodGhpcykpLGwuYmluZC5jYWxsKHRoaXMpfSx0aGlzLmdldF9qc29uPWZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzLGE9dGhpcy5fbW9kZWwuZGF0YSxuPXQ/RS5leHRlbmQoITAse30sdCx7bm9faWQ6ITF9KTp7fSxkPWwuZ2V0X2pzb24uY2FsbCh0aGlzLGUsbixpKTtpZighMT09PWQpcmV0dXJuITE7aWYoRS52YWthdGEuaXNfYXJyYXkoZCkpZm9yKHI9MCxzPWQubGVuZ3RoO3I8cztyKyspZFtyXS50eXBlPShkW3JdLmlkfHwwPT09ZFtyXS5pZCkmJmFbZFtyXS5pZF0mJmFbZFtyXS5pZF0udHlwZT9hW2Rbcl0uaWRdLnR5cGU6XCJkZWZhdWx0XCIsdCYmdC5ub19pZCYmKGRlbGV0ZSBkW3JdLmlkLGRbcl0ubGlfYXR0ciYmZFtyXS5saV9hdHRyLmlkJiZkZWxldGUgZFtyXS5saV9hdHRyLmlkLGRbcl0uYV9hdHRyJiZkW3JdLmFfYXR0ci5pZCYmZGVsZXRlIGRbcl0uYV9hdHRyLmlkKTtlbHNlIGQudHlwZT0oZC5pZHx8MD09PWQuaWQpJiZhW2QuaWRdJiZhW2QuaWRdLnR5cGU/YVtkLmlkXS50eXBlOlwiZGVmYXVsdFwiLHQmJnQubm9faWQmJihkPXRoaXMuX2RlbGV0ZV9pZHMoZCkpO3JldHVybiBkfSx0aGlzLl9kZWxldGVfaWRzPWZ1bmN0aW9uKGUpe2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodmFyIHQ9MCxpPWUubGVuZ3RoO3Q8aTt0KyspZVt0XT10aGlzLl9kZWxldGVfaWRzKGVbdF0pO3JldHVybiBlfXJldHVybiBkZWxldGUgZS5pZCxlLmxpX2F0dHImJmUubGlfYXR0ci5pZCYmZGVsZXRlIGUubGlfYXR0ci5pZCxlLmFfYXR0ciYmZS5hX2F0dHIuaWQmJmRlbGV0ZSBlLmFfYXR0ci5pZCxlLmNoaWxkcmVuJiZFLnZha2F0YS5pc19hcnJheShlLmNoaWxkcmVuKSYmKGUuY2hpbGRyZW49dGhpcy5fZGVsZXRlX2lkcyhlLmNoaWxkcmVuKSksZX0sdGhpcy5jaGVjaz1mdW5jdGlvbihlLHQsaSxyLHMpe2lmKCExPT09bC5jaGVjay5jYWxsKHRoaXMsZSx0LGkscixzKSlyZXR1cm4hMTt0PXQmJih0LmlkfHwwPT09dC5pZCk/dDp0aGlzLmdldF9ub2RlKHQpLGk9aSYmKGkuaWR8fDA9PT1pLmlkKT9pOnRoaXMuZ2V0X25vZGUoaSk7dmFyIGEsbixkLG8sYyxhPShhPXQmJih0LmlkfHwwPT09dC5pZCk/cyYmcy5vcmlnaW4/cy5vcmlnaW46RS5qc3RyZWUucmVmZXJlbmNlKHQuaWQpOm51bGwpJiZhLl9tb2RlbCYmYS5fbW9kZWwuZGF0YT9hLl9tb2RlbC5kYXRhOm51bGw7c3dpdGNoKGUpe2Nhc2VcImNyZWF0ZV9ub2RlXCI6Y2FzZVwibW92ZV9ub2RlXCI6Y2FzZVwiY29weV9ub2RlXCI6aWYoXCJtb3ZlX25vZGVcIiE9PWV8fC0xPT09RS5pbkFycmF5KHQuaWQsaS5jaGlsZHJlbikpe2lmKChuPXRoaXMuZ2V0X3J1bGVzKGkpKS5tYXhfY2hpbGRyZW4hPT1QJiYtMSE9PW4ubWF4X2NoaWxkcmVuJiZuLm1heF9jaGlsZHJlbj09PWkuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiEodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ0eXBlc1wiLGlkOlwidHlwZXNfMDFcIixyZWFzb246XCJtYXhfY2hpbGRyZW4gcHJldmVudHMgZnVuY3Rpb246IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pO2lmKG4udmFsaWRfY2hpbGRyZW4hPT1QJiYtMSE9PW4udmFsaWRfY2hpbGRyZW4mJi0xPT09RS5pbkFycmF5KHQudHlwZXx8XCJkZWZhdWx0XCIsbi52YWxpZF9jaGlsZHJlbikpcmV0dXJuISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInR5cGVzXCIsaWQ6XCJ0eXBlc18wMlwiLHJlYXNvbjpcInZhbGlkX2NoaWxkcmVuIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCYmMCE9PXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCYmMCE9PWkuaWQpJiZpLmlkfSl9KTtpZihhJiZ0LmNoaWxkcmVuX2QmJnQucGFyZW50cyl7Zm9yKG89ZD0wLGM9dC5jaGlsZHJlbl9kLmxlbmd0aDtvPGM7bysrKWQ9TWF0aC5tYXgoZCxhW3QuY2hpbGRyZW5fZFtvXV0ucGFyZW50cy5sZW5ndGgpO2Q9ZC10LnBhcmVudHMubGVuZ3RoKzF9KGQ8PTB8fGQ9PT1QKSYmKGQ9MSk7ZG97aWYobi5tYXhfZGVwdGghPT1QJiYtMSE9PW4ubWF4X2RlcHRoJiZuLm1heF9kZXB0aDxkKXJldHVybiEodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ0eXBlc1wiLGlkOlwidHlwZXNfMDNcIixyZWFzb246XCJtYXhfZGVwdGggcHJldmVudHMgZnVuY3Rpb246IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pO2k9dGhpcy5nZXRfbm9kZShpLnBhcmVudCksbj10aGlzLmdldF9ydWxlcyhpKSxkKyt9d2hpbGUoaSl9fXJldHVybiEwfSx0aGlzLmdldF9ydWxlcz1mdW5jdGlvbihlKXtpZighKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7dmFyIGU9dGhpcy5nZXRfdHlwZShlLCEwKTtyZXR1cm4gZS5tYXhfZGVwdGg9PT1QJiYoZS5tYXhfZGVwdGg9LTEpLGUubWF4X2NoaWxkcmVuPT09UCYmKGUubWF4X2NoaWxkcmVuPS0xKSxlLnZhbGlkX2NoaWxkcmVuPT09UCYmKGUudmFsaWRfY2hpbGRyZW49LTEpLGV9LHRoaXMuZ2V0X3R5cGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIShlPXRoaXMuZ2V0X25vZGUoZSkpJiYodD9FLmV4dGVuZCh7dHlwZTplLnR5cGV9LHRoaXMuc2V0dGluZ3MudHlwZXNbZS50eXBlXSk6ZS50eXBlKX0sdGhpcy5zZXRfdHlwZT1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX21vZGVsLmRhdGEscixzLGEsbixkLG8sYyxsO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3Iocz0wLGE9KGU9ZS5zbGljZSgpKS5sZW5ndGg7czxhO3MrKyl0aGlzLnNldF90eXBlKGVbc10sdCk7cmV0dXJuITB9aWYocj10aGlzLnNldHRpbmdzLnR5cGVzLGU9dGhpcy5nZXRfbm9kZShlKSwhclt0XXx8IWUpcmV0dXJuITE7aWYoKGM9dGhpcy5nZXRfbm9kZShlLCEwKSkmJmMubGVuZ3RoJiYobD1jLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikpLG49ZS50eXBlLGQ9dGhpcy5nZXRfaWNvbihlKSxlLnR5cGU9dCwhMCE9PWQmJnJbbl0mJihyW25dLmljb249PT1QfHxkIT09cltuXS5pY29uKXx8dGhpcy5zZXRfaWNvbihlLHJbdF0uaWNvbj09PVB8fHJbdF0uaWNvbikscltuXSYmcltuXS5saV9hdHRyIT09UCYmXCJvYmplY3RcIj09dHlwZW9mIHJbbl0ubGlfYXR0cilmb3IobyBpbiByW25dLmxpX2F0dHIpcltuXS5saV9hdHRyLmhhc093blByb3BlcnR5KG8pJiZcImlkXCIhPT1vJiYoXCJjbGFzc1wiPT09bz8oaVtlLmlkXS5saV9hdHRyLmNsYXNzPShpW2UuaWRdLmxpX2F0dHIuY2xhc3N8fFwiXCIpLnJlcGxhY2UocltuXS5saV9hdHRyW29dLFwiXCIpLGMmJmMucmVtb3ZlQ2xhc3MocltuXS5saV9hdHRyW29dKSk6aVtlLmlkXS5saV9hdHRyW29dPT09cltuXS5saV9hdHRyW29dJiYoaVtlLmlkXS5saV9hdHRyW29dPW51bGwsYyYmYy5yZW1vdmVBdHRyKG8pKSk7aWYocltuXSYmcltuXS5hX2F0dHIhPT1QJiZcIm9iamVjdFwiPT10eXBlb2YgcltuXS5hX2F0dHIpZm9yKG8gaW4gcltuXS5hX2F0dHIpcltuXS5hX2F0dHIuaGFzT3duUHJvcGVydHkobykmJlwiaWRcIiE9PW8mJihcImNsYXNzXCI9PT1vPyhpW2UuaWRdLmFfYXR0ci5jbGFzcz0oaVtlLmlkXS5hX2F0dHIuY2xhc3N8fFwiXCIpLnJlcGxhY2UocltuXS5hX2F0dHJbb10sXCJcIiksbCYmbC5yZW1vdmVDbGFzcyhyW25dLmFfYXR0cltvXSkpOmlbZS5pZF0uYV9hdHRyW29dPT09cltuXS5hX2F0dHJbb10mJihcImhyZWZcIj09PW8/KGlbZS5pZF0uYV9hdHRyW29dPVwiI1wiLGwmJmwuYXR0cihcImhyZWZcIixcIiNcIikpOihkZWxldGUgaVtlLmlkXS5hX2F0dHJbb10sbCYmbC5yZW1vdmVBdHRyKG8pKSkpO2lmKHJbdF0ubGlfYXR0ciE9PVAmJlwib2JqZWN0XCI9PXR5cGVvZiByW3RdLmxpX2F0dHIpZm9yKG8gaW4gclt0XS5saV9hdHRyKXJbdF0ubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShvKSYmXCJpZFwiIT09byYmKGlbZS5pZF0ubGlfYXR0cltvXT09PVA/KGlbZS5pZF0ubGlfYXR0cltvXT1yW3RdLmxpX2F0dHJbb10sYyYmKFwiY2xhc3NcIj09PW8/Yy5hZGRDbGFzcyhyW3RdLmxpX2F0dHJbb10pOmMuYXR0cihvLHJbdF0ubGlfYXR0cltvXSkpKTpcImNsYXNzXCI9PT1vJiYoaVtlLmlkXS5saV9hdHRyLmNsYXNzPXJbdF0ubGlfYXR0cltvXStcIiBcIitpW2UuaWRdLmxpX2F0dHIuY2xhc3MsYyYmYy5hZGRDbGFzcyhyW3RdLmxpX2F0dHJbb10pKSk7aWYoclt0XS5hX2F0dHIhPT1QJiZcIm9iamVjdFwiPT10eXBlb2Ygclt0XS5hX2F0dHIpZm9yKG8gaW4gclt0XS5hX2F0dHIpclt0XS5hX2F0dHIuaGFzT3duUHJvcGVydHkobykmJlwiaWRcIiE9PW8mJihpW2UuaWRdLmFfYXR0cltvXT09PVA/KGlbZS5pZF0uYV9hdHRyW29dPXJbdF0uYV9hdHRyW29dLGwmJihcImNsYXNzXCI9PT1vP2wuYWRkQ2xhc3Moclt0XS5hX2F0dHJbb10pOmwuYXR0cihvLHJbdF0uYV9hdHRyW29dKSkpOlwiaHJlZlwiPT09byYmXCIjXCI9PT1pW2UuaWRdLmFfYXR0cltvXT8oaVtlLmlkXS5hX2F0dHIuaHJlZj1yW3RdLmFfYXR0ci5ocmVmLGwmJmwuYXR0cihcImhyZWZcIixyW3RdLmFfYXR0ci5ocmVmKSk6XCJjbGFzc1wiPT09byYmKGlbZS5pZF0uYV9hdHRyLmNsYXNzPXJbdF0uYV9hdHRyLmNsYXNzK1wiIFwiK2lbZS5pZF0uYV9hdHRyLmNsYXNzLGwmJmwuYWRkQ2xhc3Moclt0XS5hX2F0dHJbb10pKSk7cmV0dXJuITB9fSxFLmpzdHJlZS5kZWZhdWx0cy51bmlxdWU9e2Nhc2Vfc2Vuc2l0aXZlOiExLHRyaW1fd2hpdGVzcGFjZTohMSxkdXBsaWNhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZStcIiAoXCIrdCtcIilcIn19LEUuanN0cmVlLnBsdWdpbnMudW5pcXVlPWZ1bmN0aW9uKGUsZil7dGhpcy5jaGVjaz1mdW5jdGlvbihlLHQsaSxyLHMpe2lmKCExPT09Zi5jaGVjay5jYWxsKHRoaXMsZSx0LGkscixzKSlyZXR1cm4hMTtpZih0PXQmJih0LmlkfHwwPT09dC5pZCk/dDp0aGlzLmdldF9ub2RlKHQpLCEoaT1pJiYoaS5pZHx8MD09PWkuaWQpP2k6dGhpcy5nZXRfbm9kZShpKSl8fCFpLmNoaWxkcmVuKXJldHVybiEwO2Zvcih2YXIgYT1cInJlbmFtZV9ub2RlXCI9PT1lP3I6dC50ZXh0LG49W10sZD10aGlzLnNldHRpbmdzLnVuaXF1ZS5jYXNlX3NlbnNpdGl2ZSxvPXRoaXMuc2V0dGluZ3MudW5pcXVlLnRyaW1fd2hpdGVzcGFjZSxjPXRoaXMuX21vZGVsLmRhdGEsbCxoLF8sbD0wLGg9aS5jaGlsZHJlbi5sZW5ndGg7bDxoO2wrKylfPWNbaS5jaGlsZHJlbltsXV0udGV4dCxkfHwoXz1fLnRvTG93ZXJDYXNlKCkpLG8mJihfPV8ucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLG4ucHVzaChfKTtzd2l0Y2goZHx8KGE9YS50b0xvd2VyQ2FzZSgpKSxvJiYoYT1hLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKSxlKXtjYXNlXCJkZWxldGVfbm9kZVwiOnJldHVybiEwO2Nhc2VcInJlbmFtZV9ub2RlXCI6cmV0dXJuIF89dC50ZXh0fHxcIlwiLGR8fChfPV8udG9Mb3dlckNhc2UoKSksbyYmKF89Xy5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksKGw9LTE9PT1FLmluQXJyYXkoYSxuKXx8dC50ZXh0JiZfPT09YSl8fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzAxXCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2ErXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pLGw7Y2FzZVwiY3JlYXRlX25vZGVcIjpyZXR1cm4obD0tMT09PUUuaW5BcnJheShhLG4pKXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDRcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIrYStcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQmJjAhPT10LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQmJjAhPT1pLmlkKSYmaS5pZH0pfSksbDtjYXNlXCJjb3B5X25vZGVcIjpyZXR1cm4obD0tMT09PUUuaW5BcnJheShhLG4pKXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDJcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIrYStcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQmJjAhPT10LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQmJjAhPT1pLmlkKSYmaS5pZH0pfSksbDtjYXNlXCJtb3ZlX25vZGVcIjpyZXR1cm4obD10LnBhcmVudD09PWkuaWQmJighc3x8IXMuaXNfbXVsdGkpfHwtMT09PUUuaW5BcnJheShhLG4pKXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDNcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIrYStcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQmJjAhPT10LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQmJjAhPT1pLmlkKSYmaS5pZH0pfSksbH1yZXR1cm4hMH0sdGhpcy5jcmVhdGVfbm9kZT1mdW5jdGlvbihlLHQsaSxyLHMpe2lmKCF0fHxcIm9iamVjdFwiPT10eXBlb2YgdCYmdC50ZXh0PT09UCl7aWYobnVsbD09PWUmJihlPUUuanN0cmVlLnJvb3QpLCEoZT10aGlzLmdldF9ub2RlKGUpKSlyZXR1cm4gZi5jcmVhdGVfbm9kZS5jYWxsKHRoaXMsZSx0LGkscixzKTtpZighKGk9aT09PVA/XCJsYXN0XCI6aSkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiYhcyYmIXRoaXMuaXNfbG9hZGVkKGUpKXJldHVybiBmLmNyZWF0ZV9ub2RlLmNhbGwodGhpcyxlLHQsaSxyLHMpO3Q9dHx8e307Zm9yKHZhciBhLG4sZCxvLGMsbD10aGlzLl9tb2RlbC5kYXRhLGg9dGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUsXz10aGlzLnNldHRpbmdzLnVuaXF1ZS50cmltX3doaXRlc3BhY2UsZz10aGlzLnNldHRpbmdzLnVuaXF1ZS5kdXBsaWNhdGUsdSxuPWE9dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIiksZD1bXSxvPTAsYz1lLmNoaWxkcmVuLmxlbmd0aDtvPGM7bysrKXU9bFtlLmNoaWxkcmVuW29dXS50ZXh0LGh8fCh1PXUudG9Mb3dlckNhc2UoKSksXyYmKHU9dS5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksZC5wdXNoKHUpO289MSx1PW4saHx8KHU9dS50b0xvd2VyQ2FzZSgpKSxfJiYodT11LnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKTt3aGlsZSgtMSE9PUUuaW5BcnJheSh1LGQpKXU9bj1nLmNhbGwodGhpcyxhLCsrbykudG9TdHJpbmcoKSxofHwodT11LnRvTG93ZXJDYXNlKCkpLF8mJih1PXUucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpO3QudGV4dD1ufXJldHVybiBmLmNyZWF0ZV9ub2RlLmNhbGwodGhpcyxlLHQsaSxyLHMpfX07dmFyIGo9Yi5jcmVhdGVFbGVtZW50KFwiRElWXCIpO2lmKGouc2V0QXR0cmlidXRlKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKSxqLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxqLmNsYXNzTmFtZT1cImpzdHJlZS13aG9sZXJvd1wiLGouaW5uZXJIVE1MPVwiJiMxNjA7XCIsRS5qc3RyZWUucGx1Z2lucy53aG9sZXJvdz1mdW5jdGlvbihlLGEpe3RoaXMuYmluZD1mdW5jdGlvbigpe2EuYmluZC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vbihcInJlYWR5LmpzdHJlZSBzZXRfc3RhdGUuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLmhpZGVfZG90cygpfS5iaW5kKHRoaXMpKS5vbihcImluaXQuanN0cmVlIGxvYWRpbmcuanN0cmVlIHJlYWR5LmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctdWxcIil9LmJpbmQodGhpcykpLm9uKFwiZGVzZWxlY3RfYWxsLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXdob2xlcm93LWNsaWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKX0uYmluZCh0aGlzKSkub24oXCJjaGFuZ2VkLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXdob2xlcm93LWNsaWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKTtmb3IodmFyIGk9ITEscixzLHI9MCxzPXQuc2VsZWN0ZWQubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5nZXRfbm9kZSh0LnNlbGVjdGVkW3JdLCEwKSkmJmkubGVuZ3RoJiZpLmNoaWxkcmVuKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5hZGRDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpfS5iaW5kKHRoaXMpKS5vbihcIm9wZW5fbm9kZS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuZ2V0X25vZGUodC5ub2RlLCEwKS5maW5kKFwiLmpzdHJlZS1jbGlja2VkXCIpLnBhcmVudCgpLmNoaWxkcmVuKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5hZGRDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpfS5iaW5kKHRoaXMpKS5vbihcImhvdmVyX25vZGUuanN0cmVlIGRlaG92ZXJfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe1wiaG92ZXJfbm9kZVwiPT09ZS50eXBlJiZ0aGlzLmlzX2Rpc2FibGVkKHQubm9kZSl8fHRoaXMuZ2V0X25vZGUodC5ub2RlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtd2hvbGVyb3dcIilbXCJob3Zlcl9ub2RlXCI9PT1lLnR5cGU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtd2hvbGVyb3ctaG92ZXJlZFwiKX0uYmluZCh0aGlzKSkub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixmdW5jdGlvbihlKXt2YXIgdDt0aGlzLl9kYXRhLmNvbnRleHRtZW51JiYoZS5wcmV2ZW50RGVmYXVsdCgpLHQ9RS5FdmVudChcImNvbnRleHRtZW51XCIse21ldGFLZXk6ZS5tZXRhS2V5LGN0cmxLZXk6ZS5jdHJsS2V5LGFsdEtleTplLmFsdEtleSxzaGlmdEtleTplLnNoaWZ0S2V5LHBhZ2VYOmUucGFnZVgscGFnZVk6ZS5wYWdlWX0pLEUoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKHQpKX0uYmluZCh0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciB0PUUuRXZlbnQoXCJjbGlja1wiLHttZXRhS2V5OmUubWV0YUtleSxjdHJsS2V5OmUuY3RybEtleSxhbHRLZXk6ZS5hbHRLZXksc2hpZnRLZXk6ZS5zaGlmdEtleX0pO0UoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKHQpLnRyaWdnZXIoXCJmb2N1c1wiKX0pLm9uKFwiZGJsY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93XCIsZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTt2YXIgdD1FLkV2ZW50KFwiZGJsY2xpY2tcIix7bWV0YUtleTplLm1ldGFLZXksY3RybEtleTplLmN0cmxLZXksYWx0S2V5OmUuYWx0S2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXl9KTtFKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0KS50cmlnZ2VyKFwiZm9jdXNcIil9KS5vbihcImNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS1sZWFmID4gLmpzdHJlZS1vY2xcIixmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciB0PUUuRXZlbnQoXCJjbGlja1wiLHttZXRhS2V5OmUubWV0YUtleSxjdHJsS2V5OmUuY3RybEtleSxhbHRLZXk6ZS5hbHRLZXksc2hpZnRLZXk6ZS5zaGlmdEtleX0pO0UoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKHQpLnRyaWdnZXIoXCJmb2N1c1wiKX0uYmluZCh0aGlzKSkub24oXCJtb3VzZW92ZXIuanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93LCAuanN0cmVlLWljb25cIixmdW5jdGlvbihlKXtyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLmlzX2Rpc2FibGVkKGUuY3VycmVudFRhcmdldCl8fHRoaXMuaG92ZXJfbm9kZShlLmN1cnJlbnRUYXJnZXQpLCExfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsXCIuanN0cmVlLW5vZGVcIixmdW5jdGlvbihlKXt0aGlzLmRlaG92ZXJfbm9kZShlLmN1cnJlbnRUYXJnZXQpfS5iaW5kKHRoaXMpKX0sdGhpcy50ZWFyZG93bj1mdW5jdGlvbigpe3RoaXMuc2V0dGluZ3Mud2hvbGVyb3cmJnRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5yZW1vdmUoKSxhLnRlYXJkb3duLmNhbGwodGhpcyl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7dmFyIHM7cmV0dXJuKGU9YS5yZWRyYXdfbm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpJiYocz1qLmNsb25lTm9kZSghMCksLTEhPT1FLmluQXJyYXkoZS5pZCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQpJiYocy5jbGFzc05hbWUrPVwiIGpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkJiZ0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD09PWUuaWQmJihzLmNsYXNzTmFtZSs9XCIganN0cmVlLXdob2xlcm93LWhvdmVyZWRcIiksZS5pbnNlcnRCZWZvcmUocyxlLmNoaWxkTm9kZXNbMF0pKSxlfX0sd2luZG93LmN1c3RvbUVsZW1lbnRzJiZPYmplY3QmJk9iamVjdC5jcmVhdGUpe3ZhciBlPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtlLmNyZWF0ZWRDYWxsYmFjaz1mdW5jdGlvbigpe3ZhciBlPXtjb3JlOnt9LHBsdWdpbnM6W119LHQ7Zm9yKHQgaW4gRS5qc3RyZWUucGx1Z2lucylFLmpzdHJlZS5wbHVnaW5zLmhhc093blByb3BlcnR5KHQpJiZ0aGlzLmF0dHJpYnV0ZXNbdF0mJihlLnBsdWdpbnMucHVzaCh0KSx0aGlzLmdldEF0dHJpYnV0ZSh0KSYmSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZSh0KSkmJihlW3RdPUpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUodCkpKSk7Zm9yKHQgaW4gRS5qc3RyZWUuZGVmYXVsdHMuY29yZSlFLmpzdHJlZS5kZWZhdWx0cy5jb3JlLmhhc093blByb3BlcnR5KHQpJiZ0aGlzLmF0dHJpYnV0ZXNbdF0mJihlLmNvcmVbdF09SlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZSh0KSl8fHRoaXMuZ2V0QXR0cmlidXRlKHQpKTtFKHRoaXMpLmpzdHJlZShlKX07dHJ5e3dpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ2YWthdGEtanN0cmVlXCIsZnVuY3Rpb24oKXt9LHtwcm90b3R5cGU6ZX0pfWNhdGNoKGUpe319fX0pOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==